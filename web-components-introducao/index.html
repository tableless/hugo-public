
<!DOCTYPE html>
<html lang="pt-br" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <base href="https://tableless.github.io/hugo-public/">
  <title>Tableless</title>
  <link rel="canonical" href="https://tableless.github.io/hugo-public/web-components-introducao/">
  <link href="" rel="alternate" type="application/rss+xml" title="Tableless" />
  <link rel="stylesheet" href="https://tableless.github.io/hugo-public/css/style.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css">

</head>
<body>


  <header id="tb-header">
    <a href="https://tableless.github.io/hugo-public/" class="tb-logo"><img src="images/logo.svg"></a>

    

    <nav id="tb-menu">
      <ul>

        
          
              
            <li>
              <a href="/hugo-public/categories/html">
                  
                  HTML
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/css/">
                  
                  CSS
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/javascript/">
                  
                  JavaScript
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/back-end/">
                  
                  Back-end
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/wordpress/">
                  
                  WordPress
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/acessibilidade/">
                  
                  Acessibilidade
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/design/">
                  
                  Design
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/t%C3%A9cnicas-e-pr%C3%A1ticas/">
                  
                  Na prática
              </a>
          
            </li>
          

      </ul>
    </nav>

  </header>

  <header class="tb-post-header">
    <h1 class="tb-hero-title"><a href="/hugo-public/web-components-introducao/">Web Components: Introdução</a></h1>
  <p class="tb-hero-p">
    
    Entenda os principais tópicos e as informações iniciais sobre Web Components.
    
  </p>
      <span class="tb-author">por <a href="/hugo-public/author/diego-eis">Diego Eis</a></span>


  </header>


<section class="tb-post">

  <section class="tb-post-content">
    <article class="tb-post-article">
      

<p>O que um plugin JavaScript/jQuery tem em comum com frameworks CSS como o Bootstrap? Resposta: Grandes pedaços de código HTML, CSS e Javascript.</p>

<p>Todas as vezes que você precisa implementar um slider ou elementos de um framework que você gosta, invariavelmente você precisa copiar um grande pedaço de código HTML, CSS e Javascript para depois aplicar em seu projeto. Todos estes códigos estão sempre separados e sofrem, principalmente, efeitos do código externo do seu projeto ou de outros plugins. Muitas vezes você deve ter tido algum problema de conflito entre códigos do plugin e do seu projeto. Isso gera retrabalho e outros problemas.</p>

<p>Mesmo se você cria seus próprios plugins ou frameworks de CSS, você ainda precisa tomar uma série de cuidados para que o código não sofra nenhum conflito e que seja o mais flexível e reutilizável possível. Mas acredite, mesmo que você faça um trabalho perfeito, alguma coisa sempre foge do controle.</p>

<p>Os Web Components podem ajudar nesses problemas e em muitos outros.</p>

<h2 id="o-que-são-os-web-components">O que são os Web Components</h2>

<p>A ideia de criar componentes na web não é nova. A cada novo framework ou a cada novo plugin, tentamos fazer isso. O problema é que um componente só é um componente se ele pode ser reutilizado, diversas vezes, em qualquer lugar do projeto, sem sofrer alterações acidentais por códigos externos e também sem modificar outros elementos. É aí que entram os Web Components.</p>

<blockquote>
<p>The component model for the Web (also known as Web Components) consists of four pieces designed to be used together to let web application authors define widgets with a level of visual richness not possible with CSS alone, and ease of composition and reuse not possible with script libraries today.</p>
</blockquote>

<p>Os Web Components são por enquanto um grupo de 5 especificações, que formam o guarda-chuva dos Web Components, são eles:</p>

<ol>
<li><strong><a href="http://www.w3.org/TR/components-intro/#template-section">Templates</a></strong>: definem pedaços de código que são totalmente inertes à página até que seu Javascript os ative.</li>
<li><strong><a href="http://www.w3.org/TR/components-intro/#decorator-section">Decorators</a></strong>: aplicam os templates baseando-se em seletores para criar mudanças visuais ricas e comportamentos.</li>
<li><strong><a href="http://www.w3.org/TR/custom-elements/">Custom Elements</a></strong>: são elementos customizados, com nomes e scripts criados por você.</li>
<li><strong><a href="http://www.w3.org/TR/shadow-dom/">Shadow DOM</a></strong>: é onde uma parte do código do seu elemento é encapsulada e escondida pelo browser, ou seja, não é visível no código normal do DOM, mas que monta todo seu componente &#8220;por baixo dos panos&#8221;.</li>
<li><strong><a href="http://www.w3.org/TR/2013/WD-html-imports-20130514/">Imports</a></strong>: definem quais elementos customizados são empacotados e lidos como um recurso.</li>
</ol>

<p>Cada uma dessas partes são individualmente úteis, mas se tornam realmente importantes quando combinadas. Assim você consegue fazer um componente totalmente funcional, com o visual e o código customizados.</p>

<p>Para facilitar o entendimento, aqui vai um exemplo bem tosco: pense que a independência dos web components funcionam como um iframe. O Facebook, Twitter e Google+ usam iframes para colocar seus botões nas páginas. Sendo um iframe eles podem usar o Javascript, o CSS e o HTML customizados sem que o código da sua página quebre os botões deles e vice-versa.</p>

<p>Você precisa entender dois conceitos essenciais e importantes dentro dos Web Components: Shadow DOM e Custom Elements.</p>

<h2 id="custom-elements">Custom Elements</h2>

<p>E se você pudesse criar suas próprias tags?</p>

<p>O HTML tem muitos elementos que usamos todos os dias. O problema é que a Web cresceu demais e a verdade é que não temos mais elementos que cobrem todas as nossas necessidades. Por exemplo: como você faz uma modal? Como você faz tabs? Como você faz um collapse? Não existem elementos no HTML que criam estes módulos e suas interações. Por isso você usa listas, divs, parágrafos, títulos e o que der na telha para fazer estes elementos funcionarem.</p>

<p>Quem precisa lidar com interfaces pesadas de aplicações baseadas em web, como por exemplo um tocador de músicas online, tipo o Spotify, Rdio e Deezer, sente esse problema todos os dias. Na verdade, para criar qualquer aplicação baseada em web, você vai precisar de uma boa dose criatividade usando os elementos existentes do HTML para produzir o layout que foi planejado. Muitas vezes o código vira um punhado de DIVs e SPANs. Aí eu te pergunto: nesses casos a semântica é importante? Quando você ler logo abaixo sobre Shadow DOM, você vai entender que a semântica pode ser bem surrada em ambientes assim. Ela se torna tão subjetiva que pode fazer você pensar que ela realmente não existe.</p>

<p>Voltando ao assunto: como fazer seus próprios elementos?</p>

<p>Quando criarmos um elemento, precisamos que ele herde as mesmas possibilidades que os elementos normais do HTML. Isso quer dizer que você precisa poder formatar com CSS e também manipular com Javascript.</p>

<p>Quando criarmos o elemento, precisamos fazer com que o browser reconheça esse elemento. No Javascript, você usará o <code>documento.registerElement()</code> para fazer isso:</p>

<pre class="lang-javascript">var yourElement = document.registerElement('nome-elemento');
</pre>

<p>O argumento do <strong>document.registerElement()</strong> define o nome do seu elemento, da sua nova tag. O nome sempre tem que ter um traço (-). Se você quiser, o nome pode ter mais do que duas palavras também, tipo: <list-combo-select>. Agora, um nome assim: <list> ou <list_combo> não são válidos. Essa restrição permite que o parser do browser entenda o que é um elemento customizado dos elementos default do HTML, garantindo compatibilidades futuras.</p>

<p>Para que um elemento seja realmente um elemento, além de registrar o elemento no browser como fizemos acima, nós precisamos que ele herde as características de funcionamento que o Javascript tem sobre um elemento HTML convencional. Difícil de entender né? Mas pense assim: você quer que seu elemento possa ser manipulado como um div, p, img e etc. Para isso você vai criar via javascript um objeto, que herda as características do elemento HTML e o prototype Javascript:</p>

<pre class="lang-javascript">var yourElement = document.registerElement('seu-elemento', {
  prototype: Object.create(HTMLButtonElement.prototype),
  extends: 'button' // Define que o elemento button pode herdar as características do seu elemento.
});
</pre>

<p>Isso faz com que você possa adicionar eventos de click, hover e etc no seu elemento customizado.</p>

<p>Não quero me estender agora, mas haverá outro artigo explicando como criar os elementos, inclusive usando as bibliotecas X-Tag ou o Polymer para ajudar.</p>

<h2 id="shadow-dom">Shadow DOM</h2>

<p>O Shadow DOM é uma parte interessante e importante do processo.</p>

<p>Quando você liga um carro, você não pensa no processo que faz tudo aquilo funcionar. Na verdade só nos preocupamos no que acontece debaixo do capô se halgo dá errado quando giramos a chave. A mesma coisa acontece com as tags do HTML. Pare um momento e pense: do que é feito o input de texto?</p>

<p><input type="text" /></p>

<p>Quais os elementos que o browser usa para montá-lo na tela?</p>

<p>E se eu dissesse que ele é basicamente um elemento DIV?</p>

<pre class="lang-html">&lt;input type="text"&gt;
  &lt;div id="inner-editor"&gt;&lt;/div&gt;
&lt;/input&gt;
</pre>

<p>Isso se chama <strong>Shadow DOM</strong>. Para você entender melhor, veja como é feito a tag de Vídeo:</p>

<p>Essa é a versão original, que você já deve conhecer:</p>

<pre class="lang-html">&lt;video controls poster="poster.png"&gt;
    &lt;source src="video.webm" type='video/webm;codecs="vp8, vorbis"' /&gt;
    &lt;source src="video.mp4" type='video/mp4;codecs="avc1.42E01E, mp4a.40.2"' /&gt;
    &lt;track src="video.vtt" label="Portuguese subtitles" kind="subtitles" srclang="pt-br" default&gt;&lt;/track&gt;
&lt;/video&gt;
</pre>

<p>Essa é a versão escondida:</p>

<pre class="lang-html">&lt;video controls poster="poster.png"&gt;
    &lt;div&gt;
        &lt;div style="display: none"&gt;&lt;/div&gt;
        &lt;div&gt;
            &lt;div&gt;
                &lt;input type="button"&gt;
                &lt;input type="range" step="any" max="70.112"&gt;
                &lt;div style="display: none;"&gt;0:00&lt;/div&gt;
                &lt;div&gt;1:10&lt;/div&gt;
                &lt;input type="button"&gt;
                &lt;input type="range" step="any" max="1"&gt;
                &lt;input type="button"&gt;
                &lt;input type="button"&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;

  &lt;source src="video.webm" type='video/webm;codecs="vp8, vorbis"' /&gt;
  &lt;source src="video.mp4" type='video/mp4;codecs="avc1.42E01E, mp4a.40.2"' /&gt;
  &lt;track src="video.vtt" label="Portuguese subtitles" kind="subtitles" srclang="pt-br" default&gt;&lt;/track&gt;
&lt;/video&gt;
</pre>

<p>Pois é. Não confie em ninguém!</p>

<p>É assim, com esse código nada elegante, que o browser monta os elementos. Esse código parece ser ruim e você pode levar um susto quando começar a fuçar códigos de outros elementos, mas não é errado e pode mudar de browser para browser. Lembre-se que ali é um DOM escondido, o que importa não é a beleza do código, mas a funcionalidade.</p>

<p>E não, você não precisa escrever um código assim pra criar seus próprios componentes.</p>

<p>Pense em como fazer um slider de imagem. Um código de slider geralmente é algo assim:</p>

<pre class="lang-html">&lt;div id="carousel-example-generic" class="carousel slide" data-ride="carousel"&gt;
  &lt;!-- Indicators --&gt;
  &lt;ol class="carousel-indicators"&gt;
    &lt;li data-target="#carousel-example-generic" data-slide-to="0" class="active"&gt;&lt;/li&gt;
    &lt;li data-target="#carousel-example-generic" data-slide-to="1"&gt;&lt;/li&gt;
    &lt;li data-target="#carousel-example-generic" data-slide-to="2"&gt;&lt;/li&gt;
  &lt;/ol&gt;

  &lt;!-- Wrapper for slides --&gt;
  &lt;div class="carousel-inner"&gt;
    &lt;div class="item active"&gt;
      &lt;img src="..." alt="..."&gt;
      &lt;div class="carousel-caption"&gt;
        ...
      &lt;/div&gt;
    &lt;/div&gt;
    ...
  &lt;/div&gt;

  &lt;!-- Controls --&gt;
  &lt;a class="left carousel-control" href="#carousel-example-generic" data-slide="prev"&gt;
    &lt;span class="glyphicon glyphicon-chevron-left"&gt;&lt;/span&gt;
  &lt;/a&gt;
  &lt;a class="right carousel-control" href="#carousel-example-generic" data-slide="next"&gt;
    &lt;span class="glyphicon glyphicon-chevron-right"&gt;&lt;/span&gt;
  &lt;/a&gt;
&lt;/div&gt;
</pre>

<p>Imagine fazer algo assim:</p>

<pre class="lang-html">&lt;img-slider&gt;
  &lt;img src="./image1.jpg" alt="a dramatic sunset"&gt;
  &lt;img src="./image2.jpg" alt="a rock arch"&gt;
  &lt;img src="./image3.jpg" alt="some neat grooves"&gt;
  &lt;img src="./image4.jpg" alt="an interesting rock"&gt;
&lt;/img-slider&gt;
</pre>

<p>Entende? Toda a parafernália que fica atrapalhando e que provavelmente você nem vai mexer, fica escondida. As imagens, que são o que realmente importa, estão logo ali.</p>

<h3 id="como-mostrar-o-shadow-dom">Como mostrar o Shadow DOM?</h3>

<p>Se você não encontrar no seu Chrome, tente baixar o <a href="http://www.google.com/intl/pt-BR/chrome/browser/canary.html">Chrome Canary</a>.</p>

<p>Abra o Developer Tools, clique no ícone da engrenagem para abrir a tela de configurações. Procure a opção, habilite e pronto, você já tem super poderes.</p>

<p><img src="http://tableless.com.br/wp-content/uploads/2014/05/shadow-dom-chrome-config.png" alt="shadow-dom-chrome-config" class="alignnone size-full wp-image-42548" srcset="uploads/2014/05/shadow-dom-chrome-config.png 2372w, uploads/2014/05/shadow-dom-chrome-config-400x165.png 400w" sizes="(max-width: 2372px) 100vw, 2372px" /></p>

<h2 id="suporte">Suporte</h2>

<p>E o suporte dos browsers? Cara, até que é ótimo. <a href="http://jonrimmer.github.io/are-we-componentized-yet/">Veja essa tabela</a>. Tirando o Safari e o IE que ainda não tem suporte algum, os outros browsers tem problemas apenas com o HTML Imports. Owl, Yeah!</p>

<p><a href="http://www.polymer-project.org/">Polymer</a> é uma biblioteca construída em cima de Web Components e projetada para fazer com que os navegadores modernos entendam os Web Components.</p>

<p><a href="http://x-tags.org/">X-Tag</a> é uma biblioteca Javascript pequenininha, criada e mantida pela Mozilla, que traz as capacidades do Custom elements do Web Components para todos os browsers modernos.</p>

<h2 id="slides-e-leituras-obrigatórias">Slides e leituras obrigatórias</h2>

<p>Este artigo foi uma introdução para você começar a se interessar e a pesquisar sobre Web Components. Existem milhares de sites por aí que eu aconselho você ler. Os links estão logo abaixo:</p>

<ul>
<li><a href="http://webcomponents.org/">webcomponents.org</a></li>
<li><a href="http://www.smashingmagazine.com/2014/03/04/introduction-to-custom-elements/">A Detailed Introduction To Custom Elements</a></li>
<li><a href="http://www.html5rocks.com/en/tutorials/webcomponents/customelements/?redirect_from_locale=pt">About Custom Elements</a></li>
<li><a href="http://css-tricks.com/modular-future-web-components/">A Guide to Web Components</a></li>
<li><a href="http://robdodson.me/blog/2013/03/17/why-web-components/">Why Web Components?</a></li>
<li><a href="http://www.w3.org/TR/components-intro/#introduction">Documentação do W3C</a></li>
</ul>

    </article>

<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = '';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
  </section>


  <aside class="tb-aside">
    Banner
  </aside>

</section>


<footer id="tb-footer">
    <div class="tb-container">
    <ul class="tb-social-links">
        <li><a href="http://facebook.com/tablelessbr">Facebook</a></li>
        <li><a href="http://twitter.com/tableless">Twitter</a></li>
        <li><a href="http://tableless.com.br/feed">RSS</a></li>
        <li><a href="http://medium.com/tableless">Medium</a></li>
    </ul>
    <nav class="tb-footer-nav">
        <a href="">Contato</a>
        <a href="">Anuncie</a>
        <a href="">Seja um Autor</a>
        <a href="">Fazemos código front-end</a>
    </nav>

    <p class="tb-for-community">
        Escrito pela e para a comunidade web brasileira. <a href="">Ajude</a>.
    </p>
    </div>
</footer>
<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>


<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
<script>
$(document).ready(function() {
  $('pre').each(function(i, block) {
    hljs.highlightBlock(block);
  });
})</script>


</body>
</html>

