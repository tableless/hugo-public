<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Desenvolvimento on Tableless</title>
    <link>https://tableless.github.io/hugo-public/tags/desenvolvimento/index.xml</link>
    <description>Recent content in Desenvolvimento on Tableless</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>pt-br</language>
    <atom:link href="https://tableless.github.io/hugo-public/tags/desenvolvimento/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>C√≥digo Limpo ‚Äì Escreva seu c√≥digo hoje sem esquecer da manuten√ß√£o de amanh√£</title>
      <link>https://tableless.github.io/hugo-public/codigo-limpo-escreva-seu-codigo-hoje-sem-esquecer-da-manutencao-de-amanha/</link>
      <pubDate>Fri, 13 Jan 2017 00:00:00 +0000</pubDate>
      
      <guid>https://tableless.github.io/hugo-public/codigo-limpo-escreva-seu-codigo-hoje-sem-esquecer-da-manutencao-de-amanha/</guid>
      <description>

&lt;p&gt;Voc√™ provavelmente j√° precisou entender o c√≥digo de outra pessoa. Seja para realizar uma altera√ß√£o, corrigir um &lt;em&gt;bug&lt;/em&gt; ou at√© mesmo para procurar um comportamento espec√≠fico.&lt;/p&gt;

&lt;p&gt;Talvez voc√™ at√© tenha feito isso no seu pr√≥prio c√≥digo!&lt;/p&gt;

&lt;p&gt;Agora pense por alguns segundos: O c√≥digo foi &lt;strong&gt;f√°cil&lt;/strong&gt; de entender?&lt;/p&gt;

&lt;p&gt;Voc√™, &lt;strong&gt;s√≥ pela leitura&lt;/strong&gt;, conseguiu identificar o m√©todo exato que precisava alterar?&lt;/p&gt;

&lt;p&gt;Se a resposta for positiva: √≥timo! O programador fez a sua parte e conseguiu deixar o c√≥digo limpo (ou pelo menos fez um c√≥digo simples o suficiente para ser entendido).&lt;/p&gt;

&lt;p&gt;Mas se a resposta for &amp;#8220;mais ou menos&amp;#8221;, ou &amp;#8220;nem um pouco&amp;#8221;, √© a√≠ que mora o problema.&lt;/p&gt;

&lt;p&gt;E essa √© a explica√ß√£o para o t√≠tulo deste post.&lt;/p&gt;

&lt;h2 id=&#34;mas-por-que-isso-acontece&#34;&gt;Mas por que isso acontece?&lt;/h2&gt;

&lt;p&gt;Quando aprendemos a programar, estamos mais preocupados em aprender a l√≥gica de programa√ß√£o e fazer as coisas funcionarem do que com a estrutura e leitura do c√≥digo. E isso √© totalmente normal, afinal, estamos iniciando.&lt;/p&gt;

&lt;p&gt;Por√©m, na minha opini√£o, o problema come√ßa quando evolu√≠mos em nossa carreira (come√ßamos a trabalhar em projetos maiores e ter mais responsabilidades) e &lt;strong&gt;n√£o evolu√≠mos o nosso c√≥digo na mesma medida&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;A√≠ come√ßam a aparecer os famosos &amp;#8220;c√≥digos espaguete&amp;#8221; ou mesmo aquele monte de vari√°veis que n√£o ajudam em nada a entender o c√≥digo.&lt;/p&gt;

&lt;p&gt;Leia o c√≥digo abaixo e responda:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Consegue identificar qual m√©todo voc√™ precisa chamar primeiro pra cadastrar um novo cliente?&lt;/li&gt;
&lt;li&gt;Percebe como os m√©todos est√£o sem ordem nenhuma e um chama o outro internamente, formando um &amp;#8220;espaguete&amp;#8221;?&lt;/li&gt;
&lt;/ul&gt;

&lt;pre class=&#34;lang-php&#34;&gt;class CadastroCliente
{
    public function enviarEmail()
    {
        $mailer = new Mailer();
        $mailer-&amp;gt;send();
    } 
    
    public function gerarSenha()
    {
        // codigo para gerar senha
        
        return $senha;
    }
    
    public function atualizar($cliente)
    {
        $model = new ClienteModel();
        $model-&amp;gt;confirmar($cliente);
    }

    public function criar($cliente)
    {
        $senha = $this-&amp;gt;gerarSenha();
        
        $model = new ClienteModel();
        $model-&amp;gt;add($cliente, $senha);

        $this-&amp;gt;enviarEmail();
    }
    
    public function confirmarCadastro($cliente)
    {
        $this-&amp;gt;enviarEmail();
        $this-&amp;gt;atualizar($cliente);
    }
}
&lt;/pre&gt;

&lt;p&gt;O problema dessa evolu√ß√£o tardia √© que somente depois de muito tempo o desenvolvedor vai descobrir que poderia ter feito melhor. Note que come√ßar escrevendo c√≥digos confusos n√£o √© o problema, mas sim o tempo necess√°rio para entender que essa evolu√ß√£o √© importante.&lt;/p&gt;

&lt;p&gt;E ent√£o, ao perceber que o c√≥digo n√£o est√° dos melhores, o desenvolvedor pode escolher entre:&lt;/p&gt;

&lt;p&gt;1 &amp;#8211; Deixar pra l√°, por que o seu c√≥digo sempre funciona&lt;/p&gt;

&lt;p&gt;2 &amp;#8211; Come√ßar a melhorar o seu c√≥digo pensando na qualidade do software&lt;/p&gt;

&lt;h2 id=&#34;c√≥digo-funcionando-next&#34;&gt;C√≥digo funcionando! Next!&lt;/h2&gt;

&lt;p&gt;A sensa√ß√£o de ver nosso c√≥digo funcionando √© √≥tima! Quem n√£o gosta?&lt;/p&gt;

&lt;p&gt;S√≥ que muita gente para por a√≠, nem lembra que por tr√°s daquele comportamento existem classes, m√©todos, vari√°veis, etc.&lt;/p&gt;

&lt;p&gt;Mas ser√° que esse c√≥digo est√° leg√≠vel? As classes possuem responsabilidades definidas? Os m√©todos est√£o coerentes?&lt;/p&gt;

&lt;p&gt;Pois √©, existem v√°rios pontos que precisamos estar atentos para que nosso c√≥digo seja limpo.&lt;/p&gt;

&lt;p&gt;Mas apesar de parecer muito complicado, na verdade podemos come√ßar da forma mais simples poss√≠vel: comece aos poucos e v√° sempre buscando deix√°-lo mais leg√≠vel. N√£o tem como voc√™ fazer o melhor c√≥digo de primeira.&lt;/p&gt;

&lt;p&gt;Para exemplificar essa transforma√ß√£o de um c√≥digo dif√≠cil de ser lido em um c√≥digo limpo, veja o trecho abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;class Carrinho
{
    private $vl;
    private $prods;

    public function adic($prods)
    {
        foreach ($prods as $prod) {
            if ($prod-&amp;gt;getCat() == &#39;P&#39;) {
                $vl = $prod-&amp;gt;getVl() * 0.75;
                $this-&amp;gt;vl += $vl;
                $this-&amp;gt;prods[] = $prod;
            } elseif ($prod-&amp;gt;getCat() == &#39;B&#39;) {
                $vl = 0;
                $this-&amp;gt;vl += $vl;
                $this-&amp;gt;prods[] = $prod;
            } elseif ($prod-&amp;gt;getCat() == &#39;&#39;) {
                $vl = $prod-&amp;gt;getVl();
                $this-&amp;gt;vl += $vl;
                $this-&amp;gt;prods[] = $prod;
            }
        }
    } 
}
&lt;/pre&gt;

&lt;p&gt;Voc√™ consegue identificar o que s√£o aqueles valores (P e B) ou at√© mesmo entender rapidamente o que o m√©todo faz?&lt;/p&gt;

&lt;p&gt;Vamos deix√°-lo um pouco mais claro:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;class Carrinho
{
    private $valorTotal;
    private $produtos;

    public function adicionarProduto($produtos)
    {
        foreach ($produtos as $produto) {
            if ($produto-&amp;gt;getCategoria() == &#39;PROMOCAO&#39;) {
                $valor = $produto-&amp;gt;getValor() * 0.75;
                $this-&amp;gt;valorTotal += $valor;
                $this-&amp;gt;produtos[] = $produto;
            } elseif ($produto-&amp;gt;getCategoria() == &#39;BRINDE&#39;) {
                $valor = 0;
                $this-&amp;gt;valorTotal += $valor;
                $this-&amp;gt;produtos[] = $produto;
            } elseif ($produto-&amp;gt;getCategoria() == &#39;&#39;) {
                $valor = $produto-&amp;gt;getValor();
                $this-&amp;gt;valorTotal += $valor;
                $this-&amp;gt;produtos[] = $produto;
            }
        }
    } 
}
&lt;/pre&gt;

&lt;p&gt;Agora j√° d√° pra entender mais r√°pido o que o m√©todo faz: adicionar um produto no carrinho e acrescenta o valor do produto no valor total.&lt;/p&gt;

&lt;p&gt;Mas d√° pra melhorar ainda mais:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;class Carrinho
{
    private $valorTotal;
    private $produtos;

    public function adicionarProduto($produtos)
    {   
        foreach ($produtos as $produto) {
            $valor = $produto-&amp;gt;getValor();
            
            if ($produto-&amp;gt;getCategoria() == &#39;PROMOCAO&#39;) {
                $valor = $produto-&amp;gt;getValor() * 0.75;
            } elseif ($produto-&amp;gt;getCategoria() == &#39;BRINDE&#39;) {
                $valor = 0;
            }

            $this-&amp;gt;valorTotal += $valor;
            $this-&amp;gt;produtos[] = $produto;
        }
    } 
}
&lt;/pre&gt;

&lt;p&gt;Notou que as linhas que atualizam o valor total e os produtos internos da classe se repetiam a cada &lt;code&gt;if&lt;/code&gt;?&lt;/p&gt;

&lt;p&gt;J√° que se repetem, podemos tirar de dentro dos &lt;code&gt;ifs&lt;/code&gt;, pois ele sempre ser√° executado independente da condi√ß√£o.&lt;/p&gt;

&lt;p&gt;Al√©m disso, podemos inicializar a vari√°vel &lt;code&gt;$valor&lt;/code&gt; com o valor do produto, e de acordo com a categoria do produto atualizamos essa vari√°vel. Assim conseguimos eliminar a utiliza√ß√£o de um &lt;code&gt;if&lt;/code&gt; desnecess√°rio verificando se o produto n√£o tem categoria.&lt;/p&gt;

&lt;p&gt;Agora o toque final:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;class Carrinho
{
    private $valorTotal;
    private $produtos;

    public function adicionarProduto($produtos = [])
    {   
        foreach ($produtos as $produto) {
            $this-&amp;gt;valorTotal += $this-&amp;gt;calcularValorProduto($produto);
            $this-&amp;gt;produtos[] = $produto;
        }
    }

    private function calcularValorProduto(Produto $produto)
    {
        if ($produto-&amp;gt;getCategoria() == Produto::CATEGORIA_BRINDE) {
            return 0;
        }

        if ($produto-&amp;gt;getCategoria() == Produto::CATEGORIA_PROMOCAO) {
            return $produto-&amp;gt;getValor() * 0.75;
        }

        return $produto-&amp;gt;getValor();
    }
}
&lt;/pre&gt;

&lt;p&gt;Pronto, o c√≥digo agora ficou mais simples e os m√©todos com uma √∫nicaresponsabilidade definida.&lt;/p&gt;

&lt;p&gt;Veja as altera√ß√µes realizadas:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Agora o c√°lculo do valor fica em um m√©todo privado da classe, para n√£o ficar tudo no m√©todo &lt;code&gt;adicionarProduto&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Foi adicionado um &lt;em&gt;Type Hint&lt;/em&gt; no m√©todo &lt;code&gt;calcularValorProduto&lt;/code&gt; para garantir que a vari√°vel &lt;code&gt;$produto&lt;/code&gt; seja um objeto da classe &lt;code&gt;Produto&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;No m√©todo de c√°lculo, trocamos o &lt;code&gt;elseif&lt;/code&gt; por dois &lt;code&gt;ifs&lt;/code&gt; separados: isso facilita a separa√ß√£o por blocos de c√≥digo, e consequentemente a leitura&lt;/li&gt;
&lt;li&gt;Ainda no m√©todo de c√°lculo, ao inv√©s de inicializar a vari√°vel &lt;code&gt;$valor&lt;/code&gt; com o valor do produto, foram adicionados &lt;code&gt;returns&lt;/code&gt; em cada condi√ß√£o: isso possibilita o m√©todo retornar o valor mais rapidamente, j√° que n√£o √© mais necess√°rio executar o m√©todo inteiro&lt;/li&gt;
&lt;li&gt;Foram trocados os valores fixos das categorias por constantes da classe &lt;code&gt;Produto&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Objetivo alcan√ßado: conseguimos deixar o c√≥digo mais descritivo, separar os m√©todos e manter o mesmo funcionamento. E o mais importante: tudo isso foi feito de forma incremental.&lt;/p&gt;

&lt;p&gt;Talvez depois de um tempo outras melhorias possam sem aplicadas, mas o c√≥digo j√° melhorou o suficiente por enquanto.&lt;/p&gt;

&lt;p&gt;Ali√°s, isso √© o que todos n√≥s dever√≠amos fazer: ao inv√©s de voc√™ tentar abra√ßar o mundo e deixar seu c√≥digo perfeito, tente deix√°-lo o mais simples poss√≠vel (e que atenda os requisitos, claro), e v√° aperfei√ßoando com o tempo.&lt;/p&gt;

&lt;p&gt;At√© por que provavelmente voc√™ ter√° que realizar altera√ß√µes nele depois, e a√≠ voc√™ pode &amp;#8220;aparar as arestas&amp;#8221; e ir deixando cada vez melhor.&lt;/p&gt;

&lt;p&gt;S√≥ n√£o deixe seu c√≥digo para tr√°s sem revis√°-lo antes, isso com certeza vai deixar altera√ß√µes futuras muito mais custosas de serem feitas.&lt;/p&gt;

&lt;h2 id=&#34;certo-mas-e-se-o-prazo-estiver-apertado&#34;&gt;Certo, mas e se o prazo estiver apertado?&lt;/h2&gt;

&lt;p&gt;No ciclo de desenvolvimento de software, sempre existem os casos em que o prazo √© bem apertado.&lt;/p&gt;

&lt;p&gt;Apesar de entender que precisamos de tempo suficiente para sempre testar nosso c√≥digo e escrev√™-lo bem, algumas vezes realmente n√£o h√° sa√≠da: precisamos entregar e ponto.&lt;/p&gt;

&lt;p&gt;Nestes casos, precisamos sempre colocar na balan√ßa se vale a pena gastar mais tempo para projetar melhor a arquitetura, testar todas as nossas classes e revisar o c√≥digo.&lt;/p&gt;

&lt;p&gt;O que n√£o pode acontecer √© utilizar estes argumentos como desculpas para n√£o entregar a solu√ß√£o.&lt;/p&gt;

&lt;p&gt;Se h√° espa√ßo para refinar o c√≥digo e test√°-lo, ent√£o eu recomendo que fa√ßa. Voc√™ vai agradecer um dia por ter feito isso.&lt;/p&gt;

&lt;p&gt;Caso a entrega seja de muita urg√™ncia, desenvolva de uma forma que conseguir√° entregar no prazo. Mas tamb√©m n√£o use isso como desculpa para escrever qualquer c√≥digo!&lt;/p&gt;

&lt;p&gt;Fique atento a boas pr√°ticas durante o desenvolvimento acelerado, seja nomeando suas vari√°veis e m√©todos melhor, quebrando os comportamento em classes menores, etc.&lt;/p&gt;

&lt;p&gt;Observe uma altera√ß√£o pequena usando o exemplo anterior, mas que vai ajudar a tornar o c√≥digo muito mais simples:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;class Carrinho
{
    private $vl;
    private $prods;

    // Adiciona um produto no carrinho
    // Passar um array de produtos
    public function adic($prods)
    {
        foreach ($prods as $prod) {
            // Categoria do produto -&amp;gt; P = Promocao
            if ($prod-&amp;gt;getCat() == &#39;P&#39;) {
                $vl = $prod-&amp;gt;getVl() * 0.75;
                $this-&amp;gt;vl += $vl;
                $this-&amp;gt;prods[] = $prod;
                
            // Categoria do produto -&amp;gt; B = Brinde
            } elseif ($prod-&amp;gt;getCat() == &#39;B&#39;) {
                $vl = 0;
                $this-&amp;gt;vl += $vl;
                $this-&amp;gt;prods[] = $prod;
            
            // Sem categoria, utilizar o valor do produto
            } elseif ($prod-&amp;gt;getCat() == &#39;&#39;) {
                $vl = $prod-&amp;gt;getVl();
                $this-&amp;gt;vl += $vl;
                $this-&amp;gt;prods[] = $prod;
            }
        }
    } 
}
&lt;/pre&gt;

&lt;p&gt;Voc√™ acha que esses coment√°rios s√£o importantes para o c√≥digo? E se um dia algum outro desenvolvedor alterar as siglas das categorias, voc√™ acha que os coment√°rios ser√£o atualizados?&lt;/p&gt;

&lt;p&gt;E se ao inv√©s de adicionar coment√°rios, voc√™ deixasse expl√≠cito o que cada vari√°vel e m√©todo faz por meio do nome deles?&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;class Carrinho
{
    private $valorTotal;
    private $produtos;

    public function adicionarProduto($produtos)
    {
        foreach ($produtos as $produto) {
            if ($produto-&amp;gt;getCategoria() == &#39;PROMOCAO&#39;) {
                $valor = $produto-&amp;gt;getValor() * 0.75;
                $this-&amp;gt;valorTotal += $valor;
                $this-&amp;gt;produtos[] = $produto;
            } elseif ($produto-&amp;gt;getCategoria() == &#39;BRINDE&#39;) {
                $valor = 0;
                $this-&amp;gt;valorTotal += $valor;
                $this-&amp;gt;produtos[] = $produto;
            } elseif ($produto-&amp;gt;getCategoria() == &#39;&#39;) {
                $valor = $produto-&amp;gt;getValor();
                $this-&amp;gt;valorTotal += $valor;
                $this-&amp;gt;produtos[] = $produto;
            }
        }
    } 
}
&lt;/pre&gt;

&lt;p&gt;Veja que todos os coment√°rios foram removidos. Ao inv√©s de escrever o comportamento da classe nos coment√°rios, os m√©todos e vari√°veis j√° dizem o que fazem e para o que servem.&lt;/p&gt;

&lt;p&gt;Por isso, por mais que o prazo seja apertado, sempre h√° um jeito de deixar o c√≥digo mais limpo.&lt;/p&gt;

&lt;p&gt;S√≥ n√£o deixe de entregar o seu trabalho no prazo tentando fazer o c√≥digo perfeito, isso talvez n√£o valha tanto a pena no final.&lt;/p&gt;

&lt;h2 id=&#34;conclus√£o&#34;&gt;Conclus√£o&lt;/h2&gt;

&lt;p&gt;Voc√™ provavelmente percebeu o valor de escrever c√≥digo limpo.&lt;/p&gt;

&lt;p&gt;Isso no longo prazo faz uma enorme diferen√ßa, e √© uma responsabilidade que todos n√≥s programadores precisamos estar cientes. N√£o basta apenas escrever c√≥digo, voc√™ tem que sempre pensar que outras pessoas tamb√©m ir√£o trabalhar nele.&lt;/p&gt;

&lt;p&gt;Por isso sempre procure aperfei√ßoar suas habilidades n√£o s√≥ para aprender outras linguagens, mas para melhorar o seu c√≥digo em si, independente da linguagem que voc√™ trabalhe.&lt;/p&gt;

&lt;p&gt;E se voc√™ quer aprender como escrever c√≥digo limpo, existem alguns livros que ir√£o explicar os principais conceitos e t√©cnicas.&lt;/p&gt;

&lt;p&gt;Um deles que eu recomendo √© o &lt;a href=&#34;https://www.amazon.com.br/C%C3%B3digo-Limpo-Habilidades-Pr%C3%A1ticas-Softwar/dp/8576082675/ref=sr_1_1?ie=UTF8&amp;qid=1467162877&amp;sr=8-1&amp;keywords=c%C3%B3digo+limpo&#34; target=&#34;_blank&#34;&gt;C√≥digo Limpo, do Robert C. Martin (Uncle Bob)&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Al√©m disso, existem algumas pr√°ticas para auxiliar no projeto de classes e na implementa√ß√£o dos m√©todos, como &lt;em&gt;SOLID&lt;/em&gt; e &lt;em&gt;Object Calisthenics&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Por fim, esta √© a minha vis√£o sobre qualidade de c√≥digo, se voc√™ tiver outro ponto de vista ou algum complemento, escreva nos coment√°rios!&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Proteja seu c√≥digo usando o Webpack</title>
      <link>https://tableless.github.io/hugo-public/proteja-seu-codigo-usando-o-webpack/</link>
      <pubDate>Mon, 28 Nov 2016 00:00:00 +0000</pubDate>
      
      <guid>https://tableless.github.io/hugo-public/proteja-seu-codigo-usando-o-webpack/</guid>
      <description>

&lt;p&gt;N√£o √© um eufemismo dizer que que as ferramentas de front-end avan√ßam rapidamente. Por um tempo, &lt;a href=&#34;http://gruntjs.com/&#34; target=&#34;_blank&#34;&gt;Grunt&lt;/a&gt; foi o principal automatizador. E desde ent√£o a comunidade adotou o &lt;a href=&#34;http://gulpjs.com/&#34; target=&#34;_blank&#34;&gt;Gulp&lt;/a&gt;, uma alternativa de streaming. Embora essas ferramentas sejam √≥timas, voc√™ ainda precisar√° trabalhar dura para manter o seu sistema. E √© a√≠ que entram os empacotadores como o &lt;a href=&#34;http://browserify.org/&#34; target=&#34;_blank&#34;&gt;Browserify&lt;/a&gt; e &lt;a href=&#34;https://webpack.github.io/&#34; target=&#34;_blank&#34;&gt;Webpack&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;como-usar-um-empacotador&#34;&gt;Como usar um empacotador&lt;/h2&gt;

&lt;p&gt;Os empacotadores resolvem o problema fundamental no desenvolvimento front-end. Eles permitem que voc√™ transforme assets arbitr√°rios em algo que possa ser consumido por um navegador. Se voc√™ est√° usando NPM, e deveria, voc√™ pode empacotar todos esses pacotes que est√° utilizando em seu aplicativo para poder us√°-los no navegador. Mas h√° a possibilidade de voc√™ querer fazer muitas outras coisas al√©m de empacotar, ent√£o voc√™ vai entrela√ßar isso com alguma ferramenta de automa√ß√£o como o Grunt ou Gulp. Voc√™ pode at√© ignorar um task runner e implementar suas tarefas por meio da se√ß√£o de &lt;strong&gt;scripts&lt;/strong&gt; &lt;code&gt;package.json&lt;/code&gt; (se estiver usando NPM) para configurar as transforma√ß√µes do Browserify.&lt;/p&gt;

&lt;h2 id=&#34;conhecendo-o-webpack&#34;&gt;Conhecendo o Webpack&lt;/h2&gt;

&lt;p&gt;Voc√™ pode alcan√ßar resultados similares tanto com o Browserify quanto o Webpack. O Browserify est√° mais pr√≥ximo da filosofia Unix. Ao us√°-lo voc√™ est√° literalmente colando pequenos utilit√°rios juntos. Como resultado, o Browserify √© f√°cil de conseguir. Mas se voc√™ tem uma lista longa de transforma√ß√µes que deseja aplicar em seu c√≥digo √© melhor utilizar um task runner como Grunt ou Gulp para automatizar esse processo.&lt;/p&gt;

&lt;p&gt;Por outro lado, se voc√™ usa Webpack pode nem precisar do Grunt ou Gulp. O Webpack presume que existem certas tarefas que voc√™ sempre deseja executar. √â claro que voc√™ deseja mover os arquivos de uma pasta de origem para um diret√≥rio de compila√ß√£o. Claro que voc√™ vai querer completar seu c√≥digo fonte usando uma (geralmente longa) lista de transforma√ß√µes (ali√°s, elas s√£o chamadas de &lt;strong&gt;loaders&lt;/strong&gt;, ou carregadores, no Webpack). √â claro que voc√™ quer usar bibliotecas em diferentes formatos de m√≥dulo como CoomonJS, RequireJS ou os novos m√≥dulos ES6 se desejar.&lt;/p&gt;

&lt;p&gt;Voc√™ pode at√© desejar lidar com diferentes formatos de arquivos. Para lhe dar um exemplo melhor do que isso significa na pr√°tica, considere os c√≥digos abaixo:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;style.css&lt;/strong&gt;&lt;/p&gt;

&lt;pre class=&#34;lang-css&#34;&gt;body {
    font-family: sans-serif;
}
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;index.js&lt;/strong&gt;&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;// load style to the resulting bundle
require(&#39;./style.css&#39;);

// just print hello, normally we would do
// something more involved and start the
// application here
console.log(&#39;hello world&#39;);&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;webpack.config.js&lt;/strong&gt;&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;var webpack = require(&#39;webpack&#39;);

    module.exports = {
    // this is the top level file or set of files
    entry: &#39;./index.js&#39;,
    // it will bundle everything inside this output path
    output: {
    path: __dirname,
    filename: &#39;bundle.js&#39;
},
module: {
loaders: [
{
    // 1. resolve @import and url() through css-loader
    // 2. load the result to bundle using style-loader
    // note that loaders are interpreted from right to left
    test: /.css$/, // A regexp to test the require path
    loaders: [&#39;style&#39;, &#39;css&#39;]
}
]
},
plugins: [
    // minify output
    new webpack.optimize.UglifyJsPlugin()
]
};&lt;/pre&gt;

&lt;p&gt;O Webpack permite que voc√™ carregue o CSS da mesma forma que carrega outros c√≥digos com &lt;a href=&#34;https://github.com/webpack/css-loader&#34; target=&#34;_blank&#34;&gt;css-loader&lt;/a&gt; e &lt;a href=&#34;https://github.com/webpack/style-loader&#34; target=&#34;_blank&#34;&gt;style-loader&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Por que voc√™ iria querer usar o require para o seu CSS em vez da mesma velha maneira que temos utilizado CSS? Bem, porque o Webpack √© inteligente o suficiente para concatenar seu CSS quando ele √© pequeno o bastante, caso contr√°rio ele ir√° minificar o arquivo e dar a ele um nome √∫nico para fins de cache. O mesmo pode ser feito com imagens utilizando o &lt;a href=&#34;https://github.com/webpack/url-loader&#34; target=&#34;_blank&#34;&gt;url-loader&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Se voc√™ executou o Webpack contra essa configura√ß√£o, voc√™ ir√° acabar com um &lt;code&gt;bundle.js&lt;/code&gt; minificado que cont√©m CSS inline. Pode parecer muito esfor√ßo para alcan√ßar um simples resultado como esse. Isso est√° al√©m do ponto. Considere o seguinte:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;E se voc√™ quisesse usar os novos recursos do Javascript em seu projeto? Voc√™ teria que configurar o &lt;a href=&#34;https://www.npmjs.com/package/babel-loader&#34; target=&#34;_blank&#34;&gt;babel-loader&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;E se voc√™ quisesse usar CSS compilado? Voc√™ precisaria configurar o &lt;a href=&#34;https://github.com/webpack/less-loader&#34; target=&#34;_blank&#34;&gt;less-loader&lt;/a&gt; ou o &lt;a href=&#34;https://github.com/jtangelder/sass-loader&#34; target=&#34;_blank&#34;&gt;sass-loader&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;E se voc√™ quisesse sourcemaps? Voc√™ teria que configurar a op√ß√£o &lt;a href=&#34;https://webpack.github.io/docs/configuration.html#devtool&#34; target=&#34;_blank&#34;&gt;devtool&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;E se voc√™ quisesse uma sa√≠da UMD para sua biblioteca? √â preciso configurar o &lt;a href=&#34;https://webpack.github.io/docs/configuration.html#output-librarytarget&#34; target=&#34;_blank&#34;&gt;output.libraryTarget&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;E se voc√™ quisesse um servidor de desenvolvimento &lt;em&gt;hot loading&lt;/em&gt;? Voc√™ precisaria configurar o &lt;a href=&#34;https://webpack.github.io/docs/webpack-dev-server.html&#34; target=&#34;_blank&#34;&gt;webpack-dev-server&lt;/a&gt; ou construir um sozinho baseado no Express, como mostrado no &lt;a href=&#34;https://github.com/gaearon/react-transform-boilerplate&#34; target=&#34;_blank&#34;&gt;react-transform-boilerplate&lt;/a&gt;. O recurso de &lt;em&gt;hot loading&lt;/em&gt; separa Webpack conforme atualiza seu navegador automaticamente enquanto mant√©m o estado do aplicativo.&lt;/li&gt;
&lt;li&gt;E se voc√™ quisesse m√∫ltiplas metas (desenvolvimento, produ√ß√£o, teste)? Poderia usar uma solu√ß√£o como a &lt;a href=&#34;https://www.npmjs.com/package/webpack-merge&#34; target=&#34;_blank&#34;&gt;webpack-merge&lt;/a&gt; e conectar seu automatizador de tarefas com ela.&lt;/li&gt;
&lt;li&gt;E se voc√™ quisesse carregar algumas depend√™ncias lentamente? Voc√™ precisaria configurar o &lt;a href=&#34;https://webpack.github.io/docs/code-splitting.html#require-ensure&#34; target=&#34;_blank&#34;&gt;require.ensure&lt;/a&gt;. O Webpack ir√° gerar pacotes separados para dividir os pontos e carreg√°-los sob demanda.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Basicamente, voc√™ pode desenvolver as configura√ß√µes para v√°rias dire√ß√µes baseado em suas necessidades. H√° definitivamente uma curva de aprendizado e leva um tempo para entender todas as op√ß√µes. Dito isso, a abordagem √© poderosa uma vez que voc√™ entende.&lt;/p&gt;

&lt;h2 id=&#34;conectando-o-webpack-com-jscrambler&#34;&gt;Conectando o Webpack com Jscrambler&lt;/h2&gt;

&lt;p&gt;Se voc√™ quiser adicionar o Jscrambler para o seu processo de desenvolvimento e estiver usando o Webpack, n√≥s temos uma boa not√≠cia para voc√™! O &lt;a href=&#34;https://github.com/jscrambler/jscrambler-loader&#34; target=&#34;_blank&#34;&gt;jscrambler-loader&lt;/a&gt; est√° dispon√≠vel e √© realmente f√°cil de configurar assim como a maioria dos loaders do Webpack.&lt;/p&gt;

&lt;p&gt;N√≥s vamos lhe mostrar o quanto essa configura√ß√£o √© f√°cil utilizando o exemplo abaixo e adicionando o &lt;a href=&#34;https://github.com/jscrambler/jscrambler-loader&#34; target=&#34;_blank&#34;&gt;jscrambler-loader&lt;/a&gt; em nosso processo. Tamb√©m vamos remover o &lt;strong&gt;UglifyJsPlugin&lt;/strong&gt;, j√° que o &lt;strong&gt;Jscrambler&lt;/strong&gt; pode desempenhar essa mesma fun√ß√£o.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;webpack.config.js&lt;/strong&gt;&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;var webpack = require(&#39;webpack&#39;);

    module.exports = {
    // this is the top level file or set of files
    entry: &#39;./index.js&#39;,
    // it will bundle everything inside this output path
    output: {
    path: __dirname,
    filename: &#39;bundle.js&#39;
},
module: {
loaders: [
{
    // 1. resolve @import and url() through css-loader
    // 2. load the result to bundle using style-loader
    // note that loaders are interpreted from right to left
    test: /.css$/, // A regexp to test the require path
    loaders: [&#39;style&#39;, &#39;css&#39;]
},
{
    test: /.js$/,
    exclude: /node_modules/,
    loader: &#39;jscrambler-loader&#39;
}
]
}
};&lt;/pre&gt;

&lt;p&gt;Voc√™ tamb√©m ir√° precisar criar um arquivo chamado &lt;strong&gt;.jscramblerrc&lt;/strong&gt; com suas credenciais da API.&lt;/p&gt;

&lt;p&gt;Voc√™ ir√° encontrar elas no painel de controlo da sua conta Jscrambler.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;.jscramblerrc&lt;/strong&gt;&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;{
    &#34;keys&#34;: {
    &#34;accessKey&#34;: &#34;XXXXXX&#34;,
    &#34;secretKey&#34;: &#34;XXXXXX&#34;
},
&#34;params&#34;: {
    &#34;self_defending&#34;: &#34;%DEFAULT%&#34;
    // there is a big set of transformations that you can use
    // check https://jscrambler.com/en/help/javascript_obfuscation
}
}&lt;/pre&gt;

&lt;p&gt;Pronto! Voc√™ est√° pronto para depurar o seu c√≥digo protegido!&lt;/p&gt;

&lt;p&gt;H√° v√°rias outras formas de conectar o Jscrambler com o seu sistema. Isso depende do seu task runner. Eu reuni as poss√≠veis abordagens abaixo:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Grunt &amp;#8211; &lt;a href=&#34;https://www.npmjs.com/package/grunt-jscrambler&#34; target=&#34;_blank&#34;&gt;grunt-jscrambler&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Gulp &amp;#8211; &lt;a href=&#34;https://www.npmjs.com/package/gulp-jscrambler&#34; target=&#34;_blank&#34;&gt;gulp-jscrambler&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;package.json&lt;/em&gt; &amp;#8211; &lt;a href=&#34;https://www.npmjs.com/package/jscrambler&#34; target=&#34;_blank&#34;&gt;Jscrambler CLI tool&lt;/a&gt;. Para isso funcionar, crie um &lt;em&gt;script&lt;/em&gt; separado e depois passe sua vers√£o minificada do Webpack atrav√©s dele. √â prefer√≠vel manter uma vers√£o local da ferramenta Jscrambler CLI (&lt;code&gt;npm i jscrambler --save-dev&lt;/code&gt;) dentro de seu projeto para que tudo funcione independentemente do ambiente.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;O Jscrambler tem um conjunto de ferramentas para proteger seu c√≥digo (ofusca√ß√£o + armadilhas no c√≥digo + servi√ßo de autoprote√ß√£o de aplicativo, ou RASP em ingl√™s), fazendo com que a engenharia reversa fique significantemente dif√≠cil, mas tamb√©m tem alguns recursos de otimiza√ß√£o de c√≥digo para voc√™ tirar vantagem. Voc√™ pode at√© us√°-lo para minifica√ß√£o ou compress√£o.&lt;/p&gt;

&lt;p&gt;Saiba mais sobre o Jscrambler em &lt;a href=&#34;https://jscrambler.com?utm_medium=social&amp;utm_source=tableless&#34; target=&#34;_blank&#34;&gt;jscrambler.com&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;conclus√£o&#34;&gt;Conclus√£o&lt;/h2&gt;

&lt;p&gt;Ainda que o Webpack n√£o seja a ferramenta mais f√°cil de aprender, eu recomendo que voc√™ d√™ uma olhada nela. O livro &lt;a href=&#34;http://survivejs.com/&#34; target=&#34;_blank&#34;&gt;SurviveJS &amp;#8211; Webpack and React&lt;/a&gt;, que est√° em ingl√™s, fala sobre essa ferramenta com mais detalhes. A maioria dos conte√∫dos est√° dispon√≠vel gratuitamente e ir√° lhe ajudar a entender o Webpack e React a um n√≠vel mais profundo.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Migrando de enterprise dev para startup dev</title>
      <link>https://tableless.github.io/hugo-public/migrando-de-enterprise-dev-para-startup-dev/</link>
      <pubDate>Sun, 11 Sep 2016 00:00:00 +0000</pubDate>
      
      <guid>https://tableless.github.io/hugo-public/migrando-de-enterprise-dev-para-startup-dev/</guid>
      <description>&lt;p&gt;Comecei minha carreira na √°rea de desenvolvimento de software razoavelmente cedo, aos 16 anos estudava no ensino m√©dio pela manh√£, estagiava √† tarde e estudava no curso t√©cnico √† noite. Ao contr√°rio de muitos desenvolvedores, meu primeiro contato com c√≥digo n√£o foi dos melhores, foram horas e horas de estudo pra conseguir entender &lt;sup&gt;1&lt;/sup&gt;&amp;frasl;&lt;sub&gt;3&lt;/sub&gt; do que o professor estava tentando ensinar, na √©poca ASP‚Ää‚Äî‚Ääsim, o ‚Äòcl√°ssico‚Äô.&lt;/p&gt;

&lt;p&gt;Agora, com 26 anos, posso fazer uma an√°lise interessante do que aconteceu nos √∫ltimos 10 anos de software e talvez essa reflex√£o sirva como norte pra quem est√° come√ßando ou pra quem est√° afim de fazer uma troca de ares.&lt;/p&gt;

&lt;p&gt;Come√ßando com algumas verdades:&lt;/p&gt;

&lt;p&gt;&lt;strong class=&#34;markup--strong markup--p-strong&#34;&gt;O mercado de trabalho em grandes empresas √© entediante&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Tive a oportunidade de trabalhar em multinacionais gigantes‚Ää‚Äî‚Ään√£o cabe cit√°-las aqui‚Ää‚Äî‚Ääe lembro que ao entrar em cada uma delas, a vontade de criar e ser o melhor profissional poss√≠vel sempre me acompanhava e a cada dia de trabalho essa mesma vontade ia se auto-destruindo por alguns motivos como: c√≥digo legado horr√≠vel, tecnologias do tempo do meu av√¥, pessoas com incr√≠vel m√° vontade, burocracias infinitas para coisas pequenas e por a√≠ vai.&lt;/p&gt;

&lt;p&gt;Boa parte da energia era sugada por todo e qualquer tipo de atividade, menos pela √∫nica coisa que eu realmente queria: criar algo com algum real valor.&lt;/p&gt;

&lt;p&gt;&lt;strong class=&#34;markup--strong markup--p-strong&#34;&gt;Trabalhar com tecnologia pode e deve ser legal&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Durante muito tempo questionei se eu realmente estava na √°rea certa, porque a minha satisfa√ß√£o profissional estava sempre abaixo do esperado. Criei diversos side projects, alguns relacionados com TI e outros n√£o, para prencheer essa lacuna da realiza√ß√£o.&lt;/p&gt;

&lt;p&gt;O que sempre me intrigava √© que ao chegar em casa e criar esses projetos, aprender novas linguagens, fazer um CLI pra ler tweets ou um bot in√∫til, parecia ser t√£o legal. Por que eu n√£o conseguia ter um suspiro parecido no meu ambiente profissional?&lt;/p&gt;

&lt;p&gt;&lt;strong class=&#34;markup--strong markup--p-strong&#34;&gt;Voc√™ pode se divertir com TI tamb√©m&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Certo dia resolvi chutar o balde, largar o emprego em uma dessas grandes multinacionais e ver no que dava.&lt;/p&gt;

&lt;p&gt;&lt;strong class=&#34;markup--strong markup--p-strong&#34;&gt;PS:&lt;/strong&gt; Anter de continuar, eu n√£o tenho filhos, nem grandes responsabilidades, n√£o v√° fazer o mesmo de forma inconsequente, n√£o √© essa a ideia¬†üòõ&lt;/p&gt;

&lt;p&gt;Dei sorte, fui parar em uma companhia com pessoas excepcionais e que estavam pilhadas na cria√ß√£o de um novo projeto. Eu nunca havia experimentado aquele tipo de dinamismo e vontade de fazer as coisas, parecia que eu estava cego esse tempo todo, que havia um mundo diferente na √°rea de TI e eu s√≥ havia enxergado agora.&lt;/p&gt;

&lt;p&gt;Atualmente, em uma outra companhia, encontrei o mesmo feeling e liberdade de cria√ß√£o, de poder usar boas pr√°ticas, de ter pessoas com vontade de fazer o melhor todo dia, sem aquele clima de vel√≥rio, com todo mundo reclamando do processo ou do lay-off que est√° por vir.&lt;/p&gt;

&lt;p&gt;&lt;strong class=&#34;markup--strong markup--p-strong&#34;&gt;Como voc√™ pode fazer esse shift?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Existem diversas maneiras de voc√™ se tornar um profissional mais atraente pro mercado, onde esses projetos bacanas est√£o sendo feitos. Abaixo algumas sugest√µes:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Aprenda coisas novas fora do ambiente de trabalho, n√£o se limite ao que voc√™ v√™ das 8 as 18, existe um mundo de paradigmas de programa√ß√£o, linguagens, design patterns, projetos open source, tipos de arquitetura que voc√™ pode aprender e tirar li√ß√µes.&lt;/li&gt;
&lt;li&gt;Crie side/pet projects para por em pr√°tica essas coisas que voc√™ aprende por conta pr√≥pria, √© a melhor maneira de assegurar que voc√™ realmente entendeu o que voc√™ aprendeu.&lt;/li&gt;
&lt;li&gt;Coloque esses projetos no &lt;a class=&#34;markup--anchor markup--li-anchor&#34; href=&#34;https://github.com/&#34; target=&#34;_blank&#34; rel=&#34;nofollow&#34;&gt;&lt;a href=&#34;https://github.com/&#34;&gt;https://github.com/&lt;/a&gt;&lt;/a&gt;, o mesmo pode servir de ‚Äòportfolio‚Äô para voc√™ em algum processo seletivo.&lt;/li&gt;
&lt;li&gt;Participe de algum &lt;a class=&#34;markup--anchor markup--li-anchor&#34; href=&#34;https://www.meetup.com/&#34; target=&#34;_blank&#34; rel=&#34;nofollow&#34;&gt;&lt;a href=&#34;https://www.meetup.com/&#34;&gt;https://www.meetup.com/&lt;/a&gt;&lt;/a&gt; de tecnologia, existem centenas acontecendo pelo Brasil e √© uma √≥tima oportunidade de conhecer pessoas que est√£o em outros lugares e que podem te ajudar a conseguir uma nova oportunidade.&lt;/li&gt;
&lt;li&gt;Te inscreve em algum dos milhares de cursos onlines (Udemy, Pluralsight, Code Academy, Udacity, Tree House, etc) e fa√ßa um at√© o final.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Por fim, apenas um esclarecimento: eu conheci pessoas muito bacanas e excelentes profissionais nessas grandes empresas que passei tamb√©m e sim, √© poss√≠vel ser feliz trabalhando nesses lugares, tudo depende do seu perfil. Se voc√™ √© mais da pilha de inova√ß√£o/cria√ß√£o de projetos, minhas sugest√µes talvez fa√ßam mais sentido.&lt;/p&gt;

&lt;p&gt;Ah, e n√£o estou considerando ‚Äòenterprise‚Äô empresas como Google, Facebook e/ou qualquer outra que mesmo sendo grande tenha em sua cultura uma vibe diferente em rela√ß√£o aos projetos/times.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>A arquitetura Redux usando Jails</title>
      <link>https://tableless.github.io/hugo-public/arquitetura-redux-usando-jails/</link>
      <pubDate>Mon, 18 Apr 2016 00:00:00 +0000</pubDate>
      
      <guid>https://tableless.github.io/hugo-public/arquitetura-redux-usando-jails/</guid>
      <description>

&lt;p&gt;Ultimamente tenho me preocupado mais com arquiteturas no front-end do que propriamente com as implementa√ß√µes de alguns frameworks. Isso porque eu acho que realmente nos falta um pouco mais de conhecimento sist√™mico, mais arquitetural, porque os problemas s√≥ est√£o crescendo e percebi que pelo menos eu n√£o estava acompanhando devidamente a complexidade das aplica√ß√µes desenvolvidas em Javascript.&lt;/p&gt;

&lt;h2 id=&#34;uma-pequena-reflex√£o&#34;&gt;Uma pequena reflex√£o&lt;/h2&gt;

&lt;p&gt;Os frameworks acabaram aparecendo nos √∫ltimos tempos e percebo que tiveram uma import√¢ncia muito maior do que o nosso amadurecimento quanto aos novos desafios nas aplica√ß√µes web, especificamente na linguagem Javascript. Percebo por coment√°rios de colegas que em entrevistas a preocupa√ß√£o com o conhecimento em determinados frameworks √© maior do que a preocupa√ß√£o com o pensamento abstrato do programador Javascript.&lt;/p&gt;

&lt;p&gt;Eu acabei escrevendo um micro-framework, j√° postei ele aqui, o &lt;strong&gt;&lt;a href=&#34;http://tableless.com.br/jails-o-framework-e-arquitetura-javascript/&#34; target=&#34;_blank&#34;&gt;Jails&lt;/a&gt;&lt;/strong&gt;. Que nada mais¬†√© do que uma¬†aplica√ß√£o de um conceito de relacionamento entre as partes, uma micro-arquitetura baseada em eventos, com alguns padr√µes, bem simples. Ao inv√©s de vir de f√°brica lotada de features, ela apenas resolve o problema b√°sico de &lt;strong&gt;organiza√ß√£o.&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&#34;o-problema-principal-e-o-secund√°rio&#34;&gt;O Problema principal e o secund√°rio&lt;/h2&gt;

&lt;p&gt;O¬†&lt;strong&gt;Jails&lt;/strong&gt; n√£o resolve¬†todos os problemas, ali√°s, n√£o deve e se devesse, n√£o conseguiria.¬†Eu particularmente acredito¬†que quanto mais simples uma solu√ß√£o for, mais &amp;#8220;composable&amp;#8221; ela vai ser, e se possui componentes que podem ser compostos, sua aplica√ß√£o tende a ser mais simples e mais otimizada para o seu problema inicial.&lt;/p&gt;

&lt;p&gt;Menos tempo tamb√©m se perde com manuten√ß√£o de solu√ß√µes que n√£o estavam no escopo inicial. Aqui entra o¬†velho conceito de divis√£o e conquista, para um problema complexo, o mais inteligente a se fazer √© resolv√™-lo quebrando-o em partes menores. O Jails melhorou bastante a organiza√ß√£o e a forma de abstrair as coisas para mim¬†sobretudo na reutiliza√ß√£o do c√≥digo, eram estes os problemas iniciais.&lt;/p&gt;

&lt;p&gt;Existe por√©m um problema secund√°rio, como manter a previsibilidade dos estados de uma aplica√ß√£o? Um exemplo, o usu√°rio¬†escolhe uma op√ß√£o em um dropdown, outro componente¬†precisa ser atualizado de acordo com esta op√ß√£o, em conjunto, um terceiro componente precisa atualizar o texto, e um quarto componente¬†deve mostrar na UI algo que tem rela√ß√£o com a escolha feita no primeiro componente, e todos eles est√£o de forma espalhada na tela, n√£o s√£o portanto um conjunto de um mesmo m√≥dulo.&lt;/p&gt;

&lt;p&gt;Quer dizer ent√£o que o Jails n√£o resolve este problema? Claro que n√£o, e isto n√£o significa que √© um problema sem solu√ß√£o. Com framework ou sem voc√™ vai resolver esse problema. A quest√£o aqui n√£o √© apenas resolv√™-lo, √© como solucionar de maneira¬†&lt;strong&gt;elegante&lt;/strong&gt;, usando¬†uma forma¬†que n√£o comprometa a sanidade do seu c√≥digo. Isso te ajuda¬†diretamente na manuten√ß√£o e consequentemente a ser mais √°gil quando tiver que fazer altera√ß√µes ou mesmo criar novas features.&lt;/p&gt;

&lt;h2 id=&#34;redux-a-predictable-state-container&#34;&gt;Redux, a predictable state container&lt;/h2&gt;

&lt;p&gt;Aqui entra um dos conceitos mais interessantes que vi nestes √∫timos tempos, n√£o me parece ter recebido tanta aten√ß√£o quanto deveria, mais √© genial, pelo menos para mim. Bom, como o t√≠tulo sugere, ele √© basicamente um container de estados para sua a aplica√ß√£o, ele simplifica a arquitetura Flux, adiciona para n√≥s alguns conceitos como reducers, imutabilidade¬†e¬†fun√ß√µes puras.&lt;/p&gt;

&lt;p&gt;A id√©ia geral dele √©, que voc√™ tenha apenas uma¬†&lt;strong&gt;Store¬†&lt;/strong&gt;que mant√™m todos os estados¬†da sua aplica√ß√£o, e para cada a√ß√£o do usu√°rio voc√™ deve disparar uma &amp;#8220;action&amp;#8221; para esta store que por sua vez vai atualizar os estados e te notificar que esta atualiza√ß√£o finalizou, assim, ao ser notificado voc√™ resgata estes estados que s√£o read-only e atualiza seus componentes. As mudan√ßas nestes estados devem ser feitas apenas usando fun√ß√µes puras chamadas de &amp;#8220;reducers&amp;#8221;.&lt;/p&gt;

&lt;p&gt;H√° um tempo atr√°s, quando ainda estava desenvolvendo o Jails, eu j√° havia notado que em alguns casos seria interessante manter os estados da aplica√ß√£o em um objeto, fazendo estas altera√ß√µes neste objeto usando m√©todos de array como filters, map, reduce para listas, e posteriormente atualizado a view usando um¬†template engine, mustache por exemplo. Uma prova disso √© que hoje, as apps e as controllers do Jails compartilham um objeto &lt;strong&gt;data&lt;/strong&gt; entre eles com¬†esta finalidade.&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;import &#39;components/view&#39;
import jails from &#39;jails&#39;
jails.app(&#39;app&#39;, function(html, data){
    this.init = ()=&amp;gt;{
        let view = this.x(&#39;[data-component*=view]&#39;)
        view(&#39;render&#39;, data)
    }
})
&lt;/pre&gt;

&lt;p&gt;E foi desta forma que resolvia estes problemas de estado da aplica√ß√£o, mas que possui uma consequ√™ncia. N√£o era trivial saber quando ou quem havia alterado aquele objeto. √â o cl√°ssico problema da vari√°vel global, voc√™ n√£o consegue dizer com facilidade qual a√ß√£o foi respons√°vel por uma mudan√ßa.&lt;/p&gt;

&lt;p&gt;Outro problema √© que objetos n√£o s√£o fun√ß√µes, n√£o h√° callbacks. Voc√™ n√£o consegue dizer √† outros m√≥dulos que houve uma altera√ß√£o neste objeto. A√≠ voc√™ vai se sentir tentado a usar aquelas manobras de watch, observer, two-way binding ou seja l√° qual for o nome que d√™ para isso, para te alertar¬†quando o objeto √© alterado.&lt;/p&gt;

&lt;p&gt;Hoje j√° temos bastante informa√ß√£o sobre estas¬†t√©cnicas e sabemos que √© dif√≠cil verificar de forma recursiva se alguma propriedade do objeto alterou¬†e¬†n√£o √© perform√°tico.&lt;/p&gt;

&lt;p&gt;√â por isso que acho o Redux genial, ele utiliza alguns conceitos do paradigma funcional que resolve de maneira elegante este problema e tem esta id√©ia de preservar os estados da aplica√ß√£o em um objeto s√≥, que pra mim por dedu√ß√£o √© algo interessante a se fazer hoje em dia, al√©m disso¬†nos garante um m√≠nimo¬†previsibilidade. O Redux usa o conceito de fun√ß√µes puras para alterar os estados e estas fun√ß√µes por serem puras s√£o facilmente pass√≠veis de composi√ß√µes e tamb√©m s√£o previs√≠veis. E o melhor, n√£o est√° preso √† implementa√ß√£o do React, √© um padr√£o/arquitetura, um conceito que voc√™ pode usar &lt;strong&gt;ONDE VOC√ä QUISER&lt;/strong&gt;. Voc√™ prefere AngularJS? Ember? Js Vanil√£o? React? N√£o importa, e essa qualidade¬†para mim n√£o tem pre√ßo.&lt;/p&gt;

&lt;h2 id=&#34;n√£o-seja-um-rob√¥-pense-por-conta-pr√≥pria-8230&#34;&gt;N√£o seja um rob√¥, pense por conta pr√≥pria&amp;#8230;&lt;/h2&gt;

&lt;p&gt;J√° vi lutas ferrenhas sobre qual framework/solu√ß√£o usar, existem aquelas pessoas que¬†s√£o realmente evangelistas no sentido mais religioso, aprendem a usar alguma ferramenta e aquela √© a √∫nica que presta, a √∫nica que ir√° salvar √† todos&amp;#8230; Voc√™ j√° deve ter conhecido¬†alguns destes pregadores de tecnologias¬†certo? Bom, se eu pensasse da mesma forma, diria que deve seguir e usar o Redux em todas as suas aplica√ß√µes e seguir de forma &amp;#8220;strict&amp;#8221;, usando¬†EXATAMENTE como foi concebida.&lt;/p&gt;

&lt;p&gt;A experi√™ncia dos erros que cometi me diz o contr√°rio, n√£o h√° uma solu√ß√£o que seja √≥tima para todos os problemas, e √© a√≠ que entra o prop√≥sito do meu post, s√≥ agora posso esclarecer isso.&lt;/p&gt;

&lt;p&gt;Existem muitas outras fontes que ensinam de forma muito mais did√°tica sobre o Redux, screencasts do pr√≥prio desenvolvedor que concebeu este conceito e uma documenta√ß√£o completa no github. N√£o faz sentido repassar estas informa√ß√µes que j√° est√£o dispon√≠veis na web.&lt;/p&gt;

&lt;p&gt;Meu intuito √© passar um pouco do aprendizado e experi√™ncia que eu tive &lt;strong&gt;usando&lt;/strong&gt; e &lt;strong&gt;adaptando&lt;/strong&gt; o Redux. Talvez isso seja √∫til para voc√™ que trabalha com Backbone, Angular ou qualquer outro framework. Pense no seu projeto, pense nas pessoas que v√£o trabalhar nele, pense no qu√£o complexo ele √© ou vai ser. Use sua criatividade para adaptar algo no conceito quando ele est√° verboso demais, complexo demais ou quando n√£o serve exatamente da maneira como foi concebido,¬†o meu conselho √© que n√£o lute para fazer com que ele &amp;#8220;caiba&amp;#8221; no seu projeto exatamente como √©, pense por conta pr√≥pria tamb√©m.&lt;/p&gt;

&lt;h2 id=&#34;a-implementa√ß√£o-e-mudan√ßas&#34;&gt;A implementa√ß√£o e mudan√ßas&lt;/h2&gt;

&lt;p&gt;Para experimentar este conceito novo para mim, implementei um Todo List, n√£o t√£o complexo quanto o &lt;a href=&#34;http://todomvc.com/&#34;&gt;TodoMVC&lt;/a&gt;, serviu apenas para poder fixar as id√©ias. As primeiras mudan√ßas que fiz foi remover os &lt;strong&gt;actions creators&lt;/strong&gt; e as¬†&lt;strong&gt;constantes&lt;/strong&gt;. Actions creators s√£o fun√ß√µes que criam as actions (objetos) que s√£o usados como informa√ß√µes pela¬†Store. Uma action tamb√©m possui uma propriedade¬†&lt;strong&gt;type¬†&lt;/strong&gt;que armazena qual o tipo de a√ß√£o, ela √© uma string e portanto na documenta√ß√£o oficial ela √© referenciada atrav√©s de uma constante.&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;function addTodo( text ){
    return{
        type :ADD_TODO,
        text
    }
}
&lt;/pre&gt;

&lt;p&gt;H√°¬†alguns motivos pelos quais tanto as constantes quanto as actions creators existem, principalmente em projetos muito grandes, o motivo mais √≥bvio √© que essa granula√ß√£o ajuda caso seja necess√°rio alterar por exemplo o nome de uma constante, ou adicionar propriedades em¬†uma action sem que seja neces√°rio revisitar todos os lugares onde se usam as constantes ou as actions.&lt;/p&gt;

&lt;p&gt;Mas no meu caso o projeto √© pequeno, e a consequ√™ncia disso √© que ao inv√©s de ajudar isso acaba atrapalhando um pouco na manuten√ß√£o. Se o projeto √© pequeno e possui apenas um lugar onde estas actions existem, este processo¬†acaba tornando sua arquitetura burocr√°tica desnecessariamente, voc√™ for√ßa o programador a alterar v√°rias partes diferentes da aplica√ß√£o ainda¬†que a mudan√ßa seja algo muito simples, costumamos¬†chamar isso de &lt;em&gt;over engineering&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;No &lt;strong&gt;Jails&lt;/strong&gt; a controller √© como um m√≥dulo fechado, que controla os eventos. Para uma &lt;em&gt;todo&lt;/em&gt; list, o processo de adicionar &lt;em&gt;todos&lt;/em&gt; ou_¬†_remover &lt;em&gt;todos&lt;/em&gt; s√≥ far√°¬†sentido neste m√≥dulo ( neste meu projeto ). Portanto, n√£o preciso dar tantas voltas:&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;import &#39;components/riot-view/riot-view&#39;
import &#39;components/submitter/submitter&#39;

import jails from &#39;jails&#39;
import store from &#39;stores/todos&#39;

jails.controller(&#39;todos&#39;, function(){

    const view = this.x(&#39;.view&#39;)

    this.init = ()=&amp;gt;{

        this.on(&#39;blur&#39;, &#39;li .form-control&#39;, save)
        this.on(&#39;click&#39;, &#39;.remove&#39;, remove)
        this.listen(&#39;submitter:post&#39;, add)

        //...
    }

    function update( state = todos.getState() ){
        view(&#39;update&#39;, state )
    }

    function save( id, text ){
        let id = +e.target.title,
            text = e.target.value
        if ( text ){
            store.dispatch({ id, text, type :&#39;UPDATE_TODO&#39; })
        }
    }

    function add( e, opt ){
        let form = e.target,
            text = opt.params.text.trim()
        if( text ){
            store.dispatch({ text, type :&#39;ADD_TODO&#39; })
        }
    }

    function remove( e ){
        let id = +e.target.title
        store.dispatch({ id, type :&#39;REMOVE_TODO&#39; })
    }
        //...
})


&lt;/pre&gt;

&lt;p&gt;Um pouco mais direto&amp;#8230; ¬†Como podem ver no c√≥digo, o Jails abstrai a parte de eventos do DOM, e interpreta qual √© a a√ß√£o executada pelo usu√°rio e delega a action para o¬†m√≥dulo¬†&lt;strong&gt;store&lt;/strong&gt;. A√≠ est√£o algumas a√ß√µes que a minha todo list espera, como adicionar um todo, remover e salvar.&lt;/p&gt;

&lt;h2 id=&#34;a-store&#34;&gt;A Store&lt;/h2&gt;

&lt;p&gt;A minha store √© bem simples para este caso, n√£o precisei fazer mudan√ßas dr√°sticas, o modelo da documenta√ß√£o j√° me serviu, as mudan√ßas apenas s√£o de forma estrutural por causa do framework que eu utilizo:&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;import Reduxtore from &#39;modules/reduxtore/reduxtore&#39;
import storage from &#39;modules/storage/storage&#39;
import reducer from &#39;reducers/todos/index&#39;

export default (()=&amp;gt;{

    let list, store

    list = storage.session.get(&#39;todos&#39;) || []

    store = new Reduxtore( reducer, {
        filter  :&#39;all&#39;,
        todos   :list,
        items   :list
    })

    store.subscribe(()=&amp;gt;{
        storage.session.set(&#39;todos&#39;, store.getState().todos )
    })

    return store
})()
&lt;/pre&gt;

&lt;p&gt;Aqui est√° a defini√ß√£o da store da minha aplica√ß√£o, eu importo um m√≥dulo AMD¬†que abstrai o processo de local storage, para poder salvar o estado da aplica√ß√£o, importo um reducer que ser√° passado como parametro para minha store, e tamb√©m defino o estado inicial e os campos que minha aplica√ß√£o deve conter.&lt;/p&gt;

&lt;p&gt;A classe Reduxtore √© apenas uma implementa√ß√£o que fiz em AMD¬†do conceito de Store do Redux, seguindo a¬†especifica√ß√£o, possui os m√©todos .&lt;strong&gt;getState()&lt;/strong&gt;, .&lt;strong&gt;dispatch()&lt;/strong&gt; e &lt;strong&gt;subscribe()&lt;/strong&gt;. Na especifica√ß√£o existem outros m√©todos, mas estes para mim por enquanto s√£o suficientes.&lt;/p&gt;

&lt;p&gt;Toda vez que quero disparar uma a√ß√£o utilizo .&lt;strong&gt;dispatch()&lt;/strong&gt;, o callback de uma altera√ß√£o de estado √© registrado pelo m√©todo .&lt;strong&gt;subscribe()&lt;/strong&gt; e sempre que quiser resgatar o estado atual da aplica√ß√£o, utilizo .&lt;strong&gt;getState()&lt;/strong&gt;. No meu caso, a minha store salva os dados no local storage e resgata-os assim que inicia.&lt;/p&gt;

&lt;h2 id=&#34;reducers-e-fun√ß√µes-puras&#34;&gt;Reducers e Fun√ß√µes puras&lt;/h2&gt;

&lt;p&gt;Se a Store √© respons√°vel por manter e armazenar o estado da minha aplica√ß√£o, voc√™ deve se perguntar quem faz as altera√ß√µes nos estados. Eu havia dito anteriormente que s√£o os reducers, o nome pode assustar um pouco porque podemos fazer algumas assun√ß√µes, mas a grosso modo, s√£o apenas fun√ß√µes puras, que recebem um estado como primeiro par√¢metro e uma &amp;#8220;action&amp;#8221; como¬†segundo par√¢metro.&lt;/p&gt;

&lt;p&gt;De forma bem grosseira, fun√ß√µes puras s√£o aquelas do tipo f(x, y) =&amp;gt; x + y , por exemplo, onde o resultado esperado como sa√≠da deve ser sempre o mesmo quando passados os mesmos valores. O que significa que para a fun√ß√£o acima de exemplo, se x for 10 e y for 5 o resultado final SEMPRE ser√° 15. Ela n√£o pode ser n√£o-determin√≠stica a ponto de te retornar um valor diferente para os mesmos parametros. Tipo : &lt;strong&gt;f(10, 5) = 15&lt;/strong&gt;,** &lt;span style=&#34;color: #ff0000&#34;&gt;f(10, 5) = 20&lt;/span&gt;**.&lt;/p&gt;

&lt;p&gt;Outra caracter√≠stica das fun√ß√µes puras √© o fato delas n√£o acarretarem efeitos colaterais na sua execu√ß√£o, ou seja, passados x, y ela apenas ir√£o computar x e y. N√£o se pode inserir um z na quest√£o, ou executar um m√©todo de I/O como ler um arquivo , executar um ajax ou mesmo alterar um elemento do dom. Por isso as fun√ß√µes puras s√£o previs√≠veis, o que nos ajuda e muito na sanidade da nossa aplica√ß√£o, ao inv√©s disso,¬†o que costumamos fazer √© algo do tipo:&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;function soma( x, y ){
    document.body.innerHTML = &#39;AHAHAHHAH&#39;
    global.var = null
    return x+y
}
&lt;/pre&gt;

&lt;p&gt;Esta fun√ß√£o n√£o √© pura, inclusive √© imunda. Esse exemplo √© caricato, mas pode perceber que faz muito isso olhando pros seus c√≥digos, esta fun√ß√£o soma que deveria apenas somar produz efeitos colaterais, no caso acima, no DOM e numa vari√°vel global. E se retirar a linha que altera o DOM e a linha da vari√°vel global, e por algum motivo¬†sua fun√ß√£o retorna soma algumas vezes e outras retorna a divis√£o, pros mesmos par√¢metros, ent√£o ela tamb√©m n√£o √© pura. √â interessante que mantenha em mente o que eu disse anteriormente sobre n√£o ser um rob√¥.¬†N√£o¬†mude todas as suas fun√ß√µes para fun√ß√µes puras. As fun√ß√µes impuras tamb√©m tem sua utilidade.&lt;/p&gt;

&lt;p&gt;Ent√£o ter√≠amos um reducer que modificaria um determinado campo do nosso objeto que armazena os estados da nossa aplica√ß√£o.&lt;/p&gt;

&lt;p&gt;Abaixo segue a implementa√ß√£o do reducer que modifica o estado &lt;strong&gt;{ todos:[] }¬†&lt;/strong&gt;da minha Store:&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;export default function( state = [], action ){

    switch( action.type ){

        case &#39;ADD_TODO&#39;: return [
            ...state, {
                text        :action.text,
                completed   :false,
                edit        :false,
                id      :(Math.random() * Math.pow(10, 20))
            }
        ]

        case &#39;UPDATE_TODO&#39;: return state.map( item =&amp;gt;{
            if( item.id == action.id ){
                item.text = action.text
                item.edit = false
            }
            return item
        })

        case &#39;REMOVE_TODO&#39;: return state.filter( item =&amp;gt;
            item.id != action.id
        )

        default : return state
    }
}
&lt;/pre&gt;

&lt;p&gt;Como o estado¬†&lt;strong&gt;todos¬†&lt;/strong&gt;√© uma lista, eu sempre vou retornar uma lista, todos os reducers recebem as a√ß√µes disparadas, cabe a voc√™ definir √† quais a√ß√µes o seu reducer ir√°¬†responder. Isso √© muito legal no Redux, facilita e MUITO no processo de inserir novas features¬†no seu projeto.&lt;/p&gt;

&lt;p&gt;Para o estado¬†&lt;strong&gt;filter&lt;/strong&gt; que cuida dos filtros da minha todo list como &amp;#8220;completos&amp;#8221; &amp;#8220;ativos&amp;#8221; ou &amp;#8220;todos&amp;#8221;,¬†eu crio outro reducer, respons√°vel por alterar apenas este estado:&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;export default (state = &#39;all&#39;, action) =&amp;gt;{
    return action.filter? action.filter :state
}
&lt;/pre&gt;

&lt;p&gt;Este √© bem simples. Este reducer sempre vai retornar valores entre &amp;#8220;all&amp;#8221;, &amp;#8220;completed&amp;#8221;, &amp;#8220;active&amp;#8221;. Note que aqui estou desconsiderando o tratamento do action.filter, portanto se for passado um estado que n√£o est√° dentro dos valores que mencionei, o c√≥digo ir√° quebrar. Mantive desta forma por quest√µes did√°ticas.&lt;/p&gt;

&lt;h2 id=&#34;combina√ß√£o-de-reducers&#34;&gt;Combina√ß√£o de Reducers&lt;/h2&gt;

&lt;p&gt;Lembra que na defini√ß√£o da minha Store, eu podia passar apenas um reducer, certo? Como eu tenho dois para essa aplica√ß√£o como eu passo estes reducers se minha store recebe apenas um?&lt;/p&gt;

&lt;p&gt;Aqui √© onde voc√™ percebe que as coisas encaixam&amp;#8230; ¬†Se voc√™ tem duas fun√ß√µes puras que recebem um estado como primeiro par√¢metro e a mesma action como segundo, basta criar uma terceira que engloba as outras duas, combinando os reducers:&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;import todos from &#39;reducers/todos/todo&#39;
import visibility from &#39;reducers/todos/visibility&#39;

export default ( state, action ) =&amp;gt;{

            let list = todos( state.todos, action ),
        filter   = visibility( state.filter, action ),
        filtered = todos( list, { type  :&#39;FILTER_TODO&#39;, filter })

    return {
        filter,
        todos   :list,
        items   :filtered
    }
}
&lt;/pre&gt;

&lt;p&gt;Este reducer √© exatamente o que √© importado l√° em cima na nossa Store. Lembrando que na nossa Store, nos passamos um objeto com 3 estados, {¬†&lt;strong&gt;todos, items, filter¬†&lt;/strong&gt;}. Essa main reducer vai receber como primeiro parametro esse objeto com os 3 estados, e vai repassar cada estado para seu reespectivo reducer que por sua vez, vai retornar um novo estado dado aquela a√ß√£o, e todos recebem a mesma action! \o/&lt;/p&gt;

&lt;p&gt;No meu main reducer ali eu mudei¬†um pouco, fiz diferente do modo como vi na implementa√ß√£o do redux no TodoMVC, eu criei¬† um estado a mais que √© o estado¬†&lt;strong&gt;items&lt;/strong&gt;, porque este √© o que aparece para o usu√°rio, mas n√£o √© o reflexo de todos os &lt;strong&gt;todos&lt;/strong&gt; que eu possuo. O que acontecia antes de eu adicionar esse campo √© que na hora de escolher por um filtro que apenas mostrava os &lt;strong&gt;todos&lt;/strong&gt; completados a minha Store automaticamente salvava este estado no session storage¬†e eu perdia os items que estavam &lt;strong&gt;incompletos&lt;/strong&gt; por exemplo. Ent√£o eu precisava de um campo para realmente armazenar todas¬†as entradas que eu tinha, e outro campo chamado &amp;#8220;&lt;strong&gt;items&lt;/strong&gt;&amp;#8221; que serve de forma visual na hora de filtrar os &lt;strong&gt;todos&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Na documenta√ß√£o do redux usando React ele resolve esse problema dos itens filtrados na view. Eu particularmente prefiro ter &lt;strong&gt;menos l√≥gica poss√≠vel&lt;/strong&gt; na view e isso √© s√≥ uma quest√£o de prefer√™ncia.&lt;/p&gt;

&lt;p&gt;Essa altera√ß√£o foi extremamente simples e √© incr√≠vel como √© f√°cil resolver problemas deste tipo de forma elegante, n√£o fugi do padr√£o do reducer, das fun√ß√µes puras, e consegui reutilizar o reducer¬†&lt;strong&gt;todos¬†&lt;/strong&gt;apenas passando a a√ß√£o de filtro para a mesma lista de items usando a mesma fun√ß√£o salvando em outro estado.&lt;/p&gt;

&lt;h2 id=&#34;conclus√£o&#34;&gt;Conclus√£o&lt;/h2&gt;

&lt;p&gt;De fato isso melhorou bastante o desenvolvimento de aplica√ß√µes complexas que estava desenvolvendo, √© preciso amadurecimento nessa arquitetura ainda. Faz apenas alguns meses que estou mexendo nisso e n√£o posso incluir essa arquitetura em qualquer projeto, ent√£o o processo de amadurecimento e experi√™ncia¬†√© lento.&lt;/p&gt;

&lt;p&gt;Realmente isso resolve muitos problemas recorrentes que tinha e de quebra voc√™ ganha um poder que nem percebeu, de gra√ßa. Por concentrar todos os estados da sua aplica√ß√£o em um objeto, e realizar todas as mudan√ßas neste objeto, voc√™ pode &amp;#8220;voltar no tempo&amp;#8221;, basta fazer um subscribe na sua Store, e sempre que ela atualizar, armazene o √∫ltimo¬†estado em um array. Dessa forma, como sua aplica√ß√£o responde sempre √† um estado, voc√™ pode incluir uma funcionalidade de &amp;#8220;undo&amp;#8221; e &amp;#8220;redo&amp;#8221;, apenas navegando entre os estados desse array =).&lt;/p&gt;

&lt;p&gt;Al√©m disso voc√™ perde menos tempo com detalhes do DOM, delegue¬†isso para alguma lib de template, e se concentre nos estados, isso inclusive te ajuda na hora de testar o comportamento da sua aplica√ß√£o, voc√™ n√£o precisa emular o DOM, basta¬†testar as propriedades de cada estado.&lt;/p&gt;

&lt;h2 id=&#34;finalizando-8230&#34;&gt;Finalizando&amp;#8230;&lt;/h2&gt;

&lt;p&gt;Bom galera, era isso que eu tinha pra falar, eu n√£o postei a aplica√ß√£o por completo para n√£o estender ainda mais esse post, deixarei no final do post um link com o app¬†funcionando e o c√≥digo-fonte no caso de algu√©m se interessar. A id√©ia do post n√£o √© servir como refer√™ncia para suas aplica√ß√µes baseadas em Redux, serve apenas para instigar um pouco a curiosidade com rela√ß√£o √† padr√µes e arquiteturas, deixando os frameworks em segundo plano. H√° outros conceitos n√£o discutidos como &lt;strong&gt;imutabilidade&lt;/strong&gt; e outras coisas mais, sugiro a leitura da documenta√ß√£o oficial para maiores detalhes.&lt;/p&gt;

&lt;p&gt;O¬†TodoApp que fiz √© um projeto feito em AMD, usando o micro-framework Jails para relacionamento entre componentes e m√≥dulos, o projeto foi escrito usando a sintaxe do ES6 usando &lt;strong&gt;Babel&lt;/strong&gt; para gerar os AMD&amp;#8217;s em ES5.¬†Estou usando como componente de renderiza√ß√£o o &lt;a href=&#34;http://riotjs.com/&#34; target=&#34;_blank&#34;&gt;RiotJS&lt;/a&gt;¬†que implementa virtualDOM e √© extremamente leve, tornou-se minha engine padr√£o nos projetos para renderiza√ß√£o de templates, embora ela seja muito mais que isso. O Riotjs √© uma √≥tima alternativa para quem quer colocar os conceitos do React em pr√°tica.&lt;/p&gt;

&lt;p&gt;Um grande abra√ßo.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/jails-org/Demos/tree/master/TodoApp&#34; target=&#34;_blank&#34;&gt;Jails TodoApp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://egghead.io/lessons/javascript-redux-the-single-immutable-state-tree?series=getting-started-with-redux&#34; target=&#34;_blank&#34;&gt;Redux¬†Course ( Screencasts )&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://redux.js.org/&#34; target=&#34;_blank&#34;&gt;Redux Documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Pure_function&#34; target=&#34;_blank&#34;&gt;Pure Functions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://riotjs.com/&#34; target=&#34;_blank&#34;&gt;RiotJS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://babeljs.io/docs/plugins/transform-es2015-modules-amd/&#34;&gt;Babel &amp;amp; AMD modules&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Usando GIT para atualizar arquivos no servidor de hospedagem II ‚Äì Final</title>
      <link>https://tableless.github.io/hugo-public/usando-git-para-atualizar-arquivos-no-servidor-de-hospedagem-ii-final/</link>
      <pubDate>Thu, 19 Nov 2015 00:00:00 +0000</pubDate>
      
      <guid>https://tableless.github.io/hugo-public/usando-git-para-atualizar-arquivos-no-servidor-de-hospedagem-ii-final/</guid>
      <description>

&lt;p&gt;Esta √© a segunda e √∫ltima parte do artigo que explica como fazer um esquema simples para deploy autom√°tico usando GIT + Bitbucket&lt;/p&gt;

&lt;p&gt;A mesma configura√ß√£o pode ser usada em qualquer servidor GIT e qualquer servi√ßo de hospedagem que tenha acesso via ssh e git instalado&lt;/p&gt;

&lt;p&gt;Se voc√™ ainda n√£o leu a primeira parte, segue o link: &lt;a href=&#34;http://tableless.com.br/usando-git-para-atualizar-arquivos-no-servidor-de-hospedagem&#34;&gt;http://tableless.com.br/usando-git-para-atualizar-arquivos-no-servidor-de-hospedagem&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;No artigo anterior, criamos as chaves SSH para autentica√ß√£o no Bitbucket, criamos um reposit√≥rio GIT e manualmente executamos o comando | git pull | para atualizar o nosso reposit√≥rio.&lt;/p&gt;

&lt;p&gt;Nessa segunda parte vamos executar o comando para atualiza√ß√£o, de forma automatizada, sem precisar acessar o servidor. Vamos fazer um painel de controle para acompanhar os logs de deploy, mostrando se o comando foi executado com sucesso ou se aconteceu algum erro.&lt;/p&gt;

&lt;p&gt;Gostaria de lembrar que essa √© uma solu√ß√£o simples, existem v√°rias maneiras de fazer deploy automatizado, eu escolhi fazer usando php e shell_exec, √© mais r√°pido e para projetos simples isso funciona muito bem. O mesmo pode ser feito usando &lt;a href=&#34;https://pt.wikipedia.org/wiki/CGI&#34;&gt;CGI&lt;/a&gt; ou &lt;a href=&#34;https://pt.wikipedia.org/wiki/Shell_script&#34;&gt;Shell Script&lt;/a&gt;, ou ainda voc√™ pode usar um servi√ßo online como o heroku.com, ou configurar o Capistrano, ou Jenkins, etc&amp;#8230;&lt;/p&gt;

&lt;h4 id=&#34;o-comando-shell-exec-no-php&#34;&gt;O Comando shell_exec no PHP&lt;/h4&gt;

&lt;p&gt;No manual do php:&lt;/p&gt;

&lt;p&gt;(PHP 4, PHP 5, PHP 7)&lt;/p&gt;

&lt;p&gt;shell_exec ‚Äî Executa um comando via shell e retorna a sa√≠da inteira como uma string&lt;/p&gt;

&lt;p&gt;Isso quer dizer que podemos executar um comando no servidor e ler o retorno desse comando, no nosso caso vamos executar o comando | git pull origin master | o mesmo comando que est√°vamos executando manualmente l√° no servidor, lembra que t√≠nhamos que acessar o servidor via putty, navegar at√© a pasta do nosso reposit√≥rio e depois executar um git pull, j√° que isso √© uma tarefa repetitiva, vamos automatizar, √© isso que devemos fazer com todos os processos repetitivos.&lt;/p&gt;

&lt;p&gt;Em muitos servidores de hospedagem esse comando √© bloqueado por padr√£o, se estiver bloqueado voc√™ vai receber um aviso parecido com esse:&lt;/p&gt;

&lt;pre class=&#34;lang-shell&#34;&gt;Warning:  shell_exec() has been disabled for security reasons in /var/www/deploy.php on line 10&lt;/pre&gt;

&lt;p&gt;No meu caso eu abri um chamado no painel da hospedagem, explicando que precisava da libera√ß√£o para usar em um sistema de deploy autom√°tico usando GIT e prontamente fui atendido e o comando foi liberado.&lt;/p&gt;

&lt;p&gt;Vou usar o mesmo reposit√≥rio que usei para a primeira parte, &lt;a href=&#34;https://bitbucket.org/jzonta/artigo_atualizacao_arquivos&#34;&gt;https://bitbucket.org/jzonta/artigo_atualizacao_arquivos&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Vamos Come√ßar, e vamos usar um dos termos da metodologia XP &amp;#8211; Extremme Programing, &amp;#8220;Baby Steps&amp;#8221;, vamos executar todo o processo em pequenos passos, eu vou atualizar o reposit√≥rio no GIT com todos os passos, voc√™ pode acessar e ver todos os commits &amp;#8211; inclusive os errados üôÇ &amp;#8211; √© bacana pra ver a evolu√ß√£o do c√≥digo.&lt;/p&gt;

&lt;p&gt;Vou criar uma pasta chamada deploy e dentro um arquivo chamado index.php, quando executado pelo navegador ele atualiza nosso servidor executando o comando git pull no servidor e imprimindo na tela o resultado do commnado.&lt;/p&gt;

&lt;p&gt;A pasta deploy deve ficar dentro da pasta do seu projeto, voc√™ pode ver a estrutura que usei no reposit√≥rio desse artigo no Bitbucket.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;* Note que no final do comando git pull eu adicionei &amp;#8220;2&amp;gt;&amp;amp;1&amp;#8221; isso quer dizer que alem das sa√≠das normais eu quero exibir as sa√≠das de erro do nosso comando no servidor.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;index.php&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&#34;pt-br&#34;&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;meta charset=&#34;utf-8&#34;/&amp;gt;
&amp;lt;title&amp;gt;Usando GIT para atualizar arquivos no servidor de hospedagem&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
    &amp;lt;pre&amp;gt;
    &amp;lt;?php
        $exec = shell_exec(&#34;git pull origin master 2&amp;gt;&amp;1&#34;);
        echo $exec;
    ?&amp;gt;
    &amp;lt;/pre&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/pre&gt;

&lt;p&gt;A sa√≠da na tela √© a mesma que aparece quando executamos o comando l√° no servidor, veja o exemplo da sa√≠da no servidor e no navegador:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/10/comando_shell_navegador.jpg&#34;&gt;&lt;img class=&#34;alignnone size-full wp-image-51941&#34; src=&#34;http://tableless.com.br/wp-content/uploads/2015/10/comando_shell_navegador.jpg&#34; alt=&#34;comando_shell_navegador&#34; width=&#34;657&#34; height=&#34;210&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;* Lembre-se que para enviar esse arquivo ao servidor voc√™ n√£o deve usar o ftp, fa√ßa isso utilizando o comando |git pull|, j√° fizemos isso na primeira parte do artigo.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;J√° estamos atualizando nosso servidor apenas acessando uma url em nosso navegador \o/, mas n√£o √© s√≥ isso que queremos, eu quero que essa url seja chamada sempre que eu enviar um push para o reposit√≥rio, ent√£o acesse sua conta no Bitbucket e vamos configurar isso.&lt;/p&gt;

&lt;p&gt;Acesse seu reposit√≥rio, no menu lateral esquerdo, clique em &amp;#8220;Configura√ß√µes&amp;#8221;.&lt;/p&gt;

&lt;p&gt;Na tela configura√ß√µes clique em &amp;#8220;Webhooks&amp;#8221; e depois em &amp;#8220;Add Webhook&amp;#8221;&lt;/p&gt;

&lt;p&gt;No campo &amp;#8220;Title&amp;#8221; adicione um nome de sua prefer√™ncia e no campo &amp;#8220;URL&amp;#8221; adicione o endere√ßo para a sua url que executa o comando de atualiza√ß√£o, no meu caso a URL √© &amp;#8220;&lt;a href=&#34;http://joaozonta.com.br/artigo_atualizacao_arquivos/deploy/index.php&amp;amp;#8221&#34;&gt;http://joaozonta.com.br/artigo_atualizacao_arquivos/deploy/index.php&amp;amp;#8221&lt;/a&gt;;&lt;/p&gt;

&lt;p&gt;Mas n√£o podemos deixar essa URL aberta, porque qualquer um poderia acessar e isso iria executar o comando git pull em nosso servidor, ent√£o vamos criar um token de autentica√ß√£o, junto com a URL eu passo um token que mais tarde vamos validar l√° no nosso c√≥digo, ent√£o a URL ficaria assim: &lt;a href=&#34;http://joaozonta.com.br/artigo_atualizacao_arquivos/deploy/index.php?token=d41d8cd98f00b204e9800998ecf8427e&#34;&gt;http://joaozonta.com.br/artigo_atualizacao_arquivos/deploy/index.php?token=d41d8cd98f00b204e9800998ecf8427e&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;* Use este site para gerar seu token: &lt;a href=&#34;http://www.miraclesalad.com/webtools/md5.php&#34;&gt;http://www.miraclesalad.com/webtools/md5.php&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/10/adicionar_webhook.jpg&#34;&gt;&lt;img class=&#34;alignnone size-full wp-image-51940&#34; src=&#34;http://tableless.com.br/wp-content/uploads/2015/10/adicionar_webhook.jpg&#34; alt=&#34;adicionar_webhook&#34; width=&#34;850&#34; height=&#34;439&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Feito isso, toda vez que enviar um push para o Bitbucket ele vai acessar a URL, e nossa url vai disparar o comando |git pull| no servidor e os arquivos ser√£o atualizados. Nosso deploy j√° esta funcionando, mas eu tamb√©m quero visualizar os logs, para ter maior controle sobre oque esta acontecendo.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/10/local_git_servidor.jpg&#34;&gt;&lt;img class=&#34;alignnone size-full wp-image-51943&#34; src=&#34;http://tableless.com.br/wp-content/uploads/2015/10/local_git_servidor.jpg&#34; alt=&#34;local_git_servidor&#34; width=&#34;444&#34; height=&#34;352&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;*No seu reposit√≥rio no Bitbucket, vc pode ver os requests que foram feitos entrando em &amp;#8220;Configura√ß√µes&amp;#8221;, &amp;#8220;Web Hooks&amp;#8221;, ao lado do Title do seu webhook voc√™ clica em &amp;#8220;View Requests&amp;#8221; e pode ver todas as requisi√ß√µes que o Bitbucket fez para a sua URL.&lt;/em&gt;&lt;/p&gt;

&lt;h4 id=&#34;gravando-log&#34;&gt;Gravando Log&lt;/h4&gt;

&lt;p&gt;Primeiro vamos gerar o texto que queremos gravar no nosso arquivo de log, poder√≠amos apenas colocar a sa√≠da do comando shell_exec, mas vamos adicionar a data, hora e algumas quebras de linha para deixar o nosso log mais leg√≠vel, veja como ficou o c√≥digo:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&#34;pt-br&#34;&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;meta charset=&#34;utf-8&#34;/&amp;gt;
&amp;lt;title&amp;gt;Usando GIT para atualizar arquivos no servidor de hospedagem&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
    &amp;lt;pre&amp;gt;
    &amp;lt;?php
        $exec = shell_exec(&#34;git pull origin master 2&amp;gt;&amp;1&#34;);
        echo $exec;

        $textoLog = PHP_EOL.&#34;Data: &#34;.date(d.&#34;/&#34;.m.&#34;/&#34;.Y.&#34; - &#34;.H.&#34;:&#34;.i.&#34;:&#34;.s);
        $textoLog .= PHP_EOL.$exec;

        $arquivoLog = fopen(&#39;log.txt&#39;, &#39;a+&#39;);
        fwrite($arquivoLog, $textoLog);
        fclose($arquivoLog);
    ?&amp;gt;
    &amp;lt;/pre&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;&lt;/pre&gt;

&lt;p&gt;N√£o precisa explicar muito o c√≥digo php porque √© bem simples, se algu√©m tem d√∫vida dobre alguma das fun√ß√µes usadas √© s√≥ dar uma procurada no site do php (&lt;php.net&gt;) ou no google, tem bastante material.&lt;/p&gt;

&lt;p&gt;Se tudo est√° ocorrendo como planejado, quando voc√™ executar novamente seu endere√ßo URL ele vai criar um arquivo chamado log.txt na mesma pasta, e gravar os logs neste arquivo.&lt;/p&gt;

&lt;h4 id=&#34;adicionando-token-de-valida√ß√£o&#34;&gt;Adicionando Token de Valida√ß√£o&lt;/h4&gt;

&lt;p&gt;Vamos deixar nosso deploy um pouco mais seguro. Lembra que na URL que adicionamos l√° no webhook do Bitbucket colocamos um token? Ent√£o, agora vamos validar esse token.&lt;/p&gt;

&lt;p&gt;Criei uma variavel chamada $token e adicionei a nossa string MD5&lt;/p&gt;

&lt;p&gt;Depois a variavel $tokenValido recebe true se o token enviado via post ou get for igual ao token que configuramos na variavel $token, caso contr√°rio recebe false.&lt;/p&gt;

&lt;p&gt;Depois verificamos se $tokenValido for igual a true executa o deploy se n√£o exibe o log e um bot√£o para atualizar manualmente.&lt;/p&gt;

&lt;pre&gt;&amp;lt;?php
$token = &#34;d41d8cd98f00b204e9800998ecf8427e&#34;;
if($_REQUEST[&#39;token&#39;] == $token)
    $tokenValido = true;
?&amp;gt;
&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&#34;pt-br&#34;&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;meta charset=&#34;utf-8&#34;/&amp;gt;
&amp;lt;title&amp;gt;Usando GIT para atualizar arquivos no servidor de hospedagem&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;pre&amp;gt;
    &amp;lt;?php
        if($tokenValido) {
            $exec = shell_exec(&#34;git pull origin master 2&amp;gt;&amp;1&#34;);
            echo $exec;

            $textoLog = PHP_EOL.&#34;Data: &#34;.date(d.&#34;/&#34;.m.&#34;/&#34;.Y.&#34; - &#34;.H.&#34;:&#34;.i.&#34;:&#34;.s);
            $textoLog .= PHP_EOL.$exec;

            $arquivoLog = fopen(&#39;log.txt&#39;, &#39;a+&#39;);
            fwrite($arquivoLog, $textoLog);
            fclose($arquivoLog);
        } else {
            //Deve exibir o log e um bot√£o para para executar a atualiza√ß√£o
        }
    ?&amp;gt;
&amp;lt;/pre&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/pre&gt;

&lt;h4 id=&#34;implementando-a-leitura-do-log-e-bot√£o-para-atualizar&#34;&gt;Implementando a Leitura do Log e Bot√£o Para Atualizar&lt;/h4&gt;

&lt;p&gt;No c√≥digo abaixo foi adiciona a implementa√ß√£o que l√™ o arquivo de log atrav√©s do comando file() e depois exibe na tela, tamb√©m foi adicionado um formul√°rio com o bot√£o &amp;#8220;Atualizar&amp;#8221;, caso ocorra alguma falha na atualiza√ß√£o autom√°tica atrav√©s do webhook esse bot√£o pode ser utilizado para for√ßar essa atualiza√ß√£o e executar o nosso deploy.&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;?php
$token = &#34;d41d8cd98f00b204e9800998ecf8427e&#34;;
if($_REQUEST[&#39;token&#39;] == $token)
    $tokenValido = true;
?&amp;gt;
&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&#34;pt-br&#34;&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;meta charset=&#34;utf-8&#34;/&amp;gt;
&amp;lt;title&amp;gt;Usando GIT para atualizar arquivos no servidor de hospedagem&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
    &amp;lt;pre&amp;gt;
        &amp;lt;?php
        if($tokenValido) {
            $exec = shell_exec(&#34;git pull origin master 2&amp;gt;&amp;1&#34;);
            echo $exec;

            $textoLog = PHP_EOL.&#34;Data: &#34;.date(d.&#34;/&#34;.m.&#34;/&#34;.Y.&#34; - &#34;.H.&#34;:&#34;.i.&#34;:&#34;.s);
            $textoLog .= PHP_EOL.$exec;

            $arquivoLog = fopen(&#39;log.txt&#39;, &#39;a+&#39;);
            fwrite($arquivoLog, $textoLog);
            fclose($arquivoLog);
        } else {
        ?&amp;gt;
            &amp;lt;form action=&#34;index.php&#34; method=&#34;post&#34;&amp;gt;
                &amp;lt;input type=&#34;hidden&#34; name=&#34;token&#34; value=&#34;d41d8cd98f00b204e9800998ecf8427e&#34;&amp;gt;
                &amp;lt;input type=&#34;submit&#34; value=&#34;Atualizar&#34;&amp;gt;
            &amp;lt;/form&amp;gt;
        &amp;lt;?php
        $texto = file(&#39;log.txt&#39;);
        foreach ($texto as $linha) {
            echo $linha;
        }
        }
        ?&amp;gt;
    &amp;lt;/pre&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/pre&gt;

&lt;h4 id=&#34;adicionando-autentica√ß√£o&#34;&gt;Adicionando Autentica√ß√£o&lt;/h4&gt;

&lt;p&gt;Tudo funcionando, mas qualquer um pode entrar na nossa URL, visualizar os logs e clicar no bot√£o para atualizar o servidor.&lt;/p&gt;

&lt;p&gt;Ent√£o vou implementar uma autentica√ß√£o simples, iniciando uma sess√£o e usando a vari√°vel $senhaAcesso, ent√£o nossas regras seriam as seguintes:&lt;/p&gt;

&lt;p&gt;Se receber o token, faz a valida√ß√£o, se estiver correto, atualiza o nosso servidor&lt;/p&gt;

&lt;p&gt;Se receber a senhaAcesso, faz a valida√ß√£o se estiver correto, mostra o log e o bot√£o para atualizar&lt;/p&gt;

&lt;p&gt;Se n√£o receber o token e nem a senhaAcesso mostra um form solicitando a senha&lt;/p&gt;

&lt;p&gt;Nosso c√≥digo tem apenas 3 condi√ß√µes no if, eu preferi deixar assim pra ficar mais f√°cil de entender, as condi√ß√µes separadas para ficar mais f√°cil de entender:&lt;/p&gt;

&lt;pre&gt;if($tokenValido) {
            // Se o toquem for v√°lido
            // Executa o comando git pull para atualizar o servidor e grava o log
        } else if($_SESSION[&#39;usuarioValido&#39;]) {
            // Se o usu√°rio estiver logado mostra o log e o bot√£o para atualizar
        } else {
            //Se o usu√°rio n√£o estiver logado mostra o formul√°rio para logar
        }
&lt;/pre&gt;

&lt;p&gt;Abaixo o c√≥digo completo desta etapa:&lt;/p&gt;

&lt;pre&gt;&amp;lt;?php
session_start();
$token = &#34;d41d8cd98f00b204e9800998ecf8427e&#34;;
$senhaAcesso = &#39;joaozonta&#39;;

if($_REQUEST[&#39;token&#39;] == $token)
    $tokenValido = true;

if($_REQUEST[&#39;senhaAcesso&#39;] == $senhaAcesso &amp;&amp; empty($_SESSION[&#39;usuarioValido&#39;]))
    $_SESSION[&#39;usuarioValido&#39;] = true;

if($_REQUEST[&#39;sair&#39;])
    unset($_SESSION[&#39;usuarioValido&#39;]);
?&amp;gt;
&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&#34;pt-br&#34;&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;meta charset=&#34;utf-8&#34;/&amp;gt;
&amp;lt;title&amp;gt;Usando GIT para atualizar arquivos no servidor de hospedagem&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;pre&amp;gt;
    &amp;lt;?php
        if($tokenValido) {
            $exec = shell_exec(&#34;git pull origin master 2&amp;gt;&amp;1&#34;);
            echo $exec;

            $textoLog = PHP_EOL.&#34;Data: &#34;.date(d.&#34;/&#34;.m.&#34;/&#34;.Y.&#34; - &#34;.H.&#34;:&#34;.i.&#34;:&#34;.s);
            $textoLog .= PHP_EOL.$exec;

            $arquivoLog = fopen(&#39;log.txt&#39;, &#39;a+&#39;);
            fwrite($arquivoLog, $textoLog);
            fclose($arquivoLog);
        } else if($_SESSION[&#39;usuarioValido&#39;]) {
        ?&amp;gt;
        &amp;lt;form action=&#34;index.php&#34; method=&#34;post&#34;&amp;gt;
            &amp;lt;input type=&#34;hidden&#34; name=&#34;token&#34; value=&#34;d41d8cd98f00b204e9800998ecf8427e&#34;&amp;gt;
            &amp;lt;input type=&#34;submit&#34; value=&#34;Atualizar&#34;&amp;gt;
        &amp;lt;/form&amp;gt;
        &amp;lt;?php
        if($_SESSION[&#39;usuarioValido&#39;])
            echo &#39;&amp;lt;p&amp;gt;&amp;lt;a href=&#34;index.php?sair=true&#34;&amp;gt;Sair&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;&#39;;
            $texto = file(&#39;log.txt&#39;);
            foreach ($texto as $linha) {
                echo $linha;
            }
        } else {
        ?&amp;gt;
        &amp;lt;form action=&#34;index.php&#34; method=&#34;post&#34;&amp;gt;
            &amp;lt;div&amp;gt;
                &amp;lt;input type=&#34;text&#34; placeholder=&#34;Senha&#34; name=&#34;senhaAcesso&#34;&amp;gt; 
            &amp;lt;/div&amp;gt;
            &amp;lt;input type=&#34;submit&#34; value=&#34;Acessar Sistema&#34;&amp;gt;
        &amp;lt;/form&amp;gt;
        &amp;lt;?php
        }
    ?&amp;gt;
&amp;lt;/pre&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/pre&gt;

&lt;h4 id=&#34;conclus√£o&#34;&gt;Conclus√£o&lt;/h4&gt;

&lt;p&gt;De uma maneira muito simples voc√™ pode atualizar seu servidor sem depender de um sistema complexo de deploy e sem muitas configura√ß√µes.&lt;/p&gt;

&lt;p&gt;Voc√™ pode implementar muitas outras op√ß√µes para deixar o seu sistema cada vez mais completo, pode adicionar um bot√£o para limpar o log ou adicionar o log em um banco de dados. J√° imaginou mostrar um combo com os √∫ltimos commits realizados e voc√™ escolher qual desses commits voc√™ quer atualizar no servidor, podendo assim voltar e avan√ßar vers√µes.&lt;/p&gt;

&lt;p&gt;N√£o falei sobre banco de dados nesse artigo, acho que isso pode ser tratado em outro t√≥pico.&lt;/p&gt;

&lt;p&gt;Voc√™ pode ver o exemplo funcionando em &lt;a href=&#34;http://joaozonta.com.br/artigo_atualizacao_arquivos/deploy/&#34;&gt;http://joaozonta.com.br/artigo_atualizacao_arquivos/deploy/&lt;/a&gt;, use a senha &amp;#8220;joaozonta&amp;#8221;&lt;/p&gt;

&lt;p&gt;*&lt;em&gt;No exemplo que esta no ar foram comentadas as linhas que fazem o deploy autom√°tico, est√° apenas simulando o funcionamento.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Fique √° vontade para entrar em contato para qualquer d√∫vida, sugest√£o, cr√≠tica ou erro que encontrar nesse artigo.&lt;/p&gt;

&lt;p&gt;Jo√£o A. Zonta&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.joaozonta.com.br&#34;&gt;joaozonta.com.br&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://twitter.com/joaozontaweb&#34;&gt;@joaozontaweb&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;mailto:joao@joaozonta.com.br&#34;&gt;joao@joaozonta.com.br&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Por que Python?</title>
      <link>https://tableless.github.io/hugo-public/por-que-python/</link>
      <pubDate>Tue, 29 Sep 2015 00:00:00 +0000</pubDate>
      
      <guid>https://tableless.github.io/hugo-public/por-que-python/</guid>
      <description>

&lt;p&gt;Eu sou apaixonado por &lt;a href=&#34;https://www.python.org/&#34;&gt;Python&lt;/a&gt;. Muito. Daquele tipo que fala de Python sempre que pode. E uma pergunta que sempre me fazem √©: por qu√™? Vou tentar fazer uma lista dos motivos mais relevantes:&lt;/p&gt;

&lt;h2 id=&#34;1-√©-muito-bom-escrever-c√≥digo-python&#34;&gt;1. √â muito bom escrever c√≥digo Python&lt;/h2&gt;

&lt;p&gt;Geralmente, quando algu√©m cria uma linguagem de programa√ß√£o, tem em vista um objetivo. Por exemplo,¬†Lisp foi escrita para programa√ß√£o funcional. Java foi escrita para que o mesmo c√≥digo pudesse rodar em qualquer lugar. PHP foi criada para construir p√°ginas web. E Python foi criada para ser produtiva e f√°cil de escrever.&lt;/p&gt;

&lt;p&gt;Um programador experiente aprende a sintaxe do Python em algumas poucas horas. O jeito de escrever faz sentido.&lt;/p&gt;

&lt;p&gt;Veja, por exemplo, essa fun√ß√£o para calcular um n√∫mero de &lt;a href=&#34;https://pt.wikipedia.org/wiki/Sequ%C3%AAncia_de_Fibonacci&#34;&gt;Fibonacci&lt;/a&gt;:&lt;/p&gt;

&lt;pre&gt;def fib(n):
    if n&amp;lt;3:
        return n
    return fib(n-1) + fib(n-2)&lt;/pre&gt;

&lt;p&gt;Note como a sintaxe √© simples. Mesmo nas decis√µes de design que s√£o &amp;#8220;pouco ortodoxas&amp;#8221;, como os blocos baseados na indenta√ß√£o, a decis√£o foi tomada pensando em produtividade. O modelo de blocos do Python faz com que voc√™ precise digitar menos. Al√©m disso, √© imposs√≠vel escrever c√≥digo n√£o indentado em Python.&lt;/p&gt;

&lt;p&gt;Veja nesse outro exemplo, a fun√ß√£o de Fibonacci em uma vers√£o &lt;a href=&#34;https://en.wikipedia.org/wiki/Memoization&#34;&gt;memoized&lt;/a&gt;:&lt;/p&gt;

&lt;pre&gt;memo = {0:0, 1:1}

def fib(n):
    if not n in memo:
        memo[n] = fib(n-1) + fib(n-2)
    return memo[n]&lt;/pre&gt;

&lt;p&gt;Reparou como √© simples? Ao trabalhar com Python, a linguagem nunca est√° entre voc√™ e seu problema. Voc√™ pode gastar seu tempo com a l√≥gica de programa√ß√£o, que √© o que realmente importa, e n√£o com especificidades da linguagem que voc√™ est√° usando.&lt;/p&gt;

&lt;h2 id=&#34;2-organizar-um-projeto-python-√©-muito-f√°cil&#34;&gt;2.¬†Organizar um projeto Python √© muito f√°cil&lt;/h2&gt;

&lt;p&gt;Vamos colocar nossa fun√ß√£o de Fibonacci e salvar num arquivo, fib.py, incluindo um pouquinho de documenta√ß√£o. Chamamos cada arquivo Python de m√≥dulo:&lt;/p&gt;

&lt;pre&gt;&#39;&#39;&#39;Fibonacci function, memoized for better performance.&#39;&#39;&#39;
memo = {0:0, 1:1}

def fib(n):
    &#39;&#39;&#39;Returns the nth Fibonacci number.&#39;&#39;&#39;
    if not n in memo:
        memo[n] = fib(n-1) + fib(n-2)
    return memo[n]&lt;/pre&gt;

&lt;p&gt;Agora vamos importar esse arquivo no console do Python, e veja o que d√° para fazer:&lt;/p&gt;

&lt;div style=&#34;width: 490px&#34; class=&#34;wp-caption alignnone&#34;&gt;
  &lt;img class=&#34;&#34; src=&#34;http://elcio.com.br/wp-content/uploads/2015/09/fib.gif&#34; alt=&#34;&#34; width=&#34;480&#34; height=&#34;267&#34; /&gt;
  
  &lt;p class=&#34;wp-caption-text&#34;&gt;
    Executando fib.py e ajuda.
  &lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;√â como PHPDoc ou Javadoc, mas completamente nativo, e com uma sintaxe muito simples. E tudo o que voc√™ precisa para ler a documenta√ß√£o √© o pr√≥prio Python.&lt;/p&gt;

&lt;h2 id=&#34;3-o-ecossistema-python-√©-fant√°stico&#34;&gt;3. O ecossistema Python √© fant√°stico&lt;/h2&gt;

&lt;p&gt;Come√ßando pela pr√≥pria linguagem, que vem com uma excelente &lt;a href=&#34;https://docs.python.org/3/library/&#34;&gt;biblioteca padr√£o&lt;/a&gt;. Essa biblioteca √© bastante extensa e possui excelentes m√≥dulos, bem documentados e f√°ceis de usar. Por exemplo, digamos que voc√™ queira baixar o c√≥digo fonte desse artigo e gerar um arquivo GZip com ele, veja como √© f√°cil:&lt;/p&gt;

&lt;pre&gt;import urllib
import gzip
html=urllib.urlopen(&#39;http://tableless.com.br/por-que-python/&#39;).read()
gzfile=gzip.open(&#39;por-que-python.html.gz&#39;,&#39;w&#39;)
gzfile.write(html)&lt;/pre&gt;

&lt;p&gt;Usamos os m√≥dulos urllib e gzip.¬†Entre os recursos fornecidos pelos m√≥dulos que j√° vem com o Python, posso citar o controle de threads e processamento paralelo, a cria√ß√£o de webservices, bibliotecas para sockets, http, ftp, e-mail, a leitura e escrita de XML, JSON, CSV, o acesso a recursos do sistema operacional, matem√°tica e estat√≠stica, criptografia, manipula√ß√£o de arquivos de √°udio, testes automatizados, etc.&lt;/p&gt;

&lt;p&gt;Como¬†√© f√°cil escrever c√≥digo bom e bem documentado, a comunidade Python tem feito um excelente em fornecer m√≥dulos para praticamente tudo o que voc√™ precisar fazer. Voc√™ pode encontrar, no &lt;a href=&#34;https://pypi.python.org/pypi&#34;&gt;Python Package Index&lt;/a&gt;, milhares de m√≥dulos prontos para coisas como ler e escrever arquivos Excel, trabalhar com imagens, acessar bancos de dados os mais diversos, trabalhar com automa√ß√£o residencial, enviar SMS, integrar seu software ao Gmail, falar com servi√ßos de VoIP, conectar-se a redes sociais, criar um servidor de e-mails, desenvolver jogos 3D, e uma infinidade de outros recursos.&lt;/p&gt;

&lt;h3 id=&#34;e-tem-mais-8230&#34;&gt;E tem mais&amp;#8230;&lt;/h3&gt;

&lt;p&gt;Se voc√™ n√£o programa em Python, espero t√™-lo deixado pelo menos um pouquinho curioso. No pr√≥ximo artigo, vamos falar um pouco mais da linguagem, mostrando algumas caracter√≠sticas da sintaxe e dos tipos de dados que a tornam t√£o interessante. At√© l√°, fique √† vontade nos coment√°rios. Sugest√µes, d√∫vidas, cr√≠ticas e opini√µes s√£o muito bem vindas e v√£o me ajudar a preparar os pr√≥ximos artigos.&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Criando seu pr√≥prio servidor HTTP do zero (ou quase) ‚Äì Parte I</title>
      <link>https://tableless.github.io/hugo-public/criando-seu-proprio-servidor-http-do-zero-ou-quase-parte-i/</link>
      <pubDate>Tue, 01 Sep 2015 00:00:00 +0000</pubDate>
      
      <guid>https://tableless.github.io/hugo-public/criando-seu-proprio-servidor-http-do-zero-ou-quase-parte-i/</guid>
      <description>

&lt;p&gt;Sou apaixonado por tecnologias livres e como sou extremamente curioso, gosto de saber como as coisas funcionam. Como tamb√©m sou cinest√©sico, n√£o me contento em apenas em entender, tenho que criar, recriar, escrever, rescrever, inventar, reinventar, enfim sentir realmente como se faz. Nesse vai e vem de aprendizado, minha √∫ltima curiosidade foi entender como os servidores HTTP funcionam e criar um do zero (ou pelo menos quase).&lt;/p&gt;

&lt;p&gt;√â claro que para fazer isso eu n√£o fui t√£o l√° embaixo a ponto de utilizar C, utilizei da linguagem de programa√ß√£o da qual me sinto mais confort√°vel e que j√° oferece algumas facilidades que em C teria que sangrar pra fazer o mesmo por√©m n√£o imposs√≠vel, mas enfim, optei por desenvolver em Java, os passos vou contar pra voc√™s aqui, mas utilizando os mesmo conceitos nada impede que utilize qualquer outra linguagem de programa√ß√£o.&lt;/p&gt;

&lt;h2 id=&#34;introdu√ß√£o&#34;&gt;Introdu√ß√£o&lt;/h2&gt;

&lt;p&gt;Vamos ao que interessa! A grosso modo, um servidor HTTP √© uma aplica√ß√£o (software) que fornece p√°ginas web (geralmente escritas em HTML), ou seja, ao digitar o endere√ßo da p√°gina (URL) e dar um ENTER no seu navegador, ele envia¬†uma requisi√ß√£o no servidor destino, o servidor processa essa informa√ß√£o e retorna o documento HTML correspondente, por fim o navegador renderiza o documento e exibe aquela p√°gina bonita (nem sempre!).&lt;/p&gt;

&lt;div style=&#34;width: 510px&#34; class=&#34;wp-caption aligncenter&#34;&gt;
  &lt;a href=&#34;http://www.tankonyvtar.hu/en/tartalom/tamop425/0027_ADW1/images/ADW100.png&#34;&gt;&lt;img src=&#34;http://www.tankonyvtar.hu/en/tartalom/tamop425/0027_ADW1/images/ADW100.png&#34; alt=&#34;Requisi√ß√£o HTTP&#34; width=&#34;500&#34; height=&#34;200&#34; /&gt;&lt;/a&gt;
  
  &lt;p class=&#34;wp-caption-text&#34;&gt;
    Requisi√ß√£o HTTP
  &lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Para isso vamos entender como a comunica√ß√£o entre seu navegador e o servidor funciona, o protocolo, depois vamos entender como √© feita a conex√£o, tratar e enviar documentos e por fim vamos deixar nosso servidor pronto para receber m√∫ltiplas conex√µes.&lt;/p&gt;

&lt;h2 id=&#34;o-protocolo-http&#34;&gt;O Protocolo HTTP&lt;/h2&gt;

&lt;p&gt;√â claro que nem so de Web a Internet √© feita, existem uma serie de recursos que est√£o sobre a Internet, a web √© uma delas, mas para que esses servi√ßos sejam tratados como devem √© necess√°rio ter um linguagem comum que permita que o servidor entenda o que o navegador quer, e que o navegador saiba se a resposta do pedido est√° correta ou n√£o, para isso estabelecem-se os protocolos, que s√£o padr√µes estipulados por um √≥rg√£o competente afim de uniformizar o ‚Äútrafego‚Äù de informa√ß√µes de diferentes servi√ßos na internet. Quem define esses padr√µes √© a IETF (Internet Engineering Task Force, ou melhor, For√ßa Tarefa de Engenharia da Internet). Para saber mais quem s√£o eles, acesse &lt;a href=&#34;http://www.ietf.org&#34; target=&#34;_blank&#34;&gt;aqui&lt;/a&gt; (em Ingl√™s)&lt;/p&gt;

&lt;p&gt;O protocolo HTTP, ou Hyper Text Transfer Protocol, ou melhor ainda, protocolo de transferencia de hiper texto, direto e reto √© o cara que define a troca de paginas HTML, pronto falei!. A vers√£o mais atual (que √© a que vamos adotar nesse tutorial por assim dizer) √© a 1.1 que na minha opini√£o √© a mais difundida tamb√©m (pode ser que encontre por ai alguns utilizando a vers√£o 1.0 ou at√© mesmo a 0.9), enfim , essa vers√£o e seus padr√µes foram propostos no documento &lt;a href=&#34;http://www.ietf.org/rfc/rfc2068.txt&#34; target=&#34;_blank&#34;&gt;RFC 2068&lt;/a&gt; e atualizado e alterado por diversos outros RFCs, que n√£o conv√©m a gente falar aqui, mas se tiver curiosidade procura l√° no site da IEFT acima que tem todos.&lt;/p&gt;

&lt;p&gt;So para nos situar o HTTP est√° na camada mais alta do protocolo de comunica√ß√£o de rede conhecido como TCP/IP (n√£o vamos entrar em detalhes pois n√£o √© o foco), chamada camada de aplica√ß√£o (Nada mais justo j√° que o servidor e o navegados s√£o aplica√ß√µes).&lt;/p&gt;

&lt;div style=&#34;width: 430px&#34; class=&#34;wp-caption aligncenter&#34;&gt;
  &lt;a href=&#34;http://static.thegeekstuff.com/wp-content/uploads/2011/10/tcp-ip.png&#34;&gt;&lt;img src=&#34;http://static.thegeekstuff.com/wp-content/uploads/2011/10/tcp-ip.png&#34; alt=&#34;Camadas de Rede (TCP/IP)&#34; width=&#34;420&#34; height=&#34;470&#34; /&gt;&lt;/a&gt;
  
  &lt;p class=&#34;wp-caption-text&#34;&gt;
    Camadas de Rede (TCP/IP)
  &lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;No nosso escopo, o servidor √© um software que fica aguardando solicita√ß√µes, falando em n√≠vel de aplica√ß√£o, o processo √© simples, o navegador (vamos chamar de cliente) envia uma requisi√ß√£o (request), o servidor processa e devolve uma resposta(response).&lt;/p&gt;

&lt;h2 id=&#34;a-requisi√ß√£o&#34;&gt;A Requisi√ß√£o&lt;/h2&gt;

&lt;p&gt;A requisi√ß√£o √© um ‚Äúdocumento‚Äù em texto plano composto por um cabe√ßalho (que define¬† a comunica√ß√£o, requerido) e os dados (opcional, depende da aplica√ß√£o).&lt;/p&gt;

&lt;p&gt;O cabe√ßalho √© bem simples, a primeira linha cont√©m a informa√ß√£o principal da requisi√ß√£o, ou seja, qual a sua solicita√ß√£o (m√©todo), o que est√° sendo solicitado (arquivo/p√°gina/recurso a ser acessado) e padr√£o de comunica√ß√£o que no nosso caso √© o HTTP/1.1, a segunda linha √© o endere√ßo de host do servidor que ir√° responder a sua solicita√ß√£o, veja o exemplo:&lt;/p&gt;

&lt;pre&gt;GET /index.html HTTP/1.1
Host: &lt;a href=&#34;http://google.com&#34;&gt;google.com&lt;/a&gt;&lt;/pre&gt;

&lt;p&gt;As linhas seguintes s√£o informa√ß√µes pertinentes a conex√£o e podem conter informa√ß√µes de quem est√° solicitando, o formato dessas informa√ß√µes √© do tipo &lt;propriedade&gt; : &lt;valor&gt; o final de cada linha √© encerrado por um &lt;CR&gt;&lt;LF&gt; (cuidado, pois muitos confundem este comando com o ENTER, embora para windows esse comando corresponde ao ENTER, n√£o √© verdade para Linux e afins), o final da requisi√ß√£o deve ser uma linha em branco (ou seja apenas um &lt;CR&gt;&lt;LF&gt;)veja o exemplo de uma requisi√ß√£o completa&lt;/p&gt;

&lt;pre&gt;GET /HTTP/1.1
Host: www.google.com.br
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.9; rv:29.0) Gecko/20100101 Firefox/29.0
Accept: text/html,application/xhtml+xml,application/xml
Accept-Language: pt-BR,pt,en-US,en
Accept-Encoding: gzip, deflate
Connection: keep-alive&lt;/pre&gt;

&lt;p&gt;Traduzindo, queremos pegar (GET) a raiz ou p√°gina inicial ( / ) que est√° em ‚Äúwww.google.com.br‚Äù. Esta requisi√ß√£o est√° sendo enviada de um navegador (User-Agent) Firefox, que aceita (Accept) os seguintes formatos, html e xml de preferencia que estejam no idioma (Accept-Language) Portugu√™s do Brasil (pt-BR) ou qualquer outro idioma a seguir (veja que √© poss√≠vel passar uma lista de idiomas na ordem em que gostaria que aparecessem, veja que caso o servidor n√£o tenha nenhuma dessas p√°ginas ou n√£o trate essa propriedade, ele ir√° devolver a p√°gina no idioma padr√£o do html que ele encontrar correspondente a sua solicita√ß√£o), o formato de compacta√ß√£o aceito pelo navegador¬† (Accept-Enconding) e por fim a persist√™ncia da conex√£o, ou seja se voc√™ quer que o servidor mantenha a conex√£o ativa, o que eu quero dizer √© que para cada recurso dentro de uma pagina HTML, seja uma imagem, um estilo css, ou um javascript, que precisa ser carregado, o navegador faz uma nova requisi√ß√£o, n√£o seria legal criar uma nova conex√£o para cada requisi√ß√£o ainda mais se elas acontecem em um curto espa√ßo de tempo, ent√£o o keep-alive mant√©m a conex√£o ‚Äúviva&amp;#8221; tempo pra que esses recursos sejam carregados. √â claro que o protocolo define muito mais propriedades, como pode observar no documento RFC mencionado acima, por√©m cada servidor deve implementar essas funcionalidades, no nosso caso vamos implementar apenas as funcionalidades na requisi√ß√£o de exemplo e algumas mais que mencionaremos mais adiante.&lt;/p&gt;

&lt;h2 id=&#34;a-resposta&#34;&gt;A Resposta&lt;/h2&gt;

&lt;p&gt;A resposta segue um formato bem parecido da requisi√ß√£o, a primeira linha contem o protocolo, o c√≥digo e mensagem de retorno como segue:&lt;/p&gt;

&lt;pre&gt;HTTP/1.1 200 OK&lt;/pre&gt;

&lt;p&gt;Esse c√≥digo √© esperado quando a pagina solicitada foi encontrada e seu conte√∫do est√° enviada logo abaixo do cabe√ßalho (veremos a diante). Existem diversos c√≥digos de retorno de sucesso, e de erro tamb√©m, quem aqui nunca recebeu um 404 Not Found ao tentar acessar uma p√°gina que n√£o existe?, esses e outros detalhes iremos tratar na parte de implementa√ß√£o. Por fim as linhas seguintes da resposta contem algumas informa√ß√µes pertinentes ao navegador e por fim a pagina html solicitada, veja que o conte√∫do √© concatenado com a resposta:&lt;/p&gt;

&lt;pre&gt;HTTP/1.1 200 OK
Date: Tue, 17 Jun 2014 01:20:13 GMT
Server: gws
Location: https://www.google.com.br/
Last-Modified: Tue, 17 Jun 2014 01:20:13 GMT
Content-Encoding: gzip
Content-Length: 234
Connection: closeContent-Type: text/html


&amp;lt;html&amp;gt;todo o html da p√°gina&amp;lt;/html&amp;gt; *&lt;/pre&gt;

&lt;p&gt;*este conte√∫do pode estar compactado&lt;/p&gt;

&lt;p&gt;Nesta resposta o servidor retorna a data da resposta (Date), qual o nome/tipo/empresa que desenvolveu/sistema operacional do servidor que gerou a resposta, a localiza√ß√£o atual (Location) importante caso seu site use caminho relativo em hiperlinks, imagens e outros (veremos com mais detalhes na implementa√ß√£o) ultima vez que o arquivo foi modificado (Last-Modified), importante caso o navegador permita cache de paginas, compactacao do conte√∫do (Content-Enconding), para que o navegador saiba fazer a descompactacao se necess√°rio, tamanho em bytes do¬† conte√∫do,o estado da conex√£o, que neste caso o servidor informa que a conex√£o foi fechado, o tipo do conte√∫do(Content-Type), que √© um texto contendo html e por fim, √© claro, o conte√∫do da resposta, ou seja, aquilo que o navegador ir√° exibir pra gente.&lt;/p&gt;

&lt;p&gt;Quer testar? Ent√£o abra o navegador de sua prefer√™ncia, melhor que seja o firefox =D, em seguida abra o modo de desenvolvedor (geralmente √© so apertar F12), e por fim clique na aba Rede, pronto agora √© so digitar um site na barra de endere√ßo, e acompanhar as requisi√ß√µes pelo console, se quiser mais detalhes clique em uma requisi√ß√£o e pe√ßa para exibir detalhes, se estiver usando o firefox, ele aparece esses detalhes logo na lateral da lista de requisi√ß√µes. analise as propriedades enviadas na requisi√ß√£o e veja qual foi a resposta. voc√™ ir√° percebem que existem mais propriedades do que comentamos aqui, mas para n√≥s neste tutorial n√£o ser√° necess√°rio, se quiser pode pesquisar mais sobre eles ou ler o documento RFC que ja falamos sobre ele.&lt;/p&gt;

&lt;div id=&#34;attachment_17&#34; style=&#34;width: 310px&#34; class=&#34;wp-caption aligncenter&#34;&gt;
  &lt;a href=&#34;http://euamoaweb.com.br.md-54.webhostbox.net/arquivolivre.com.br/wp-content/uploads/2014/06/Screen-Shot-2014-06-17-at-12.00.06-AM.png&#34;&gt;&lt;img class=&#34;wp-image-17 size-medium&#34; src=&#34;http://blog-tsg0.rhcloud.com/wp-content/uploads/2014/06/Screen-Shot-2014-06-17-at-12.00.06-AM-300x165.png&#34; alt=&#34;Requisicao&#34; width=&#34;300&#34; height=&#34;165&#34; /&gt;&lt;/a&gt;
  
  &lt;p class=&#34;wp-caption-text&#34;&gt;
    Requisicao
  &lt;/p&gt;
&lt;/div&gt;

&lt;div id=&#34;attachment_18&#34; style=&#34;width: 310px&#34; class=&#34;wp-caption aligncenter&#34;&gt;
  &lt;a href=&#34;http://euamoaweb.com.br.md-54.webhostbox.net/arquivolivre.com.br/wp-content/uploads/2014/06/Screen-Shot-2014-06-17-at-12.00.34-AM.png&#34;&gt;&lt;img class=&#34;wp-image-18 size-medium&#34; src=&#34;http://blog-tsg0.rhcloud.com/wp-content/uploads/2014/06/Screen-Shot-2014-06-17-at-12.00.34-AM-300x166.png&#34; alt=&#34;Resposta&#34; width=&#34;300&#34; height=&#34;166&#34; /&gt;&lt;/a&gt;
  
  &lt;p class=&#34;wp-caption-text&#34;&gt;
    Resposta
  &lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Chegamos ao fim da primeira parte do nosso tutorial, sei que teoria √© chato mas se faz necess√°rio, mas prometo que na &lt;a href=&#34;http://tableless.com.br/criando-seu-proprio-servidor-http-do-zero-ou-quase-parte-ii/&#34; target=&#34;_blank&#34;&gt;Parte II&lt;/a&gt; colocaremos as m√£os a obra.&lt;/p&gt;

&lt;p&gt;Ent√£o at√© a pr√≥xima.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Desenvolvendo App para Windows Phone com App Studio</title>
      <link>https://tableless.github.io/hugo-public/desenvolvendo-app-para-windows-phone-com-app-studio/</link>
      <pubDate>Thu, 27 Aug 2015 00:00:00 +0000</pubDate>
      
      <guid>https://tableless.github.io/hugo-public/desenvolvendo-app-para-windows-phone-com-app-studio/</guid>
      <description>&lt;p&gt;Para as pessoas que observam a plataforma do Windows Phone, grandes oportunidades est√£o dispon√≠veis para desenvolver solu√ß√µes ainda n√£o desenvolvidas.&lt;/p&gt;

&lt;p&gt;Para deixar a implementa√ß√£o dessas ideias de forma amig√°vel para quem n√£o conhece muito sobre o estudo da programa√ß√£o ou n√£o est√° familiarizado com o desenvolvimento para esse sistema operacional, a Microsoft disponibilizou gratuitamente um sistema web para desenvolvimento de apps para Windows Phone chamado de Windows App Studio.&lt;/p&gt;

&lt;p&gt;N√£o √© necess√°rio codificar linhas de c√≥digo, o que pode poupar tempo para quem deseja desenvolver solu√ß√µes simples, por√©m essa plataforma n√£o descarta o uso da codifica√ß√£o do c√≥digo, tudo vai depender do aplicativo que voc√™ vai desenvolver e se a plataforma atender√° a sua necessidade.&lt;/p&gt;

&lt;p&gt;Desde ¬†o inicio do projeto da sua aplica√ß√£o o App Studio apresenta uma ¬†interface que dispensa a codifica√ß√£o de estruturas de comunica√ß√£o com a internet ou interface gr√°fica por c√≥digo de programa√ß√£o, pois o sistema realiza isso para voc√™ mostrando o preview automaticamente quando √© acrescentado novas ferramentas e funcionalidades no app.&lt;/p&gt;

&lt;div id=&#34;attachment_50960&#34; style=&#34;width: 701px&#34; class=&#34;wp-caption aligncenter&#34;&gt;
  &lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/08/ScreenHunter_11-Aug.-26-00.29.jpg&#34;&gt;&lt;img class=&#34; wp-image-50960&#34; src=&#34;http://tableless.com.br/wp-content/uploads/2015/08/ScreenHunter_11-Aug.-26-00.29.jpg&#34; alt=&#34;Ambiente de desenvolvimento da App Studio&#34; width=&#34;691&#34; height=&#34;362&#34; /&gt;&lt;/a&gt;
  
  &lt;p class=&#34;wp-caption-text&#34;&gt;
    Ambiente de desenvolvimento da App Studio
  &lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;O Aplicativo acima foi desenvolvido usando o App Studio e o mesmo est√° dispon√≠vel para download na loja&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.microsoft.com/pt-br/store/apps/eu-escolhi-esperar/9nblggh2kfjd&#34; target=&#34;_blank&#34;&gt;Ver aplicativo&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Eu poderia apresentar a cria√ß√£o de um aplicativo simples usando essa plataforma, por√©m a Microsoft j√° disponibilizou um v√≠deo ensinando essa ferramenta dispon√≠vel na Microsoft Academy.&lt;/p&gt;

&lt;p&gt;Separei dois videos que ser√° de grande ajuda para contribuir com a sua ideia.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.microsoftvirtualacademy.com/pt-pt/training-courses/crie-seu-primeiro-aplicativo-com-windows-app-studio-8631&#34; target=&#34;_blank&#34;&gt;Assistir: Criando o seu primeiro App&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.microsoftvirtualacademy.com/pt-pt/training-courses/introduo-ao-desenvolvimento-de-aplicativos-mveis-8525&#34; target=&#34;_blank&#34;&gt;Assistir: Criando o seu primeiro App (mais funcionalidades)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Agora √© s√≥ colocar a sua ideia em desenvolvimento! e qualquer d√∫vida estou a disposi√ß√£o.&lt;/p&gt;

&lt;p&gt;Abra√ßo e at√© o pr√≥ximo post.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Iniciando com Symfony 2 ‚Äì Parte Final</title>
      <link>https://tableless.github.io/hugo-public/iniciando-com-symfony-2-parte-final/</link>
      <pubDate>Tue, 16 Jun 2015 00:00:00 +0000</pubDate>
      
      <guid>https://tableless.github.io/hugo-public/iniciando-com-symfony-2-parte-final/</guid>
      <description>

&lt;p&gt;Chegamos ao final da nossa s√©rie sobre Symfony. Se voc√™ n√£o leu os outros, no final do artigo h√° uma &lt;a href=&#34;#other-posts-symfony&#34;&gt;listagem com todos os artigos&lt;/a&gt; j√° publicados dessa s√©rie.&lt;/p&gt;

&lt;p&gt;No &lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-09/&#34; target=&#34;_blank&#34;&gt;tutorial anterior&lt;/a&gt;, instalamos e configuramos o bundle StofDoctrineExtensionsBundle, para fazermos os slugs de nossos posts, agora vamos instalar e configurar o Bundle FOSUserBundle, para fazer a autentica√ß√£o da √°rea administrativa do nosso blog.&lt;/p&gt;

&lt;h2 id=&#34;instala√ß√£o-do-bundle-fosuserbundle&#34;&gt;Instala√ß√£o do bundle FOSUserBundle.&lt;/h2&gt;

&lt;p&gt;Para instalar o FOSUserBundle, temos que adicion√°-lo em nosso composer.json. Abra o arquivo composer.json e adicione a linha abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;&#34;friendsofsymfony/user-bundle&#34;: &#34;1.3.*&#34;
&lt;/pre&gt;

&lt;p&gt;Depois de adicionando o FOSUserBundle no composer, vamos instal√°- lo. Entre no terminal e digite:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ composer update
&lt;/pre&gt;

&lt;p&gt;Ap√≥s o Download, o FOSUserBundle est√° instalado em nossa aplica√ß√£o.&lt;/p&gt;

&lt;h2 id=&#34;configurando-o-fosuserbundle&#34;&gt;Configurando o FOSUserBundle.&lt;/h2&gt;

&lt;p&gt;A primeira configura√ß√£o que devemos fazer, √© registrar o novo bundle instalado, para isso entre no AppKernel, caminho: app/AppKernel.php&lt;/p&gt;

&lt;p&gt;Adicione a linha abaixo no registro de bundles:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;new FOS\UserBundle\FOSUserBundle(),
&lt;/pre&gt;

&lt;p&gt;Veja na linha 18:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;class AppKernel extends Kernel 
{ 
    public function registerBundles() 
    { 
        $bundles = array( 
            new Symfony\Bundle\FrameworkBundle\FrameworkBundle(), 
            new Symfony\Bundle\SecurityBundle\SecurityBundle(), 
            new Symfony\Bundle\TwigBundle\TwigBundle(), 
            new Symfony\Bundle\MonologBundle\MonologBundle(), 
            new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(), 
            new Symfony\Bundle\AsseticBundle\AsseticBundle(), 
            new Doctrine\Bundle\DoctrineBundle\DoctrineBundle(), 
            new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(), 
            new Tableless\CoreBundle\TablelessCoreBundle(), 
            new Tableless\ModelBundle\TablelessModelBundle(), 
         new Knp\Bundle\PaginatorBundle\KnpPaginatorBundle(),
         new Stof\DoctrineExtensionsBundle\StofDoctrineExtensionsBundle(),
         new FOS\UserBundle\FOSUserBundle(),
        );

...
&lt;/pre&gt;

&lt;p&gt;Pronto, o FOSUserBundle est√° registrado.&lt;/p&gt;

&lt;p&gt;Agora vamos fazer as configura√ß√µes no arquivo config.yml, caminho: app/config/config.yml.&lt;/p&gt;

&lt;p&gt;Para que o sistema de login venha traduzido, devemos descomentar a linha translator em framework, veja na linha 3 do c√≥digo abaixo:&lt;/p&gt;

&lt;p&gt;De:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;framework:
    #esi:             ~
    #translator:      { fallback: &#34;%locale%&#34; }
&lt;/pre&gt;

&lt;p&gt;Para:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;framework:
    #esi:             ~
    translator:      { fallback: &#34;%locale%&#34; }
&lt;/pre&gt;

&lt;p&gt;No final do arquivo adicione as configura√ß√µes abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;# FOSUser
fos_user:
    db_driver: orm # other valid values are &#39;mongodb&#39;, &#39;couchdb&#39; and &#39;propel&#39;
    firewall_name: main
    user_class: Tableless\UserBundle\Entity\User
&lt;/pre&gt;

&lt;p&gt;Perceba que na configura√ß√£o acima, estamos indicando uma entidade User, por√©m ainda n√£o existente, vamos cri√°-la.&lt;/p&gt;

&lt;h2 id=&#34;criando-o-bundle-userbundle&#34;&gt;Criando o bundle UserBundle.&lt;/h2&gt;

&lt;p&gt;Continuando com nossas configura√ß√µes, podemos criar um novo bundle para que o mesmo fique respons√°vel pelo gerenciamento dos usu√°rios, em nosso caso, vamos criar o bundle, por√©m s√≥ vamos usar para configurar a entidade User, caso queiram fazer outras configura√ß√µes, o bundle j√° est√° criado.&lt;/p&gt;

&lt;p&gt;Entre no terminal e digite:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console generate:bundle
&lt;/pre&gt;

&lt;p&gt;Digitamos a namespace:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;Bundle namespace: Tableless/UserBundle
&lt;/pre&gt;

&lt;p&gt;O console nos sugere um nome, vamos deixar como est√°, apenas damos enter:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;Bundle name [TablelessUserBundle]:
&lt;/pre&gt;

&lt;p&gt;No caminho, apenas damos enter:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;Target directory [/media/candidosouza/Development/GITHUB/tableless/symfony/src]:
&lt;/pre&gt;

&lt;p&gt;Usaremos annotation para configura√ß√µes:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;Configuration format (yml, xml, php, or annotation): annotation
&lt;/pre&gt;

&lt;p&gt;N√£o vamos querer a gera√ß√£o de toda a estrutura de um bundle, apenas damos enter:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;Do you want to generate the whole directory structure [no]? 
&lt;/pre&gt;

&lt;p&gt;Vamos confirmar a gera√ß√£o do novo bundle, damos enter:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;Do you confirm generation [yes]? 
&lt;/pre&gt;

&lt;p&gt;E vamos registrar esse bundle, somente enter:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;Confirm automatic update of your Kernel [yes]?
&lt;/pre&gt;

&lt;p&gt;E gerar as rotas, damos enter:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;Confirm automatic update of the Routing [yes]?
&lt;/pre&gt;

&lt;p&gt;Pronto, nosso bundle UserBundle est√° criado, veja:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/06/01.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/06/01.png&#34; alt=&#34;pasta&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-49557&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Nosso bundle est√° criado, vamos criar nossa entidade User.&lt;/p&gt;

&lt;h2 id=&#34;criando-a-entidade-user&#34;&gt;Criando a Entidade User.&lt;/h2&gt;

&lt;p&gt;Vamos entrar no bundle UserBundle, caminho src/Tableless/UserBundle/, e vamos criar uma pasta chamada Entity. Nessa pasta vamos criar uma classe User, que ser√° nossa entidade, veja:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/06/02.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/06/02.png&#34; alt=&#34;Entidade User&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-49558&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;A nossa entidade User tem que estender a entidade User do FOSUserBundle, vamos dar um use nessa classe e vamos apelida l√° de BaseUser, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;use FOS\UserBundle\Entity\User as BaseUser;
&lt;/pre&gt;

&lt;p&gt;Tamb√©m temos que passar as configura√ß√µes (mapear nossa entidade) via annotation, vamos dar um use na classe Mapping do Doctrine e apelida l√° de ORM, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;use Doctrine\ORM\Mapping as ORM;
&lt;/pre&gt;

&lt;p&gt;Nossa Entidade ter√° apenas um atributo id, e um m√©todo construtor que chamar√° construtor pai de entidade BaseUser, juntamente com as respectivas annotations, veja nossa entidade User pronta:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;?php

namespace Tableless\UserBundle\Entity;

use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name=&#34;fos_user&#34;)
 */
class User extends BaseUser
{
    /**
     * @ORM\Id
     * @ORM\Column(type=&#34;integer&#34;)
     * @ORM\GeneratedValue(strategy=&#34;AUTO&#34;)
     */
    protected $id;

    public function __construct()
    {
        parent::__construct();
    }
}
&lt;/pre&gt;

&lt;h2 id=&#34;configura√ß√µes-de-seguran√ßa&#34;&gt;Configura√ß√µes de seguran√ßa.&lt;/h2&gt;

&lt;p&gt;Para configurar a parte de seguran√ßa, temos que editar o arquivo security.yml, respons√°vel pela parte de seguran√ßa do Symfony, abra o arquivo, caminho: app/config/security.yml.&lt;/p&gt;

&lt;p&gt;Abrindo o arquivo, vamos perceber que o Symfony est√° configurando o provider via mem√≥ria, vamos alterar o provider.&lt;/p&gt;

&lt;p&gt;De:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;providers:
    in_memory:
        memory: ~
&lt;/pre&gt;

&lt;p&gt;Para:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;providers:
    fos_userbundle:
        id: fos_user.user_provider.username
&lt;/pre&gt;

&lt;p&gt;Para criptografar a senha do usu√°rio vamos configurar um encoder, incluindo o c√≥digo abaixo, que usar√° o algoritmo sha512, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;encoders:
        FOS\UserBundle\Model\UserInterface: sha512
&lt;/pre&gt;

&lt;p&gt;Agora vamos configurar a parte de firewalls, onde estabeleceremos o pattern para ativa√ß√£o do firewalls, que pelo acesso da url ser√° ativado, e qual o tipo de provider que ser√° usado para o processo de autentica√ß√£o, tamb√©m passaremos o processo de autentica√ß√£o apenas pelo formul√°rio, n√£o permitindo outro tipo de requisi√ß√£o, usando o csrf_provider. Vamos permitir o logout, e usu√°rios an√¥nimos nas √°reas n√£o restritas, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;firewalls:
        main:
            pattern: ^/
            form_login:
                provider: fos_userbundle
                csrf_provider: form.csrf_provider
            logout:       true
            anonymous:    true
&lt;/pre&gt;

&lt;p&gt;Temos que passar qual o tipo de acesso o usu√°rio ter√° que ter, para acessar determinadas urls, ex: o usu√°rio an√¥nimo, s√≥ poder√° acessar as urls: qualquer-url/login, qualquer-url/register, e qualquer-url/resetting, e apenas usu√°rios administradores, poder√£o acessar a url: qualquer-url/admin/, para isso passaremos a configura√ß√£o de controle de acesso, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;access_control:
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin/, role: ROLE_ADMIN }
&lt;/pre&gt;

&lt;p&gt;Temos que configurar a hierarquia de usu√°rios cadastrados, onde o admin, poder√° ser qualquer usu√°rio cadastrado, e o super admin, ser√° o administrador com total acesso, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: ROLE_ADMIN
&lt;/pre&gt;

&lt;p&gt;Veja o arquivo security.yml pronto:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;security:
    providers:
        fos_userbundle:
            id: fos_user.user_provider.username

    encoders:
        FOS\UserBundle\Model\UserInterface: sha512

    firewalls:
        main:
            pattern: ^/
            form_login:
                provider: fos_userbundle
                csrf_provider: form.csrf_provider
            logout:       true
            anonymous:    true

    access_control:
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin/, role: ROLE_ADMIN }

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: ROLE_ADMIN
&lt;/pre&gt;

&lt;p&gt;Pronto as configura√ß√µes de seguran√ßa, est√£o prontas.&lt;/p&gt;

&lt;p&gt;E para finalizar as configura√ß√µes, temos que passar as rotas do FOSUserBundle onde ficar√£o registradas no sistema, para isso abra o arquivo routing.yml, caminho: app/config/routing.yml.&lt;/p&gt;

&lt;p&gt;Com o arquivo aberto vamos inserir as rotas abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;# FOSUser
fos_user_security:
    resource: &#34;@FOSUserBundle/Resources/config/routing/security.xml&#34;

fos_user_profile:
    resource: &#34;@FOSUserBundle/Resources/config/routing/profile.xml&#34;
    prefix: /profile

fos_user_register:
    resource: &#34;@FOSUserBundle/Resources/config/routing/registration.xml&#34;
    prefix: /register

fos_user_resetting:
    resource: &#34;@FOSUserBundle/Resources/config/routing/resetting.xml&#34;
    prefix: /resetting

fos_user_change_password:
    resource: &#34;@FOSUserBundle/Resources/config/routing/change_password.xml&#34;
    prefix: /profile
&lt;/pre&gt;

&lt;p&gt;Para que tudo ocorra bem, temos que atualizar o banco de dados, para criar a tabela dos usu√°rios, entre no terminal e digite:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;php app/console doctrine:schema:update --force
&lt;/pre&gt;

&lt;p&gt;veja:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/06/03.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/06/03.png&#34; alt=&#34;Tabela do banco de dados&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-49559&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;estilizando-as-templates-do-fosuserbundle&#34;&gt;Estilizando as templates do FOSUserBundle.&lt;/h2&gt;

&lt;p&gt;O FOSUserBundle est√° configurado e instalado em nosso sistema, para que possamos test√°-lo, entre no terminal e digite:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;php app/console router:debug
&lt;/pre&gt;

&lt;p&gt;E veremos todas as rotas criadas em nosso sistema atrav√©s FOSUserBundle, veja:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/06/04.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/06/04.png&#34; alt=&#34;Router Debug&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-49561&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Podemos entrar em todas as rotas, e perceberemos que est√° sem estiliza√ß√£o, por exemplo: a rota /register/, se acessamos no navegador essa rota: url: &lt;a href=&#34;http://127.0.0.1:8000/register/&#34;&gt;http://127.0.0.1:8000/register/&lt;/a&gt; veja:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/06/05.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/06/05.png&#34; alt=&#34;tela de registro&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-49562&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Est√° funcionando perfeitamente, por√©m sem estiliza√ß√£o. Vou explicar como fazer para melhorarmos isso, por√©m n√£o vou me aprofundar.&lt;/p&gt;

&lt;p&gt;As templates do FOSUserBundle est√£o todas na pasta friendsofsymfony dentro do diret√≥rio vendor/, por√©m, sabemos que nunca devemos mexer em nada no diret√≥rio vendor, entretanto podemos sobrescrever essas templates principais do FOSUserBundle, para isso vamos criar uma pasta chamada FOSUserBundle em app/Resources, e dentro da pasta criada, vamos criar outra pasta chamada views, veja:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/06/06.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/06/06.png&#34; alt=&#34;Pasta views&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-49563&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;O FOSUserBundle, trabalha com um layout principal, para que possamos sobrescrev√™-lo, dentro da pasta views, vamos criar um arquivo chamado layout.html.twig e estender a nossa template base j√° criada anteriormente. A tamplate layout.html.twig ficar√° dessa forma, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;{% extends &#39;::base.html.twig&#39; %}

{% block title %}Blog Administra√ß√£o{% endblock %}

{% block content %}
    {% block fos_user_content %}{% endblock %}
{% endblock %}
&lt;/pre&gt;

&lt;p&gt;Pronto, se acessarmos novamente o url: &lt;a href=&#34;http://127.0.0.1:8000/register/&#34;&gt;http://127.0.0.1:8000/register/&lt;/a&gt;, teremos o resultado:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/06/07.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/06/07.png&#34; alt=&#34;Tela de registro pronta&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-49564&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Pronto, ficou melhor que anteriormente, por√©m podemos melhorar essa estiliza√ß√£o, em meu caso vou deixar como est√°, mas caso queiram, √© s√≥ criar um arquivo css com as devidas estiliza√ß√µes, e cham√°- lo no base.html.twig que configuramos no &lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-06/&#34; target=&#34;_blank&#34;&gt;tutorial 06&lt;/a&gt;, ou usar o pr√≥prio bootstrap, e fazer as altera√ß√µes nos arquivos.&lt;/p&gt;

&lt;p&gt;Obs: Podemos sobrescrever todos os arquivos do FOSUserBundle, por√©m temos que criar os arquivos e as estruturas de pastas, como no original. &lt;a href=&#34;https://github.com/FriendsOfSymfony/FOSUserBundle/tree/1.3.x/Resources/views&#34; target=&#34;_blank&#34; rel=&#34;nofollow&#34;&gt;Veja o original&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Dessa forma podemos usar as classes do bootstrap para a estiliza√ß√£o nos arquivos sobrescritos que foram criados, caso queiram ter uma base, tem um projeto em meu Github, que foi criado dessa forma, &lt;a href=&#34;https://github.com/candidosouza/management-cars/tree/master/app/Resources/FOSUserBundle/views/Registration&#34; target=&#34;_blank&#34; rel=&#34;nofollow&#34;&gt;veja&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;criando-um-administrador&#34;&gt;Criando um Administrador&lt;/h2&gt;

&lt;p&gt;Podemos criar os usu√°rios pela url: &lt;a href=&#34;http://127.0.0.1:8000/register/&#34;&gt;http://127.0.0.1:8000/register/&lt;/a&gt;, por√©m os usu√°rios criados ser√£o usu√°rios normais do sistema, para criar um super administrador entre no terminal, e digite:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;php app/console
&lt;/pre&gt;

&lt;p&gt;Podemos perceber que agora temos mais op√ß√µes, pois instalamos o FOSUserBundle, veja:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/06/08.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/06/08.png&#34; alt=&#34;Novos comandos&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-49565&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;E para criar um usu√°rio administrador digitamos:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;php app/console fos:user:create
&lt;/pre&gt;

&lt;p&gt;damos um nome, um e-mail e senha, veja:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/06/09.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/06/09.png&#34; alt=&#34;Criando usu√°rio&#34; width=&#34;750&#34; height=&#34;150&#34; class=&#34;alignnone size-full wp-image-49566&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Por√©m o usu√°rio criado, ainda √© um usu√°rio normal, vamos torn√°-lo um administrador, ainda no terminal, digite:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;php app/console fos:user:promote
&lt;/pre&gt;

&lt;p&gt;Escolhemos o usu√°rio que no meu caso √© admin.&lt;/p&gt;

&lt;p&gt;Digitamos o Role que queremos, no meu caso ROLE_ADMIN&lt;/p&gt;

&lt;p&gt;E pronto, j√° temos um administrador do sistema.&lt;/p&gt;

&lt;h2 id=&#34;restringindo-o-acesso-no-sistema&#34;&gt;Restringindo o acesso no sistema.&lt;/h2&gt;

&lt;p&gt;Para que um usu√°rio an√¥nimo n√£o tenha acesso a administra√ß√£o, ( em nosso caso a administra√ß√£o de autores e administra√ß√£o de posts), vamos entrar novamente em security.yml, caminho: app/config/security.yml, e vamos alterar o controle de acesso, dizendo que todo o usu√°rio que entrar na rota /post/ e /author/ dever√° ser um usu√°rio cadastrado, veja na linha 5 e 6:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;access_control:
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/author/, role: ROLE_USER }
        - { path: ^/post/, role: ROLE_USER }
        - { path: ^/admin/, role: ROLE_ADMIN }
&lt;/pre&gt;

&lt;p&gt;Pronto, dessa forma todos os usu√°rios que acessarem as urls: &lt;a href=&#34;http://127.0.0.1:8000/post/&#34;&gt;http://127.0.0.1:8000/post/&lt;/a&gt; e &lt;a href=&#34;http://127.0.0.1:8000/author/&#34;&gt;http://127.0.0.1:8000/author/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;dever√£o ser cadastrados como usu√°rios, como autores do blog ou administradores.&lt;/p&gt;

&lt;p&gt;Obs: Quando o usu√°rio an√¥nimo acessar as urls citadas acima, ser√£o redirecionados para a tela de login.&lt;/p&gt;

&lt;p&gt;Podemos fazer v√°rias restri√ß√µes, exemplo: vamos dizer que o usu√°rio autor, pode: visualizar, criar, editar, e deletar um post, por√©m, ele n√£o pode: criar, nem editar, menos ainda deletar outro autor, para isso entre no AuthorController, caminho: src/Tableless/CoreBundle/Controller/AuthorController.php&lt;/p&gt;

&lt;p&gt;Primeiramente damos um use em AccessDeniedException, na classe AuthorController, veja.&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;use Symfony\Component\Security\Core\Exception\AccessDeniedException;
&lt;/pre&gt;

&lt;p&gt;Nos m√©todos createAction, newAction, editAction, updateAction e deleteAction, vamos restringir o acesso do usu√°rio normal, onde verificaremos se ele √© um administrador, e caso n√£o seja, vamos gerar um erro, veja o c√≥digo de verifica√ß√£o abaixo, onde introduziremos em todos os m√©todos citados acima, :&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;$securityContext = $this-&amp;gt;get(&#39;security.context&#39;);

        if (!$securityContext-&amp;gt;isGranted(&#39;ROLE_ADMIN&#39;)) {
            throw new AccessDeniedException(&#34; Somente o administrador pode acessar! &#34;);
        }
&lt;/pre&gt;

&lt;p&gt;Exemplo no createAction, nos demais m√©todos ser√£o iguais, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/**
* Creates a new Author entity.
*
* @Route(&#34;/&#34;, name=&#34;author_create&#34;)
* @Method(&#34;POST&#34;)
* @Template(&#34;TablelessCoreBundle:Author:new.html.twig&#34;)
*/
public function createAction(Request $request)
{
   $securityContext = $this-&amp;gt;get(&#39;security.context&#39;);

   if (!$securityContext-&amp;gt;isGranted(&#39;ROLE_ADMIN&#39;)) {
      throw new AccessDeniedException(&#34; Somente o administrador pode acessar! &#34;);
   }

    $entity = new Author();
    $form = $this-&amp;gt;createCreateForm($entity);
    $form-&amp;gt;handleRequest($request);

    if ($form-&amp;gt;isValid()) {
        $em = $this-&amp;gt;getDoctrine()-&amp;gt;getManager();
        $em-&amp;gt;persist($entity);
        $em-&amp;gt;flush();

     return $this-&amp;gt;redirect($this-&amp;gt;generateUrl(&#39;author_show&#39;, array(&#39;id&#39; =&amp;gt; $entity&amp;gt; getId())));
   }

   return array(
   &#39;entity&#39; =&amp;gt; $entity,
       &#39;form&#39;   =&amp;gt; $form-&amp;gt;createView(),
   );
}
&lt;/pre&gt;

&lt;p&gt;Veja o erro caso o usu√°rio n√£o tenha acesso:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/06/10.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/06/10.png&#34; alt=&#34;Erro de usu√°rio n√£o autorizado&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-49583&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Pronto!&lt;/p&gt;

&lt;p&gt;Podemos fazer outros tipos de restri√ß√µes, podemos melhorar a seguran√ßa em nosso blog, por√©m no meu caso vou parar por aqui, com o exemplo acima, acredito que temos uma base de como fazer as demais restri√ß√µes.&lt;/p&gt;

&lt;h2 id=&#34;dicas&#34;&gt;Dicas:&lt;/h2&gt;

&lt;p&gt;Nos tutoriais abordei o b√°sico de como trabalhar com o Symfony 2. Recomendo sempre a documenta√ß√£o para aux√≠lio.&lt;/p&gt;

&lt;p&gt;Gostaria de deixar algumas dicas para estudos, que n√£o foram abordados:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://symfony.com/doc/current/book/service_container.html&#34; target=&#34;_blank&#34;&gt;Services&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://symfony.com/doc/current/book/performance.html&#34; target=&#34;_blank&#34;&gt;Performance&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://symfony.com/doc/current/book/testing.html&#34; target=&#34;_blank&#34;&gt;Testing&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://symfony.com/doc/current/book/http_cache.html&#34; target=&#34;_blank&#34;&gt;HTTP Cache:&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://symfony.com/doc/current/book/translation.html&#34; target=&#34;_blank&#34;&gt;Translation:&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;other-posts-symfony&#34;&gt;Conclus√£o.&lt;/h2&gt;

&lt;p&gt;Esta √© a √∫ltima parte da s√©rie ‚ÄúIniciando com Symfony 2‚Äù, espero ter sido √∫til.&lt;/p&gt;

&lt;p&gt;Bons estudos!&lt;/p&gt;

&lt;p&gt;Links dos tutoriais anteriores:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2/&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì Instala√ß√£o&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-02/&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 02&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-03/&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 03&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-04/&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 04&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-05/&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 05&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-06/&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 06&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-07/&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 07&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-08/&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 08&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-09/&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 09&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;O projeto¬†encontra-se no &lt;a href=&#34;https://github.com/candidosouza/tableless&#34; target=&#34;_blank&#34;&gt;GitHub&lt;/a&gt;!&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Iniciando com Symfony 2 ‚Äì Parte 09</title>
      <link>https://tableless.github.io/hugo-public/iniciando-com-symfony-2-parte-09/</link>
      <pubDate>Sun, 24 May 2015 00:00:00 +0000</pubDate>
      
      <guid>https://tableless.github.io/hugo-public/iniciando-com-symfony-2-parte-09/</guid>
      <description>

&lt;p&gt;No &lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-08/&#34; title=&#34;tutorial anterior&#34; target=&#34;_blank&#34;&gt;tutorial anterior&lt;/a&gt;, instalamos e configuramos o bundle Knp Paginator, para fazer a pagina√ß√£o de posts em nosso index, agora vamos instalar e configurar o Bundle StofDoctrineExtensionsBundle, para fazermos os slugs de nossos posts&lt;/p&gt;

&lt;h2 id=&#34;instala√ß√£o-do-bundle-stofdoctrineextensionsbundle&#34;&gt;Instala√ß√£o do bundle StofDoctrineExtensionsBundle&lt;/h2&gt;

&lt;p&gt;Para instalar o StofDoctrineExtensionsBundle, temos que adicion√°-lo em nosso composer.json. Abra o arquivo composer.json e adicione a linha abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&#34;stof/doctrine-extensions-bundle&#34;: &#34;1.2.*@dev&#34;
&lt;/pre&gt;

&lt;p&gt;Depois de adicionando o StofDoctrineExtensionsBundle no composer, vamos instal√°- lo. Entre no terminal e digite:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ composer update
&lt;/pre&gt;

&lt;p&gt;Ap√≥s o Download, o StofDoctrineExtensionsBundle est√° instalado em nossa aplica√ß√£o.&lt;/p&gt;

&lt;h2 id=&#34;configurando-o-stofdoctrineextensionsbundle&#34;&gt;Configurando o StofDoctrineExtensionsBundle&lt;/h2&gt;

&lt;p&gt;A primeira configura√ß√£o que devemos fazer, √© registrar o novo bundle instalado, para isso entre no AppKernel, caminho: app/AppKernel.php&lt;/p&gt;

&lt;p&gt;Adicione a linha abaixo no registro de bundles:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;new Stof\DoctrineExtensionsBundle\StofDoctrineExtensionsBundle(),
&lt;/pre&gt;

&lt;p&gt;Veja na linha 17:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;class AppKernel extends Kernel 
{ 
    public function registerBundles() 
    { 
        $bundles = array( 
            new Symfony\Bundle\FrameworkBundle\FrameworkBundle(), 
            new Symfony\Bundle\SecurityBundle\SecurityBundle(), 
            new Symfony\Bundle\TwigBundle\TwigBundle(), 
            new Symfony\Bundle\MonologBundle\MonologBundle(), 
            new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(), 
            new Symfony\Bundle\AsseticBundle\AsseticBundle(), 
            new Doctrine\Bundle\DoctrineBundle\DoctrineBundle(), 
            new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(), 
            new Tableless\CoreBundle\TablelessCoreBundle(), 
            new Tableless\ModelBundle\TablelessModelBundle(), 
        new Knp\Bundle\PaginatorBundle\KnpPaginatorBundle(),
        new Stof\DoctrineExtensionsBundle\StofDoctrineExtensionsBundle(),
        );

...

&lt;/pre&gt;

&lt;p&gt;Pronto, o StofDoctrineExtensionsBundle est√° registrado.&lt;/p&gt;

&lt;p&gt;Agora vamos fazer as configura√ß√µes no arquivo config.yml, caminho: app/config/config.yml&lt;/p&gt;

&lt;p&gt;No final do arquivo adicione as configura√ß√µes abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;stof_doctrine_extensions:
    orm:
        default:
            sluggable: true
&lt;/pre&gt;

&lt;h2 id=&#34;configurando-a-entidade-post&#34;&gt;Configurando a entidade Post&lt;/h2&gt;

&lt;p&gt;Temos que configurar nossa entidade post, para que a mesma receba os slugs. Entre na entidade post, caminho: src/Tableless/ModelBundle/Entity/Post.php&lt;/p&gt;

&lt;p&gt;Vamos dar um use em Annotation, e apelid√°-la de Gedmo veja abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;use Gedmo\Mapping\Annotation as Gedmo;
&lt;/pre&gt;

&lt;p&gt;Agora vamos criar uma propriedade privada chamada slug, com as suas annotations correspondentes, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/**
     * @var string
     *
     * @Gedmo\Slug(fields={&#34;title&#34;}, unique=false)
     * @ORM\Column(length=255)
     */
     private $slug;

...

&lt;/pre&gt;

&lt;p&gt;Temos que gerar os getters e setters, para isso vamos entrar no terminal e digitar:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console generate:doctrine:entities TablelessModelBundle:Post
&lt;/pre&gt;

&lt;p&gt;Pronto, em nossa entidade Post, temos os getters e setters, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/**
     * Set slug
     *
     * @param string $slug
     *
     * @return Post
     */
    public function setSlug($slug)
    {
        $this-&amp;gt;slug = $slug;

        return $this;
    }

    /**
     * Get slug
     *
     * @return string
     */
    public function getSlug()
    {
        return $this-&amp;gt;slug;
    }

...
&lt;/pre&gt;

&lt;h2 id=&#34;configurando-o-banco-de-dados&#34;&gt;Configurando o Banco de Dados&lt;/h2&gt;

&lt;p&gt;Depois de nossa entidade configurada, temos que atualizar o banco de dados, por√©m se tivermos posts j√° criados, ocorrer√° um erro em nosso blog. Caso n√£o tenha nenhum post escrito poder√° rodar o comando abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console doctrine:schema:update ‚Äìforce
&lt;/pre&gt;

&lt;p&gt;Caso tenha escrito algum post para exemplo, como no meu caso, vamos excluir o banco de dados, e cri√° lo novamente. Entre no terminal e digite:&lt;/p&gt;

&lt;p&gt;Excluindo o banco de dados:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;$ php app/console doctrine:database:drop --force
&lt;/pre&gt;

&lt;p&gt;Criando o banco de dados novamente:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console doctrine:database:create
&lt;/pre&gt;

&lt;p&gt;Criando as tabelas:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console doctrine:schema:create
&lt;/pre&gt;

&lt;p&gt;Obs: Caso tenha posts escritos, e n√£o queria excluir o banco de dados, poder√° apenas atualiz√°-lo, por√©m ter√° que adicionar manualmente, slug por slug em cada post no banco de dados, sen√£o ocorrer√° erro na aplica√ß√£o.&lt;/p&gt;

&lt;p&gt;Veja a estrutura do banco de dados:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/05/01.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/05/01.png&#34; alt=&#34;Banco de dados&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-48547&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;configurando-o-controller&#34;&gt;Configurando o Controller&lt;/h2&gt;

&lt;p&gt;Depois de termos feito as configura√ß√µes citadas acima, vamos configurar nosso controller, para isso entre no IndexControlerController, caminho: src/Tableless/CoreBundle/Controller/IndexControlerController.php&lt;/p&gt;

&lt;p&gt;No nosso m√©todo showAction, estamos passando por par√¢metro o $id, no momento n√£o queremos mais buscar nossos posts pelo id, e sim pelo slug, vamos alterar:&lt;/p&gt;

&lt;p&gt;de:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;public function showAction($id)
&lt;/pre&gt;

&lt;p&gt;para:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;public function showAction($slug)
&lt;/pre&gt;

&lt;p&gt;Temos que mudar tamb√©m a annotation da rota, veja:&lt;/p&gt;

&lt;p&gt;de:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;* @Route(&#34;/show/{id}&#34;, name=&#34;show&#34;)
&lt;/pre&gt;

&lt;p&gt;para:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;* @Route(&#34;/show/{slug}&#34;, name=&#34;show&#34;)
&lt;/pre&gt;

&lt;p&gt;Estamos passando para a vari√°vel $post, o m√©todo find, e recuperando o id, vamos mudar o find para findOneBy e passar um array de slug, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;...

$post = $em-&amp;gt;getRepository(&#39;TablelessModelBundle:Post&#39;)-&amp;gt;findOneBy([
            &#39;slug&#39; =&amp;gt; $slug
        ]);

...

&lt;/pre&gt;

&lt;p&gt;Veja o m√©todo showAction pronto:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;...

    /**
     * @Route(&#34;/post/{slug}&#34;, name=&#34;show&#34;)
     * @Template()
     */
    public function showAction($slug)
    {
        $em = $this-&amp;gt;getDoctrine()-&amp;gt;getManager();

        $post = $em-&amp;gt;getRepository(&#39;TablelessModelBundle:Post&#39;)-&amp;gt;findOneBy([
            &#39;slug&#39; =&amp;gt; $slug
        ]);

        if (!$post) {
            throw $this-&amp;gt;createNotFoundException(&#39;O post n√£o existe! Volte para home!&#39;);
        }

        return [
            &#39;post&#39; =&amp;gt; $post,
        ];
    }
 
    ...
&lt;/pre&gt;

&lt;h2 id=&#34;configurando-o-index&#34;&gt;Configurando o index&lt;/h2&gt;

&lt;p&gt;Em nossa index, estamos passando os links para que os posts sejam buscados pelo id, por√©m temos que alter√°- los para que possamos buscar os posts pelo slug.&lt;/p&gt;

&lt;p&gt;Entre no index.html.twig, caminho: src/Tableless/CoreBundle/Resources/views/IndexController/Index.html.twig&lt;/p&gt;

&lt;p&gt;Vamos alterar os links:&lt;/p&gt;

&lt;p&gt;No meu caso a linha 21, 29 e 35:&lt;/p&gt;

&lt;p&gt;de:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;&amp;lt;a href=&#34;{{ path(&#39;show&#39;, { &#39;id&#39;: post.id }) }}&#34;&amp;gt;
&lt;/pre&gt;

&lt;p&gt;para:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;&amp;lt;a href=&#34;{{ path(&#39;show&#39;, { slug: post.slug }) }}&#34;&amp;gt;
&lt;/pre&gt;

&lt;p&gt;Testando nossa aplica√ß√£o:&lt;/p&gt;

&lt;p&gt;Caso tenham seguido o tutorial e exclu√≠do o bando de dados, que foi criado novamente, como no meu caso. Antes de criarmos um post, temos que criar os autores novamente, depois sim criarmos os posts. No meu caso vou criar apena um post para exemplo.&lt;/p&gt;

&lt;p&gt;Depois do post criado, click no link e observe a url, ver√° o slug, que em nosso caso √© o slug do titulo, veja:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/05/02.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/05/02.png&#34; alt=&#34;Urls&#34; width=&#34;750&#34; height=&#34;50&#34; class=&#34;alignnone size-full wp-image-48548&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;conclus√£o&#34;&gt;Conclus√£o&lt;/h2&gt;

&lt;p&gt;Pronto, nosso simples projeto est√° retornando o slug dos post em nossa url.&lt;/p&gt;

&lt;p&gt;Links dos tutoriais anteriores:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2/&#34; title=&#34;instala√ß√£o&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì Instala√ß√£o&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-02/&#34; title=&#34;parte 02&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 02&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-03/&#34; title=&#34;parte 03&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 03&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-04/&#34; title=&#34;parte 04&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 04&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-05/&#34; title=&#34;parte 05&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 05&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-06/&#34; title=&#34;parte 06&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 06&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-07/&#34; title=&#34;parte 07&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 07&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-08/&#34; title=&#34;parte 08&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 08&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;O projeto¬†encontra-se no &lt;a href=&#34;https://github.com/candidosouza/tableless&#34; title=&#34;github do projeto&#34; target=&#34;_blank&#34;&gt;GitHub&lt;/a&gt;!&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Iniciando com Symfony 2 ‚Äì Parte 08</title>
      <link>https://tableless.github.io/hugo-public/iniciando-com-symfony-2-parte-08/</link>
      <pubDate>Tue, 28 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://tableless.github.io/hugo-public/iniciando-com-symfony-2-parte-08/</guid>
      <description>

&lt;p&gt;No &lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-07/&#34; title=&#34;Parte 07&#34; target=&#34;_blank&#34;&gt;tutorial anterior&lt;/a&gt;, criamos um upload de imagens para servirem de capa para nossos posts, agora vamos instalar e configurar um Bundle, disponibilizado pela comunidade, para fazer a pagina√ß√£o de nossa p√°gina index. Para isso temos que instalar o Knp Paginator em nossa aplica√ß√£o.&lt;/p&gt;

&lt;h2 id=&#34;instala√ß√£o-do-knp-paginator&#34;&gt;Instala√ß√£o do Knp Paginator&lt;/h2&gt;

&lt;p&gt;Para instalar o Knp Paginator, temos que adicion√°-lo em nosso composer.json. Abra o arquivo composer.json e adicione a linha abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&#34;knplabs/knp-paginator-bundle&#34;: &#34;2.4.*@dev&#34;
&lt;/pre&gt;

&lt;p&gt;Caso n√£o o conhe√ßa, ou tenha d√∫vidas, leia este post (&lt;a href=&#34;http://tableless.com.br/composer-um-pouco-alem-basico/&#34; title=&#34;Composer&#34; target=&#34;_blank&#34;&gt;Composer para iniciantes&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Depois de adicionado o Knp Paginator no composer, vamos instal√°- lo. Entre no terminal e digite:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ composer update
&lt;/pre&gt;

&lt;p&gt;Ap√≥s o Download, o Knp Paginator est√° instalado em nossa aplica√ß√£o.&lt;/p&gt;

&lt;h2 id=&#34;configurando-o-knp-paginator&#34;&gt;Configurando o Knp Paginator&lt;/h2&gt;

&lt;p&gt;A primeira configura√ß√£o que devemos fazer, √© registrar o novo bundle instalado, para isso entre no AppKernel, caminho: app/AppKernel.php&lt;/p&gt;

&lt;p&gt;Adicione a linha abaixo no registro de bundles:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;new Knp\Bundle\PaginatorBundle\KnpPaginatorBundle(),
&lt;/pre&gt;

&lt;p&gt;Veja na linha 16:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;class AppKernel extends Kernel
{
    public function registerBundles()
    {
        $bundles = array(
            new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
            new Symfony\Bundle\SecurityBundle\SecurityBundle(),
            new Symfony\Bundle\TwigBundle\TwigBundle(),
            new Symfony\Bundle\MonologBundle\MonologBundle(),
            new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
            new Symfony\Bundle\AsseticBundle\AsseticBundle(),
            new Doctrine\Bundle\DoctrineBundle\DoctrineBundle(),
            new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(),
            new Tableless\CoreBundle\TablelessCoreBundle(),
            new Tableless\ModelBundle\TablelessModelBundle(),
        new Knp\Bundle\PaginatorBundle\KnpPaginatorBundle(),
        );
...
&lt;/pre&gt;

&lt;p&gt;Pronto o Knp Paginator est√° registrado.&lt;/p&gt;

&lt;p&gt;Agora vamos fazer as configura√ß√µes padr√µes no Knp, para isso entre no arquivo config.yml, caminho: app/config/config.yml&lt;/p&gt;

&lt;p&gt;No final do arquivo adicione as configura√ß√µes abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-yml&#34;&gt;knp_paginator:
    page_range: 5                      # default page range used in pagination control
    default_options:
        page_name: page                # page query parameter name
        sort_field_name: sort          # sort field query parameter name
        sort_direction_name: direction # sort direction query parameter name
        distinct: true                 # ensure distinct results, useful when ORM queries are using GROUP BY statements
    template:
        pagination: KnpPaginatorBundle:Pagination:sliding.html.twig     # sliding pagination controls template
        sortable: KnpPaginatorBundle:Pagination:sortable_link.html.twig # sort link template
&lt;/pre&gt;

&lt;p&gt;Essas configura√ß√µes foram tiradas da &lt;a href=&#34;https://github.com/KnpLabs/KnpPaginatorBundle#configuration-example&#34; title=&#34;Documenta√ß√£o Knp Paginator&#34; target=&#34;_blank&#34;&gt;documenta√ß√£o do Knp Paginator&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;configurando-o-controller&#34;&gt;Configurando o Controller&lt;/h2&gt;

&lt;p&gt;Depois de termos feito as configura√ß√µes de instala√ß√£o do Knp Paginator, vamos configurar nosso controller, para isso entre no IndexControlerController, caminho: src/Tableless/CoreBundle/Controller/IndexControlerController.php&lt;/p&gt;

&lt;p&gt;Primeiramente para pegar o n√∫mero de p√°ginas, de acordo com a quantidade de posts temos que usar o request do symfony, ent√£o vamos dar um use em Request, veja na linha 8:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;?php

namespace Tableless\CoreBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Symfony\Component\HttpFoundation\Request;

...
&lt;/pre&gt;

&lt;p&gt;Em nossa indexAction temos que pegar a biblioteca do paginador, passar nosso posts, pegar as p√°ginas via request, e quantidade de posts que queremos por p√°ginas, e retorn√°- los em forma de array para que nossa view possa apresentar. Em meu caso vou usar apenas tr√™s posts por p√°gina.&lt;/p&gt;

&lt;p&gt;Veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/**
     * @Route(&#34;/&#34;, name=&#34;index&#34;)
     * @Template()
     */
    public function indexAction(Request $request)
    {
        $em = $this-&amp;gt;getDoctrine()-&amp;gt;getManager();

        $posts = $em-&amp;gt;getRepository(&#39;TablelessModelBundle:Post&#39;)-&amp;gt;findAllInOrder();

        /** @var  $paginator */
        $paginator  = $this-&amp;gt;get(&#39;knp_paginator&#39;);
        $pagination = $paginator-&amp;gt;paginate($posts, $request-&amp;gt;query-&amp;gt;get(&#39;page&#39;, 1), 3);

        return [
            &#39;pagination&#39; =&amp;gt; $pagination,
        ];
    }

‚Ä¶
&lt;/pre&gt;

&lt;h2 id=&#34;configurando-a-view&#34;&gt;Configurando a View&lt;/h2&gt;

&lt;p&gt;Nosso controller est√° configurado, agora temos que configurar nossa view, para que a mesma apresente os posts, com a pagina√ß√£o.&lt;/p&gt;

&lt;p&gt;Entre na view index.html.twig, caminho: src/Tableless/CoreBundle/Resources/views/IndexController/index.html.twig&lt;/p&gt;

&lt;p&gt;Em nossa index, temos um for, que est√° recebendo a vari√°vel posts, vamos trocar a vari√°vel posts por pagination, que foi a vari√°vel que passamos em nosso controller, veja:&lt;/p&gt;

&lt;p&gt;de:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;{% for post in posts %}
&lt;/pre&gt;

&lt;p&gt;troque por:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;{% for post in pagination %}
&lt;/pre&gt;

&lt;p&gt;E onde queremos que nossa pagina√ß√£o fique, vamos colocar o c√≥digo abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;{{ knp_pagination_render(pagination) }}
&lt;/pre&gt;

&lt;p&gt;Veja nossa index.html.twig pronta&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;{% extends &#34;::base.html.twig&#34; %}

{% block title %}Simples Blog{% endblock %}

{% block content %}

    &amp;lt;div class=&#34;container&#34;&amp;gt;

        &amp;lt;div class=&#34;row&#34;&amp;gt;

            {{ knp_pagination_render(pagination) }}

            &amp;lt;div class=&#34;col-lg-12&#34;&amp;gt;


            {% for post in pagination %}

                &amp;lt;article class=&#34;col-lg-4&#34;&amp;gt;

                    &amp;lt;div class=&#34;thumbnail&#34;&amp;gt;

                        &amp;lt;a href=&#34;{{ path(&#39;show&#39;, { &#39;id&#39;: post.id }) }}&#34;&amp;gt;

                            &amp;lt;img class=&#34;img-responsive&#34; src=&#34;{{ asset(post.getCoverWeb) }}&#34; alt=&#34;{{ post.cover }}&#34; title=&#34;{{ post.cover }}&#34;/&amp;gt;

                        &amp;lt;/a&amp;gt;

                        &amp;lt;div class=&#34;caption&#34;&amp;gt;

                            &amp;lt;h3&amp;gt;&amp;lt;a href=&#34;{{ path(&#39;show&#39;, { &#39;id&#39;: post.id }) }}&#34;&amp;gt;{{ post.title }}&amp;lt;/a&amp;gt;&amp;lt;/h3&amp;gt;

                            &amp;lt;p&amp;gt;Escrito por: {{ post.author.name }}&amp;lt;/p&amp;gt;

                            &amp;lt;p&amp;gt;{{ post.content|slice(0, 45) }} ...&amp;lt;/p&amp;gt;

                            &amp;lt;p&amp;gt;&amp;lt;a href=&#34;{{ path(&#39;show&#39;, { &#39;id&#39;: post.id }) }}&#34;&amp;gt;Leia mais...&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;

                        &amp;lt;/div&amp;gt;

                    &amp;lt;/div&amp;gt;

                &amp;lt;/article&amp;gt;

            {% endfor %}

        &amp;lt;/div&amp;gt;
    &amp;lt;/div&amp;gt;
        {{ knp_pagination_render(pagination) }}

    &amp;lt;/div&amp;gt;

{% endblock %}

&lt;/pre&gt;

&lt;p&gt;Rode o servidor:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console server:run
&lt;/pre&gt;

&lt;p&gt;Entre na url:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://127.0.0.1:8000&#34;&gt;http://127.0.0.1:8000&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Veja a imagem:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/04/011.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/04/011.png&#34; alt=&#34;Pagina√ß√£o&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-48300&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;estilizando-a-pagina√ß√£o&#34;&gt;Estilizando a pagina√ß√£o&lt;/h2&gt;

&lt;p&gt;Podemos perceber, que a pagina√ß√£o est√° sem estiliza√ß√£o, por√©m como estamos utilizando o bootstrap, vamos entrar no arquivo config.yml, caminho: app/config/config.yml&lt;/p&gt;

&lt;p&gt;E vamos alterar o pagination da tamplete do knp_paginator&lt;/p&gt;

&lt;p&gt;de:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;pagination: KnpPaginatorBundle:Pagination:sliding.html.twig
&lt;/pre&gt;

&lt;p&gt;para:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;pagination: KnpPaginatorBundle:Pagination:twitter_bootstrap_v3_pagination.html.twig
&lt;/pre&gt;

&lt;p&gt;Atualize a p√°gina, e pronto, veja:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/04/021.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/04/021.png&#34; alt=&#34;Pagina√ß√£o estilizada&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-48301&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;conclus√£o&#34;&gt;Conclus√£o&lt;/h2&gt;

&lt;p&gt;Pronto, nosso simples projeto est√° fazendo a pagina√ß√£o de posts, no pr√≥ximo tutorial vamos configurar outro Bundle, onde faremos o slug para nossos posts, para que nossas urls, fiquem um pouco mais amig√°veis.&lt;/p&gt;

&lt;p&gt;Links dos tutoriais anteriores:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2/&#34; title=&#34;part 01&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì Instala√ß√£o&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-02/&#34; title=&#34;parte 02&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 02&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-03/&#34; title=&#34;parte 03&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 03&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-04/&#34; title=&#34;parte 04&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 04&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-05/&#34; title=&#34;parte 05&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 05&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-06/&#34; title=&#34;parte 06&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 06&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-07/&#34; title=&#34;parte 07&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 07&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;O projeto¬†encontra-se no &lt;a href=&#34;https://github.com/candidosouza/tableless&#34; title=&#34;GitHub do projeto&#34; target=&#34;_blank&#34;&gt;GitHub&lt;/a&gt;!&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Iniciando com Symfony 2 ‚Äì Parte 07</title>
      <link>https://tableless.github.io/hugo-public/iniciando-com-symfony-2-parte-07/</link>
      <pubDate>Fri, 10 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://tableless.github.io/hugo-public/iniciando-com-symfony-2-parte-07/</guid>
      <description>

&lt;p&gt;No &lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-06/&#34; title=&#34;Iniciando com Symfony&#34; target=&#34;_blank&#34;&gt;tutorial anterior&lt;/a&gt;, estilizamos nossas p√°ginas, index e show, e inclu√≠mos um imagem para apresentar nossos posts no index, por√©m colocamos esta imagem pelo c√≥digo fonte, agora vamos fazer algumas configura√ß√µes, para que, na cria√ß√£o dos posts, tenha a op√ß√£o de fazer o upload de uma imagem, para ser apresentada como capa de nossos posts.&lt;/p&gt;

&lt;h2 id=&#34;configurando-a-entidade-post&#34;&gt;Configurando a entidade Post&lt;/h2&gt;

&lt;p&gt;Para criarmos um upload de imagem, vamos usar o componente http-foundation do Symfony, e usar sua classe UploadedFile em nossa entidade Post.&lt;/p&gt;

&lt;p&gt;Para isso, vamos entrar em nossa entidade Post, caminho: src/Tableless/ModelBundle/Entity/Post.php.&lt;/p&gt;

&lt;p&gt;Com a entidade Post aberta vamos dar um use em UploadedFile, veja na linha 7:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;?php 

namespace Tableless\ModelBundle\Entity; 

use Doctrine\ORM\Mapping as ORM; 
use Symfony\Component\Validator\Constraints as Assert; 
use Symfony\Component\HttpFoundation\File\UploadedFile; 


/** 
 * Post 
 * 
 * @ORM\Table(name=&#34;post&#34;)
‚Ä¶

&lt;/pre&gt;

&lt;p&gt;Precisamos criar dois atributos privados, $cover, e $file , e inserir as annotations correspondentes, o atributo $cover, receber√° o nome da imagem, e o $file o aquivo com um limite de tamanho, veja abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/** 
     * @var string 
     * 
     * @ORM\Column(name=&#34;cover&#34;, type=&#34;string&#34;, length=255, nullable=true) 
     */ 
    private $cover; 
    
    /** 
     * @Assert\File(maxSize=&#34;1000000&#34;) 
     */ 
    private $file;

    ...
&lt;/pre&gt;

&lt;p&gt;Vamos fazer os Getters and Setters desses atributos.&lt;/p&gt;

&lt;p&gt;O setFile receber√° um par√¢metro $file, esse par√¢metro ser√° do tipo UploadedFile, e caso n√£o passamos uma imagem, poder√° ser nulo, veja os getters and setters criados:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;...

    /** 
     * Get cover 
     * 
     * @return string 
     */ 
    public function getCover() 
    { 
        return $this-&amp;gt;cover; 
    } 

    /** 
     * Set cover 
     * 
     * @param string $cover 
     * @return Image 
     */ 
    public function setCover($cover) 
    { 
        $this-&amp;gt;cover = $cover; 
    } 

    /** 
     * Get file. 
     * 
     * @return UploadedFile 
     */ 
    public function getFile() 
    { 
        return $this-&amp;gt;file; 
    } 

    /** 
     * Set file. 
     * 
     * @param UploadedFile $file 
     */ 
    public function setFile(UploadedFile $file = null) 
    { 
        $this-&amp;gt;file = $file; 
    }

    ...
&lt;/pre&gt;

&lt;p&gt;Precisamos obter o caminho relativo do upload, ou seja, a pasta para onde as imagens ser√£o enviadas; para isso vamos criar o m√©todo protegido getUploadPath(), que nos retornar√° essa pasta. Veja abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;...

    /** 
     * Relative path. 
     * Get web path to upload directory. 
     * 
     * @return string 
     */ 
    protected function getUploadPath() 
    { 
        return &#39;uploads/covers&#39;; 
    }

    ...

&lt;/pre&gt;

&lt;p&gt;Temos que obter o caminho absoluto, para fazer o upload de nossas imagens, que ficar√° na pasta web, para isso vamos criar o m√©todo protegido getUploadAbsolutePath(), que nos retornar√° o caminho absoluto, e para chegarmos na pasta &amp;#8220;uploads/covers&amp;#8221;, vamos concatenar com o m√©todo getUploadPath() criado acima, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;...

    /** 
     * Absolute path. 
     * Get absolute path to upload directory. 
     * 
     * @return string 
     */ 
    protected function getUploadAbsolutePath() 
    { 
        return __DIR__ . &#39;/../../../../web/&#39; . $this-&amp;gt;getUploadPath(); 
    }

    ...

&lt;/pre&gt;

&lt;p&gt;Agora precisamos apresentar o caminho de nossas imagens para as views, vamos criar o m√©todo p√∫blico getCoverWeb(), caso tenhamos uma imagem, ou seja, caso a imagem n√£o seja nula, apresentamos a imagem nas views, para isso usaremos o m√©todo getUploadPath(), concatenado com o nome de nossa imagem, ou seja o m√©todo getCover(), veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;...

    /** 
     * Relative path. 
     * Get web path to a cover. 
     * 
     * @return null|string 
     */ 
    public function getCoverWeb() 
    { 
        return null === $this-&amp;gt;getCover() 
            ? null 
            : $this-&amp;gt;getUploadPath() . &#39;/&#39; . $this-&amp;gt;getCover(); 
    }

    ...

&lt;/pre&gt;

&lt;p&gt;Podemos precisar do caminho absoluto de nossa imagem, para isso vamos criar o m√©todo getCoverAbsolute(), para obtermos esse caminho quando precisarmos, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;...

    /** 
     * Get path on disk to a cover. 
     * 
     * @return null|string 
     *   Absolute path. 
     */ 
    public function getCoverAbsolute() 
    { 
        return null === $this-&amp;gt;getCover() 
            ? null 
            : $this-&amp;gt;getUploadAbsolutePath() . &#39;/&#39; . $this-&amp;gt;getCover(); 
    }

    ...
&lt;/pre&gt;

&lt;p&gt;Agora temos que criar um m√©todo que far√° o upload da imagem, para isso criaremos um m√©todo como nome upload(), caso a imagem n√£o seja nula, ele far√° o upload usando alguns m√©todos prontos da classe UploadedFile, para mover a imagens, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;... 
  
    /** 
     * Upload a cover file. 
     */ 
    public function upload() 
    { 
        if (null === $this-&amp;gt;getFile()) { 
            return; 
        } 
        $filename = $this-&amp;gt;getFile()-&amp;gt;getClientOriginalName(); 
        $this-&amp;gt;getFile()-&amp;gt;move($this-&amp;gt;getUploadAbsolutePath(), $filename); 
        $this-&amp;gt;setCover($filename); 
        $this-&amp;gt;setFile(); 
    }


    ...

&lt;/pre&gt;

&lt;p&gt;Pronto, nossa entidade Post, agora est√° recebendo um upload de imagem.&lt;/p&gt;

&lt;p&gt;Veja o entidade Post pronta:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;?php

namespace Tableless\ModelBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Component\HttpFoundation\File\UploadedFile;


/**
 * Post
 *
 * @ORM\Table(name=&#34;post&#34;)
 * @ORM\Entity(repositoryClass=&#34;Tableless\ModelBundle\Repository\PostRepository&#34;)
 */
class Post extends Timestampable
{
    /**
     * @var integer
     *
     * @ORM\Column(name=&#34;id&#34;, type=&#34;integer&#34;)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy=&#34;AUTO&#34;)
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name=&#34;title&#34;, type=&#34;string&#34;, length=255)
     * @Assert\NotBlank
     */
    private $title;

    /**
     * @var string
     *
     * @ORM\Column(name=&#34;content&#34;, type=&#34;text&#34;)
     * @Assert\NotBlank
     */
    private $content;

    /**
     * @var Author
     *
     * @ORM\ManyToOne(targetEntity=&#34;Author&#34;, inversedBy=&#34;posts&#34;)
     * @ORM\JoinColumn(name=&#34;author_id&#34;, referencedColumnName=&#34;id&#34;, nullable=false)
     * @Assert\NotBlank
     */
    private $author;

    /**
     * @var string
     *
     * @ORM\Column(name=&#34;cover&#34;, type=&#34;string&#34;, length=255, nullable=true)
     */
    private $cover;

    /**
     * @Assert\File(maxSize=&#34;1000000&#34;)
     */
    private $file;


    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this-&amp;gt;id;
    }

    /**
     * Set title
     *
     * @param string $title
     * @return Post
     */
    public function setTitle($title)
    {
        $this-&amp;gt;title = $title;

        return $this;
    }

    /**
     * Get title
     *
     * @return string 
     */
    public function getTitle()
    {
        return $this-&amp;gt;title;
    }

    /**
     * Set content
     *
     * @param string $content
     * @return Post
     */
    public function setContent($content)
    {
        $this-&amp;gt;content = $content;

        return $this;
    }

    /**
     * Get content
     *
     * @return string 
     */
    public function getContent()
    {
        return $this-&amp;gt;content;
    }

    /**
     * Set author
     *
     * @param \Tableless\ModelBundle\Entity\Author $author
     * @return Post
     */
    public function setAuthor(\Tableless\ModelBundle\Entity\Author $author)
    {
        $this-&amp;gt;author = $author;

        return $this;
    }

    /**
     * Get author
     *
     * @return \Tableless\ModelBundle\Entity\Author 
     */
    public function getAuthor()
    {
        return $this-&amp;gt;author;
    }

    // m√©todos criados

    /**
     * Get cover
     *
     * @return string
     */
    public function getCover()
    {
        return $this-&amp;gt;cover;
    }


    /**
     * Set cover
     *
     * @param string $cover
     * @return Image
     */
    public function setCover($cover)
    {
        $this-&amp;gt;cover = $cover;
    }

    /**
     * Get file.
     *
     * @return UploadedFile
     */
    public function getFile()
    {
        return $this-&amp;gt;file;
    }

    /**
     * Sets file.
     *
     * @param UploadedFile $file
     */
    public function setFile(UploadedFile $file = null)
    {
        $this-&amp;gt;file = $file;
    }

    /**
     * Relative path.
     * Get web path to upload directory.
     *
     * @return string
     */
    protected function getUploadPath()
    {
        return &#39;uploads/covers&#39;;
    }

    /**
     * Absolute path.
     * Get absolute path to upload directory.
     *
     * @return string
     */
    protected function getUploadAbsolutePath()
    {
        return __DIR__ . &#39;/../../../../web/&#39; . $this-&amp;gt;getUploadPath();
    }

    /**
     * Relative path.
     * Get web path to a cover.
     *
     * @return null|string
     */
    public function getCoverWeb()
    {
        return null === $this-&amp;gt;getCover()
            ? null
            : $this-&amp;gt;getUploadPath() . &#39;/&#39; . $this-&amp;gt;getCover();
    }

    /**
     * Get path on disk to a cover.
     *
     * @return null|string
     *   Absolute path.
     */
    public function getCoverAbsolute()
    {
        return null === $this-&amp;gt;getCover()
            ? null
            : $this-&amp;gt;getUploadAbsolutePath() . &#39;/&#39; . $this-&amp;gt;getCover();
    }

    /**
     * Upload a cover file.
     */
    public function upload()
    {
        if (null === $this-&amp;gt;getFile()) {
            return;
        }
        $filename = $this-&amp;gt;getFile()-&amp;gt;getClientOriginalName();
        $this-&amp;gt;getFile()-&amp;gt;move($this-&amp;gt;getUploadAbsolutePath(), $filename);
        $this-&amp;gt;setCover($filename);
        $this-&amp;gt;setFile();
    }
}
&lt;/pre&gt;

&lt;h2 id=&#34;configurando-o-controller&#34;&gt;Configurando o controller&lt;/h2&gt;

&lt;p&gt;Para que nossos formul√°rios de posts tenham acesso ao upload, temos que configurar o controller PostController.&lt;/p&gt;

&lt;p&gt;Entre no PostController, caminho: src/Tableless/CoreBundle/Controller/PostController.php, e no m√©todo createAction, insira o c√≥digo $entity-&amp;gt;upload(); veja na linha 15:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/** 
     * Creates a new Post entity. 
     * 
     * @Route(&#34;/&#34;, name=&#34;post_create&#34;) 
     * @Method(&#34;POST&#34;) 
     * @Template(&#34;TablelessCoreBundle:Post:new.html.twig&#34;) 
     */ 
    public function createAction(Request $request) 
    { 
        $entity = new Post(); 
        $form = $this-&amp;gt;createCreateForm($entity); 
        $form-&amp;gt;handleRequest($request); 

        if ($form-&amp;gt;isValid()) { 
            $entity-&amp;gt;upload(); 
            $em = $this-&amp;gt;getDoctrine()-&amp;gt;getManager(); 
            $em-&amp;gt;persist($entity); 
            $em-&amp;gt;flush(); 

            return $this-&amp;gt;redirect($this-&amp;gt;generateUrl(&#39;post_show&#39;, array(&#39;id&#39; =&amp;gt; $entity-&amp;gt;getId()))); 
        } 

        return array( 
            &#39;entity&#39; =&amp;gt; $entity, 
            &#39;form&#39;   =&amp;gt; $form-&amp;gt;createView(), 
        ); 
    }
&lt;/pre&gt;

&lt;p&gt;Temos que fazer o mesmo procedimento com o m√©todo updateAction na linha 23, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/** 
     * Edits an existing Post entity. 
     * 
     * @Route(&#34;/{id}&#34;, name=&#34;post_update&#34;) 
     * @Method(&#34;PUT&#34;) 
     * @Template(&#34;TablelessModelBundle:Post:edit.html.twig&#34;) 
     */ 
    public function updateAction(Request $request, $id) 
    { 
        $em = $this-&amp;gt;getDoctrine()-&amp;gt;getManager(); 

        $entity = $em-&amp;gt;getRepository(&#39;TablelessModelBundle:Post&#39;)-&amp;gt;find($id); 

        if (!$entity) { 
            throw $this-&amp;gt;createNotFoundException(&#39;Unable to find Post entity.&#39;); 
        } 

        $deleteForm = $this-&amp;gt;createDeleteForm($id); 
        $editForm = $this-&amp;gt;createEditForm($entity); 
        $editForm-&amp;gt;handleRequest($request); 

        if ($editForm-&amp;gt;isValid()) { 
            $entity-&amp;gt;upload(); 
            $em-&amp;gt;flush(); 

            return $this-&amp;gt;redirect($this-&amp;gt;generateUrl(&#39;post_edit&#39;, array(&#39;id&#39; =&amp;gt; $id))); 
        } 

        return array( 
            &#39;entity&#39;      =&amp;gt; $entity, 
            &#39;edit_form&#39;   =&amp;gt; $editForm-&amp;gt;createView(), 
            &#39;delete_form&#39; =&amp;gt; $deleteForm-&amp;gt;createView(), 
        ); 
    } 

&lt;/pre&gt;

&lt;h2 id=&#34;configurando-os-formul√°rios&#34;&gt;Configurando os formul√°rios&lt;/h2&gt;

&lt;p&gt;Pronto, nossa entidade e controller de posts, est√£o configurados para receberem o upload, por√©m temos que configurar nossos formul√°rios. Entre no PostType.php, para fazermos as configura√ß√µes necess√°rias, caminho: src/Tableless/ModelBundle/Form/PostType, e no m√©todo buildForm adicione o &amp;#8216;file&amp;#8217;, veja na linha 10.&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/** 
     * @param FormBuilderInterface $builder 
     * @param array $options 
     */ 
    public function buildForm(FormBuilderInterface $builder, array $options) 
    { 
        $builder 
            -&amp;gt;add(&#39;title&#39;) 
            -&amp;gt;add(&#39;content&#39;) 
            -&amp;gt;add(&#39;file&#39;) 
            -&amp;gt;add(&#39;author&#39;) 
        ; 
    }
&lt;/pre&gt;

&lt;h2 id=&#34;atualizando-o-banco-de-dados&#34;&gt;Atualizando o banco de dados&lt;/h2&gt;

&lt;p&gt;Para vermos a m√°gica acontecer, s√≥ precisamos, atualizar nosso banco, para isso entre no terminal e digite:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console doctrine:schema:update --force 
&lt;/pre&gt;

&lt;p&gt;Pronto! Nosso upload de imagem, est√° pronto, veja a imagem:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/04/01.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/04/01.png&#34; alt=&#34;Bot√£o de upload no formul√°rio no symfony&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-48201&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;configurando-as-views&#34;&gt;Configurando as views&lt;/h2&gt;

&lt;p&gt;Agora temos que configurar nossas views para que as mesmas apresentem as imagens. Entre na view index.html.twig, caminho: src/Tablesless/CoreBundle/Resources/views/IndexController/index.html.twig, mude a linha 21.&lt;/p&gt;

&lt;p&gt;mude de:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;img class=&#34;img-responsive&#34; src=&#34;{{ asset(&#39;logo-tableless.png&#39;) }}&#34; alt=&#34;img&#34; title=&#34;img&#34;/&amp;gt;
&lt;/pre&gt;

&lt;p&gt;para:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;img class=&#34;img-responsive&#34; src=&#34;{{ asset(post.getCoverWeb) }}&#34; alt=&#34;{{ post.cover }}&#34; title=&#34;{{ post.cover }}&#34;/&amp;gt;
&lt;/pre&gt;

&lt;p&gt;Vamos entrar em nossa view show.html.twig, caminho: caminho: src/Tablesless/CoreBundle/Resources/views/IndexController/show.html.twig, e vamos acrescentar a mesma linha acima do t√≠tulo, ou onde acharem melhor, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;article class=&#34;col-lg-12&#34; &amp;gt;

&amp;lt;img class=&#34;img-responsive&#34; src=&#34;{{ asset(post.getCoverWeb) }}&#34; alt=&#34;{{ post.cover }}&#34; title=&#34;{{ post.cover }}&#34;/&amp;gt;

&amp;lt;h1&amp;gt;{{ post.title }}&amp;lt;/h1&amp;gt;
&lt;/pre&gt;

&lt;p&gt;Vamos fazer os testes, criando um novo post, e inserindo uma imagem.&lt;/p&gt;

&lt;p&gt;Observe a imagem na pasta web/uploads/cover.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/04/02.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/04/02.png&#34; alt=&#34;Pasta de upload no symfony&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-48205&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;conclus√£o&#34;&gt;Conclus√£o&lt;/h2&gt;

&lt;p&gt;Pronto, nosso simples projeto est√° fazendo upload de imagens para cada post, no pr√≥ximo tutorial vamos aprender a configurar um Bundle pronto, disponibilizado pela comunidade, onde faremos a pagina√ß√£o de resultados para nossa p√°gina index.&lt;/p&gt;

&lt;p&gt;Links dos tutoriais anteriores:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2/&#34; title=&#34;instala√ß√£o&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì Instala√ß√£o&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-02/&#34; title=&#34;parte 02&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 02&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-03/&#34; title=&#34;parte 03&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 03&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-04/&#34; title=&#34;parte 04&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 04&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-05/&#34; title=&#34;parte 05&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 05&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-06/&#34; title=&#34;parte 06&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 06&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;O projeto¬†encontra-se no &lt;a href=&#34;https://github.com/candidosouza/tableless&#34; title=&#34;GitHub do projeto&#34; target=&#34;_blank&#34;&gt;GitHub&lt;/a&gt;!&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Iniciando com Symfony 2 ‚Äì Parte 06</title>
      <link>https://tableless.github.io/hugo-public/iniciando-com-symfony-2-parte-06/</link>
      <pubDate>Wed, 01 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://tableless.github.io/hugo-public/iniciando-com-symfony-2-parte-06/</guid>
      <description>

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/capa.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/capa.png&#34; alt=&#34;Symfony e Twig&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47950&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;No &lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-05/&#34; title=&#34;iniciando com symfony 2 - parte 05&#34; target=&#34;_blank&#34;&gt;tutorial anterior&lt;/a&gt;, configuramos nosso projeto e criamos nossas p√°ginas, home e show, por√©m as mesmas se encontram sem estiliza√ß√£o, neste tutorial, vamos apenas estruturar nossas p√°ginas de um modo simples e b√°sico, por√©m funcional. N√£o entrarei em detalhes sobre o Bootstrap, n√£o √© meu objetivo, por√©m para iniciantes, recomendo a &lt;a href=&#34;http://getbootstrap.com/css/&#34; title=&#34;Doc. Bootstrap&#34; target=&#34;_blank&#34;&gt;documenta√ß√£o&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Sobre o Twig, falarei o b√°sico do b√°sico, somente o que vamos usar. Lembrando que ele j√° vem instalado e configurado no Symfony, por√©m podemos instal√°-lo separadamente &lt;a href=&#34;https://packagist.org/packages/twig/twig&#34; title=&#34;Pacote do Twig&#34; target=&#34;_blank&#34;&gt;via Composer&lt;/a&gt; e configur√°- lo em outros projetos, usando ou n√£o outros frameworks.&lt;/p&gt;

&lt;h2 id=&#34;instalando-e-configurando-o-twitter-bootstrap-no-symfony&#34;&gt;Instalando e configurando o Twitter Bootstrap no Symfony&lt;/h2&gt;

&lt;p&gt;Vamos iniciar com a configura√ß√£o do bootstrap.&lt;/p&gt;

&lt;p&gt;Temos algumas formas de instalar e configurar o arquivo css no symfony, em nosso caso vamos fazer uma configura√ß√£o simples apenas para a did√°tica, caso queiram se aprofundar mais no assunto, aconselho a &lt;a href=&#34;http://symfony.com/doc/current/cookbook/assetic/asset_management.html#including-css-stylesheets&#34; title=&#34;Assets no Symfony&#34; target=&#34;_blank&#34;&gt;documenta√ß√£o&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Primeiramente vamos criar uma pasta dentro da pasta Resource do bundle CoreBundle, caminho: src/Tableless/CoreBundle/Resouces, com o nome public, e dentro dessa nova pasta, vamos criar outra pasta com o nome css.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://getbootstrap.com/getting-started/#download&#34; title=&#34;Download do bootstrap&#34; target=&#34;_blank&#34;&gt;Baixe o bootstrap&lt;/a&gt;, e copie o arquivo bootstrap.min.css para a pasta css/, veja a imagem abaixo para compara√ß√£o:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/011.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/011.png&#34; alt=&#34;Pasta para bootstrap&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47951&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Caso queiram, podem usar o arquivo bootstrap.css, em nosso caso vamos usar o .min.css.&lt;/p&gt;

&lt;p&gt;Para que o bootstrap seja carregado vamos entrar no terminal, e digitar:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console assets:install --symlink
&lt;/pre&gt;

&lt;p&gt;Desse forma estamos criando um link simb√≥lico do arquivo na pasta web, veja:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/022.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/022.png&#34; alt=&#34;Link simb√≥lico&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47952&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Agora devemos carregar o aquivo bootstrap em nossa aplica√ß√£o. Vamos entrar no arquivo base.html.twig, caminho: app/Resources/views/base.html.twig, e carregar o bootstrap, no bloco stylesheets, veja na linha 7.&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt; 
&amp;lt;html&amp;gt; 
    &amp;lt;head&amp;gt; 
        &amp;lt;meta charset=&#34;UTF-8&#34; /&amp;gt;
        &amp;lt;title&amp;gt;{% block title %}Welcome!{% endblock %}&amp;lt;/title&amp;gt;
        {% block stylesheets %} 
                &amp;lt;link rel=&#34;stylesheet&#34; type=&#34;text/css&#34; href=&#34;{{ asset(&#39;bundles/tablelesscore/css/bootstrap.min.css&#39;) }}&#34; /&amp;gt;
        {% endblock %} 
        &amp;lt;link rel=&#34;icon&#34; type=&#34;image/x-icon&#34; href=&#34;{{ asset(&#39;favicon.ico&#39;) }}&#34; /&amp;gt;
    &amp;lt;/head&amp;gt; 
    &amp;lt;body&amp;gt; 
        {% block body %}{% endblock %} 
        {% block javascripts %}{% endblock %} 
   &amp;lt;/body&amp;gt; 
&amp;lt;/html&amp;gt;
&lt;/pre&gt;

&lt;h2 id=&#34;iniciando-com-twig&#34;&gt;Iniciando com Twig&lt;/h2&gt;

&lt;p&gt;Pronto, o bootstrap est√° instalado e configurado.&lt;/p&gt;

&lt;p&gt;Neste momento vou criar quatro posts em off, apenas para visualiza√ß√£o, recomendo que fa√ßam o mesmo, pois assim ficar√° f√°cil para estilizar.&lt;/p&gt;

&lt;p&gt;Vamos iniciar nossos trabalhos com o Twig.&lt;/p&gt;

&lt;p&gt;Ainda com o arquivo base.html.twig aberto, vamos fazer algumas configura√ß√µes.&lt;/p&gt;

&lt;p&gt;O twig trabalha com blocos, que podem ser herdados pelas templates filhas, em nosso caso vamos criar um bloco com o nome &amp;#8220;content&amp;#8221;, para que nossas templates possam herdar. Para criar um bloco √© bem simples, veja abaixo:&lt;/p&gt;

&lt;p&gt;Abre o bloco:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;{% block nome-do-bloco %} 
&lt;/pre&gt;

&lt;p&gt;Fecha o bloco:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;{% endblock %}
&lt;/pre&gt;

&lt;p&gt;Ok! Vamos criar nosso bloco, que ficar√° dentro de outro bloco j√° existente no arquivo base.html.twig, veja abaixo na linha 15.&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
    &amp;lt;meta charset=&#34;UTF-8&#34; /&amp;gt;
    &amp;lt;title&amp;gt;{% block title %}Welcome!{% endblock %}&amp;lt;/title&amp;gt;
{% block stylesheets %}
        &amp;lt;link rel=&#34;stylesheet&#34; type=&#34;text/css&#34; href=&#34;{{ asset(&#39;bundles/tablelesscore/css/bootstrap.min.css&#39;) }}&#34; /&amp;gt;
    {% endblock %}
    &amp;lt;link rel=&#34;icon&#34; type=&#34;image/x-icon&#34; href=&#34;{{ asset(&#39;favicon.ico&#39;) }}&#34; /&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
{% block body %}

    {# Novo bloco criado #}
    {% block content %}{% endblock %}
    
{% endblock %}
{% block javascripts %}{% endblock %}
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/pre&gt;

&lt;p&gt;Agora para concluirmos esse arquivo, vamos estruturar o html, j√° incluindo as classes do bootstrap, veja abaixo o arquivo base.html.twig pronto:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt; 
&amp;lt;html&amp;gt; 
    &amp;lt;head&amp;gt; 
        &amp;lt;meta charset=&#34;UTF-8&#34; /&amp;gt;
        &amp;lt;title&amp;gt;{% block title %}Welcome!{% endblock %}&amp;lt;/title&amp;gt; 
        {% block stylesheets %} 
                &amp;lt;link rel=&#34;stylesheet&#34; type=&#34;text/css&#34; href=&#34;{{ asset(&#39;bundles/tablelesscore/css/bootstrap.min.css&#39;) }}&#34; /&amp;gt;
        {% endblock %} 
        &amp;lt;link rel=&#34;icon&#34; type=&#34;image/x-icon&#34; href=&#34;{{ asset(&#39;favicon.ico&#39;) }}&#34; /&amp;gt; 
    &amp;lt;/head&amp;gt; 
    &amp;lt;body&amp;gt; 
        {% block body %} 
        &amp;lt;div class=&#34;container&#34;&amp;gt; 
            &amp;lt;header class=&#34;row&#34;&amp;gt; 
                &amp;lt;div class=&#34;col-lg-6&#34;&amp;gt; 
                    &amp;lt;h1&amp;gt;Simples Blog&amp;lt;/h1&amp;gt; 
                    &amp;lt;a href=&#34;#&#34; title=&#34;&#34;&amp;gt;Home&amp;lt;/a&amp;gt; | 
                    &amp;lt;a href=&#34;#&#34; title=&#34;&#34;&amp;gt;administra√ß√£o&amp;lt;/a&amp;gt;
                &amp;lt;/div&amp;gt; 
            &amp;lt;/header&amp;gt; 
        {% block content %} 
        {% endblock %} 
            &amp;lt;footer class=&#34;col-lg-12&#34;&amp;gt; 
                &amp;lt;p&amp;gt;&amp;copy; 2015 Tableless - Todos os direitos reservados&amp;lt;/p&amp;gt; 
            &amp;lt;/footer&amp;gt;
        &amp;lt;/div&amp;gt; 

        {% endblock %} 
        {% block javascripts %}{% endblock %} 
    &amp;lt;body&amp;gt; 
&amp;lt;/html&amp;gt;
&lt;/pre&gt;

&lt;p&gt;Podemos perceber que os links est√£o sem caminho, para passarmos um link no Symfony precisamos do nome de nossas rotas, e para pegar esses nomes, vamos entrar no terminal.&lt;/p&gt;

&lt;p&gt;Abra o terminal e digite:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console router:debug
&lt;/pre&gt;

&lt;p&gt;Vamos ter uma lista dos nomes de nossas rotas, a primeira que vamos usar √© a rota da home &amp;#8220;/&amp;#8221; , veja a imagem:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/032.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/032.png&#34; alt=&#34;Rotas&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47953&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Percebemos que o nome dessa rota, est√° muito extenso, vamos mudar isso, deixando o nome dessa rota e da rota de visualiza√ß√£o do post, um pouco mais curto.&lt;/p&gt;

&lt;p&gt;Para isso, devemos entrar no controller indexController, caminho: src/Tableless/CoreBunde/ IndexControlerController.php&lt;/p&gt;

&lt;p&gt;Abra o arquivo, e nas annotations dos m√©todos indexAction e showAction, vamos colocar os nomes que queremos para nossas rotas. Exemplo: @Route(&amp;#8220;/&amp;#8221;, name=&amp;#8221;index&amp;#8221;)&lt;/p&gt;

&lt;p&gt;Veja o exemplo na linha 2 e na linha 9 do c√≥digo abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;/** 
     * @Route(&#34;/&#34;, name=&#34;index&#34;) 
     * @Template() 
     */ 
    public function indexAction() 
    .... 

    /** 
     * @Route(&#34;/show/{id}&#34;, name=&#34;show&#34;) 
     * @Template() 
     */ 
    public function showAction($id) 
    ...
&lt;/pre&gt;

&lt;p&gt;Agora nossas rotas est√£o com os nomes mais curtos.&lt;/p&gt;

&lt;p&gt;Para vermos novamente entre no terminal e digite:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;$ php app/console router:debug
&lt;/pre&gt;

&lt;p&gt;Veja:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/042.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/042.png&#34; alt=&#34;Rotas&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47976&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Pronto! Agora podemos inserir nossos links.&lt;/p&gt;

&lt;p&gt;Para pegarmos o link da home, digitamos: {{ path(&amp;#8216;index&amp;#8217;) }}, e para o link da administra√ß√£o vou pegar o link da lista de post.&lt;/p&gt;

&lt;p&gt;Veja o arquivo base.html.twig pronto, os links est√£o na linha 17 e 18.&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt; 
&amp;lt;html&amp;gt; 
    &amp;lt;head&amp;gt; 
        &amp;lt;meta charset=&#34;UTF-8&#34; /&amp;gt;
        &amp;lt;title&amp;gt;{% block title %}Welcome!{% endblock %}&amp;lt;/title&amp;gt; 
        {% block stylesheets %} 
                &amp;lt;link rel=&#34;stylesheet&#34; type=&#34;text/css&#34; href=&#34;{{ asset(&#39;bundles/tablelesscore/css/bootstrap.min.css&#39;) }}&#34; /&amp;gt;
        {% endblock %} 
        &amp;lt;link rel=&#34;icon&#34; type=&#34;image/x-icon&#34; href=&#34;{{ asset(&#39;favicon.ico&#39;) }}&#34; /&amp;gt; 
    &amp;lt;/head&amp;gt; 
    &amp;lt;body&amp;gt; 
        {% block body %} 
        &amp;lt;div class=&#34;container&#34;&amp;gt; 
            &amp;lt;header class=&#34;row&#34;&amp;gt; 
                &amp;lt;div class=&#34;col-lg-6&#34;&amp;gt; 
                    &amp;lt;h1&amp;gt;Simples Blog&amp;lt;/h1&amp;gt; 
                    &amp;lt;a href=&#34;{{ path(&#39;index&#39;) }}&#34; title=&#34;Home&#34;&amp;gt;Home&amp;lt;/a&amp;gt; | 
                    &amp;lt;a href=&#34;{{ path(&#39;post&#39;) }}&#34; title=&#34;Administra√ß√£o&#34;&amp;gt;administra√ß√£o&amp;lt;/a&amp;gt;
                &amp;lt;/div&amp;gt; 
            &amp;lt;/header&amp;gt; 
        {% block content %} 
        {% endblock %} 
            &amp;lt;footer class=&#34;col-lg-12&#34;&amp;gt; 
                &amp;lt;p&amp;gt;&amp;copy; 2015 Tableless - Todos os direitos reservados&amp;lt;/p&amp;gt; 
            &amp;lt;/footer&amp;gt;
        &amp;lt;/div&amp;gt; 

        {% endblock %} 
        {% block javascripts %}{% endblock %} 
    &amp;lt;body&amp;gt; 
&amp;lt;/html&amp;gt;
&lt;/pre&gt;

&lt;h2 id=&#34;estruturando-e-estilizando-o-index&#34;&gt;Estruturando e estilizando o index&lt;/h2&gt;

&lt;p&gt;Nossa base est√° pronta, vamos agora para o arquivo index.html.twig, que √© o index de nosso blog.&lt;/p&gt;

&lt;p&gt;Caminho: src/Tableless/CoreBundle/Resources/views/IndexController/index.html.twig&lt;/p&gt;

&lt;p&gt;Abra o arquivo para que possamos estrutur√°- lo.&lt;/p&gt;

&lt;p&gt;Podemos perceber que na primeira linha, nosso arquivo est√° estendendo o arquivo base.html.twig, que acabamos de estruturar.&lt;/p&gt;

&lt;p&gt;Em primeiro lugar vamos criar um t√≠tulo para nossa p√°gina.&lt;/p&gt;

&lt;p&gt;Para isso, digitamos o t√≠tulo que queremos dentro do bloco title.&lt;/p&gt;

&lt;p&gt;Para que nosso conte√∫do, posicione- se no lugar correto, vamos renomear o bloco body, para content, que criamos no arquivo base, o h1 e dump, vamos excluir, veja nosso arquivo:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;{% extends &#34;::base.html.twig&#34; %} 

{% block title %}Simples Blog{% endblock %} 

{% block content %} 
    
{% endblock %}
&lt;/pre&gt;

&lt;p&gt;Nosso Controller IndexController est√° retornando um array de posts, atrav√©s do m√©todo indexAction, para recuperarmos esse array via Twig, devemos fazer um &amp;#8220;for&amp;#8221; para recuperar cada dado do post.&lt;/p&gt;

&lt;p&gt;Obs: Se tiv√©ssemos usando o php para recuperar esses dados, passar√≠amos um foreach, no caso do Twig para fazermos esse mesmo processo, usamos um for, veja abaixo o exemplo:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;{% for valor in array %}

{% endfor %}
&lt;/pre&gt;

&lt;p&gt;Para entender melhor o funcionamento do for, recomendo a &lt;a href=&#34;http://twig.sensiolabs.org/doc/tags/for.html&#34; title=&#34;twig for&#34; target=&#34;_blank&#34;&gt;documenta√ß√£o&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Vamos entender melhor&lt;/p&gt;

&lt;p&gt;Nosso m√©todo indexAction, do controller indexController, est√° nos retornando um array, veja na linha 7.&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;public function indexAction() 
    { 
        $em = $this-&amp;gt;getDoctrine()-&amp;gt;getManager(); 

        $posts = $em-&amp;gt;getRepository(&#39;TablelessModelBundle:Post&#39;)-&amp;gt;findAllInOrder(); 

        return [ 
            &#39;posts&#39; =&amp;gt; $posts, 
        ]; 
    } 

&lt;/pre&gt;

&lt;p&gt;Para recuperarmos esses dados no twig, vamos fazer:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;{% for post in posts %}

    {{ post.title }}
    {{ post.author.name }}
    {{ post.content | slice(0, 45) }}

{% endfor %}
&lt;/pre&gt;

&lt;p&gt;Perceba que ao recuperarmos o post.content, que √© o conte√∫do do nosso post, vamos passar um &amp;#8220;slice&amp;#8221;, que serve para cortar o texto, come√ßando do 0 at√© 45 caracteres. Caso queiram mais de 45 caracteres, √© s√≥ aumentar esse valor.&lt;/p&gt;

&lt;p&gt;Tamb√©m, temos que estruturar nossa p√°gina com html, incluir as classes do bootstrap e criar os links. Em rela√ß√£o aos links, para acessarmos um post, temos que passar o &amp;#8220;id&amp;#8221; desse post no link.&lt;/p&gt;

&lt;p&gt;Vamos colocar uma imagem, escolham uma imagem, e coloque na pasta web, caminho: web/&lt;/p&gt;

&lt;p&gt;Para recuperarmos essa imagem, vamos usar o asset.&lt;/p&gt;

&lt;p&gt;Veja abaixo o exemplo do asset para imagem:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;&amp;lt;img src=&#34;{{ asset(&#39;imagem.png&#39;) }}&#34; /&amp;gt; 
&lt;/pre&gt;

&lt;p&gt;Veja o index.html.twig pronto:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;{% extends &#34;::base.html.twig&#34; %} 

{% block title %}Simples Blog{% endblock %} 

{% block content %} 

    &amp;lt;div class=&#34;container&#34;&amp;gt; 

        &amp;lt;div class=&#34;row&#34;&amp;gt; 
 
            &amp;lt;div class=&#34;col-lg-12&#34;&amp;gt;

                {% for post in posts %} 

                    &amp;lt;article class=&#34;col-lg-4&#34;&amp;gt;

                        &amp;lt;div class=&#34;thumbnail&#34;&amp;gt;

                            &amp;lt;a href=&#34;{{ path(&#39;show&#39;, { &#39;id&#39;: post.id }) }}&#34;&amp;gt;

                                &amp;lt;img class=&#34;img-responsive&#34; src=&#34;{{ asset(&#39;logo-tableless.png&#39;) }}&#34; alt=&#34;img&#34; title=&#34;img&#34;/&amp;gt;

                            &amp;lt;/a&amp;gt; 

                            &amp;lt;div class=&#34;caption&#34;&amp;gt; 

                                &amp;lt;h3&amp;gt;&amp;lt;a href=&#34;{{ path(&#39;show&#39;, { &#39;id&#39;: post.id }) }}&#34;&amp;gt;{{ post.title }}&amp;lt;/a&amp;gt;&amp;lt;/h3&amp;gt; 

                                &amp;lt;p&amp;gt;Escrito por: {{ post.author.name }}&amp;lt;/p&amp;gt; 

                                &amp;lt;p&amp;gt;{{ post.content|slice(0, 45) }} ...&amp;lt;/p&amp;gt;

                                &amp;lt;p&amp;gt;&amp;lt;a href=&#34;{{ path(&#39;show&#39;, { &#39;id&#39;: post.id }) }}&#34;&amp;gt;Leia mais...&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;

                            &amp;lt;/div&amp;gt;

                        &amp;lt;/div&amp;gt; 

                    &amp;lt;/article&amp;gt;

                {% endfor %} 

            &amp;lt;/div&amp;gt;

        &amp;lt;/div&amp;gt; 

    &amp;lt;/div&amp;gt;

{% endblock %}
&lt;/pre&gt;

&lt;p&gt;Vamos entrar no terminal, e subir nosso servidor.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console server:run
&lt;/pre&gt;

&lt;p&gt;Entre na url: &lt;a href=&#34;http://127.0.0.1:8000/&#34;&gt;http://127.0.0.1:8000/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Nossa home est√° pronto, veja:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/051.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/051.png&#34; alt=&#34;blog&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47980&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;estruturando-e-estilizando-o-show&#34;&gt;Estruturando e estilizando o show&lt;/h2&gt;

&lt;p&gt;Vamos estruturar o show.html.twig, que √© respons√°vel pela visualiza√ß√£o de cada post.&lt;/p&gt;

&lt;p&gt;Abra o arquivo, caminho: src/Tableless/CoreBundle/Resources/views/IndexController/ show.html.twig, e vamos estrutur√° lo.&lt;/p&gt;

&lt;p&gt;Vamos colocar um t√≠tulo no bloco &amp;#8220;title&amp;#8221;, renomear o bloco body para content, fazer a estrutura√ß√£o com o html e passar as classes do bootstrap. Perceba que nesse caso n√£o precisamos fazer um &amp;#8220;for&amp;#8221; com o twig, pois estamos recebendo somente um array, ou seja, um post.&lt;/p&gt;

&lt;p&gt;Temos que dar uma aten√ß√£o para a data de cria√ß√£o, e a data de atualiza√ß√£o, n√£o estamos recebendo essas datas no formato correto. Para que possamos apresentar as datas, temos que passar um date() no twig, veja o exemplo abaixo&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;{{ post.createdAt | date(&#39;d/m/Y - H:m:s&#39;) }}
&lt;/pre&gt;

&lt;p&gt;Veja o arquivo show.html.twig pronto:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;{% extends &#34;::base.html.twig&#34; %} 

{% block title %}Blog - {{ post.title }}{% endblock %} 

{% block content %} 

&amp;lt;div class=&#34;container&#34;&amp;gt; 

    &amp;lt;div class=&#34;row&#34;&amp;gt; 

        &amp;lt;article class=&#34;col-lg-12&#34;&amp;gt; 

            &amp;lt;h1&amp;gt;{{ post.title }}&amp;lt;/h1&amp;gt; 

            &amp;lt;p&amp;gt;Escrito por: {{ post.author.name }}&amp;lt;/p&amp;gt;

            &amp;lt;p&amp;gt;Postado em: {{ post.createdAt | date(&#39;d/m/Y - H:m:s&#39;) }}&amp;lt;/p&amp;gt;

            &amp;lt;p&amp;gt;{{ post.content }}&amp;lt;/p&amp;gt; 

        &amp;lt;/article&amp;gt; 

    &amp;lt;/div&amp;gt; 
    
&amp;lt;/div&amp;gt; 

{% endblock %}
&lt;/pre&gt;

&lt;p&gt;Imagem da p√°gina pronta:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/061.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/061.png&#34; alt=&#34;Show post&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47981&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;conclus√£o&#34;&gt;Conclus√£o&lt;/h2&gt;

&lt;p&gt;Nossa p√°gina de visualiza√ß√£o de post, e nossa home, est√° estruturada e estilizada, temos que fazer a parte administrativa, tanto a administra√ß√£o de post, quanto de autores. Vou fazer essa parte em off. Os arquivos, encontram- se no github, os caminhos s√£o:&lt;/p&gt;

&lt;p&gt;src/Tableless/CoreBundle/Resources/views/Author/&lt;/p&gt;

&lt;p&gt;src/Tableless/CoreBundle/Resources/views/Posts/&lt;/p&gt;

&lt;p&gt;Links dos tutoriais anteriores:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2/&#34; title=&#34;instala√ß√£o&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì Instala√ß√£o&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-02/&#34; title=&#34;pt 02&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 02&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-03/&#34; title=&#34;pt 3&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 03&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-04/&#34; title=&#34;pt 4&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 04&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-05/&#34; title=&#34;pt 5&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 ‚Äì parte 05&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;O projeto &lt;a href=&#34;https://github.com/candidosouza/tableless&#34; title=&#34;Github do projeto&#34; target=&#34;_blank&#34;&gt;encontra-se no GitHub&lt;/a&gt;!&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Iniciando com Symfony 2 ‚Äì Parte 05</title>
      <link>https://tableless.github.io/hugo-public/iniciando-com-symfony-2-parte-05/</link>
      <pubDate>Thu, 19 Mar 2015 00:00:00 +0000</pubDate>
      
      <guid>https://tableless.github.io/hugo-public/iniciando-com-symfony-2-parte-05/</guid>
      <description>

&lt;p&gt;No &lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-04/&#34; title=&#34;Iniciando com symfony2 - parte 4&#34; target=&#34;_blank&#34;&gt;tutorial anterior&lt;/a&gt;, criamos a entidade Author, e fizemos o relacionamento com os posts, neste tutorial vamos fazer as configura√ß√µes adequadas para que possamos deixar nossa aplica√ß√£o estruturada corretamente, e vamos criar e configurar a p√°gina index, onde os usu√°rios ter√£o acesso para visualizar e ler os posts.&lt;/p&gt;

&lt;h2 id=&#34;configurando&#34;&gt;Configurando&lt;/h2&gt;

&lt;p&gt;Vamos come√ßar com as configura√ß√µes.&lt;/p&gt;

&lt;p&gt;Entrando no bundle CoreBundle, caminho: src/Tableless/CoreBundle, exclua a pasta Controller.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/021.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/021.png&#34; alt=&#34;Excluindo a pasta controller&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47743&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Ainda neste mesmo bundle vamos excluir a pasta view, caminho: src/Tableless/CoreBundle/Resources/view.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/031.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/031.png&#34; alt=&#34;Excluindo a pasta view&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47744&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Agora vamos entrar no bundle ModelBundle, caminho: src/Tableless/ModelBundle.&lt;/p&gt;

&lt;p&gt;E vamos mover a pasta Controller desse bundle para o bundle CoreBundle&lt;/p&gt;

&lt;p&gt;Vamos mover tamb√©m a pasta view do ModelBundle para o bundle CoreBundle.&lt;/p&gt;

&lt;p&gt;Depois das mudan√ßas, nossa estrutura de pastas ficar√° como na imagem abaixo:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/041.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/041.png&#34; alt=&#34;Estrutura de pastas pronta&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47746&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;configurando-os-controllers&#34;&gt;Configurando os Controllers&lt;/h2&gt;

&lt;p&gt;Vamos continuar nossas configura√ß√µes, agora vamos alterar nossos controllers para que os mesmos fiquem de acordo com a estrutura de pasta atual.&lt;/p&gt;

&lt;p&gt;Primeiramente, vamos excluir a rota do ModelBundle, pois n√£o vamos us√°-la.&lt;/p&gt;

&lt;p&gt;Entre no arquivo app/config/routing.yml e exclua as linhas abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-yml&#34;&gt;tableless_model:
    resource: &#34;@TablelessModelBundle/Controller/&#34;
    type:     annotation
    prefix:   /
&lt;/pre&gt;

&lt;p&gt;Deixando somente a rota tableless_core como mostrado na imagem abaixo:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/05.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/05.png&#34; alt=&#34;Arquivo routing.yml&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47747&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Agora vamos excluir o DefaultController.php, pois n√£o vamos usar esse controller.&lt;/p&gt;

&lt;p&gt;Abra o arquivo AuthorController.php, caminho: src/Tableless/CoreBundle/Controller/AuthorController.php&lt;/p&gt;

&lt;p&gt;Na linha 3, mude o namespace.&lt;/p&gt;

&lt;p&gt;De: Tableless\ModelBundle\Controller;&lt;/p&gt;

&lt;p&gt;Para: Tableless\CoreBundle\Controller;&lt;/p&gt;

&lt;p&gt;Na linha 43, mude a annotation:&lt;/p&gt;

&lt;p&gt;De: @Template(&amp;#8220;TablelessModelBundle:Author:new.html.twig&amp;#8221;)&lt;/p&gt;

&lt;p&gt;Para: @Template(&amp;#8220;TablelessCoreBundle:Author:new.html.twig&amp;#8221;)&lt;/p&gt;

&lt;p&gt;Agora vamos configurar o controller PostController, caminho: src/Tableless/CoreBundle/Controller/PostController.php, vamos fazer a mesma altera√ß√£o.&lt;/p&gt;

&lt;p&gt;Na linha 3, mude o namespace.&lt;/p&gt;

&lt;p&gt;De: Tableless\ModelBundle\Controller;&lt;/p&gt;

&lt;p&gt;Para: Tableless\CoreBundle\Controller;&lt;/p&gt;

&lt;p&gt;Na linha 43, mude a annotation:&lt;/p&gt;

&lt;p&gt;De: @Template(&amp;#8220;TablelessModelBundle:Post:new.html.twig&amp;#8221;)&lt;/p&gt;

&lt;p&gt;Para: @Template(&amp;#8220;TablelessCoreBundle:Post:new.html.twig&amp;#8221;)&lt;/p&gt;

&lt;p&gt;Para verificarmos se correu tudo bem, vamos fazer o teste.&lt;/p&gt;

&lt;p&gt;Rode o servidor&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ app/console server:run
&lt;/pre&gt;

&lt;p&gt;Entre nas urls:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://127.0.0.1:8000/post/&#34;&gt;http://127.0.0.1:8000/post/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://127.0.0.1:8000/author/&#34;&gt;http://127.0.0.1:8000/author/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Se tudo foi configurado corretamente, nossa aplica√ß√£o voltar√° a funcionar perfeitamente, veja:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/06.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/06.png&#34; alt=&#34;P√°gina index, e show&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47751&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;criando-um-controller&#34;&gt;Criando um Controller&lt;/h2&gt;

&lt;p&gt;Nesse momento vamos criar um index, para nossa aplica√ß√£o, para que seja nossa pagina principal, e possamos visualizar os posts de forma correta.&lt;/p&gt;

&lt;p&gt;Podemos criar o controller codificando, por√©m para efeito de did√°tica vamos criar atrav√©s do console.&lt;/p&gt;

&lt;p&gt;Entre no terminal e digite:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console generate:controller
&lt;/pre&gt;

&lt;p&gt;Ao digitarmos o comando acima e darmos enter, entramos no assistente do console do Symfony e ele nos comunica: Primeiro, voc√™ precisa dar o nome do controlador que voc√™ deseja gerar. Voc√™ deve usar a nota√ß√£o de atalho como AcmeBlogBundle:Post&lt;/p&gt;

&lt;p&gt;Nesse momento digitamos:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ Controller name: TablelessCoreBundle:IndexControler
&lt;/pre&gt;

&lt;p&gt;Ao darmos o nome do nosso controller e darmos enter, o assistente nos pergunta: Qual o formato que vamos configurar a nossa rota?&lt;/p&gt;

&lt;p&gt;E nos indica annotation, vamos deixar como est√°, e apenas damos enter:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;$ Routing format (php, xml, yml, annotation) [annotation]:
&lt;/pre&gt;

&lt;p&gt;A pr√≥xima pergunta √©:&lt;/p&gt;

&lt;p&gt;Qual o formato que vamos usar para template?&lt;/p&gt;

&lt;p&gt;Ele mesmo nos indica o twig. Apenas damos enter.&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;$ Template format (twig, php) [twig]:
&lt;/pre&gt;

&lt;p&gt;Ap√≥s o enter ele nos pede o nome de nossas a√ß√µes, que s√£o os m√©todos que vamos criar para o nosso controller.&lt;/p&gt;

&lt;p&gt;A primeira a√ß√£o (m√©todo) vamos chamar de indexAction, e damos enter.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ New action name (press  to stop adding actions): indexAction
&lt;/pre&gt;

&lt;p&gt;O assistente nos pede a rota, vamos digitar ‚Äú/‚Äù e damos enter.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ Action route [/index]: /
&lt;/pre&gt;

&lt;p&gt;Nos pergunta o caminho da nossa template, e ele nos indica um caminho, vamos deixar como est√° e apenas damos enter.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ Templatename (optional) [TablelessCoreBundle:IndexControler:index.html.twig]:
&lt;/pre&gt;

&lt;p&gt;Novamente o assistente nos pede para darmos um nome para uma nova a√ß√£o (m√©todo), essa nova a√ß√£o far√° com que o post seja visualizado para a leitura, vamos dar o nome de showAction.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ New action name (press  to stop adding actions): showAction
&lt;/pre&gt;

&lt;p&gt;O assistente nos pede a rota, e nos indica como ‚Äú/show‚Äù, vamos deixar como est√° e damos enter.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ Action route [/show]:
&lt;/pre&gt;

&lt;p&gt;Nos pergunta sobre caminho da template, e ele nos indica um caminho, vamos deixar como est√° e apenas damos enter.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ Templatename (optional) [TablelessCoreBundle:IndexControler:show.html.twig]:
&lt;/pre&gt;

&lt;p&gt;Ao darmos enter, entramos no modo de cria√ß√£o de uma nova a√ß√£o, por√©m n√£o queremos nenhuma outra a√ß√£o, ent√£o apenas damos um enter, para entrarmos no processo de finaliza√ß√£o.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ New action name (press  to stop adding actions):
&lt;/pre&gt;

&lt;p&gt;Ao entramos no processo de finaliza√ß√£o o assistente nos pergunta se queremos confirmar a gera√ß√£o desse controller, ele nos indica sim, como queremos, apenas damos enter.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ Do you confirm generation [yes]?
&lt;/pre&gt;

&lt;p&gt;Pronto! Nosso controller IndexController est√° criado, juntamente com suas templates, veja a imagem abaixo:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/07.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/07.png&#34; alt=&#34;Index controller&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47775&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Ao entrarmos na url: &lt;a href=&#34;http://127.0.0.1:8000/&#34;&gt;http://127.0.0.1:8000/&lt;/a&gt;, vamos entrar no nosso index, e receberemos a mensagem abaixo:&lt;/p&gt;

&lt;p&gt;Welcome to the IndexControler:index page&lt;/p&gt;

&lt;h2 id=&#34;criando-um-reposit√≥rio&#34;&gt;Criando um reposit√≥rio&lt;/h2&gt;

&lt;p&gt;Se entrarmos em nosso controller IndexController, caminho: src/Tableless/CoreBunde/ IndexController.php, vamos perceber que nossos m√©todos est√£o criados, por√©m n√£o est√£o implementados, vamos implement√°-los, mas queremos que nosso index apresente para o usu√°rio os √∫ltimos posts escritos, para que sempre o post mais atual seja apresentado em primeiro lugar, para isso devemos criar um reposit√≥rio para nossa entidade Post.&lt;/p&gt;

&lt;p&gt;Para isso, vamos entrar no bundle ModelBundle e crie uma pasta com o nome de Repository, dentro dessa pasta crie uma classe com o nome PostRepository.&lt;/p&gt;

&lt;p&gt;Com a classe PostRepository aberta, adicione o nemspace dessa classe, e de um extends na classe EntityRepository do Doctrine, n√£o se esquecendo de dar um use nessa classe.&lt;/p&gt;

&lt;p&gt;use Doctrine\ORM\EntityRepository;&lt;/p&gt;

&lt;p&gt;Crie um m√©todo privado com o nome getQueryBuilder e acrescente a EntityManager para que possamos usar nossa entidade Post, veja abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;private function getQueryBuilder()
{
    $em = $this-&amp;gt;getEntityManager();

    $queryBuilder = $em-&amp;gt;getRepository(&#39;TablelessModelBundle:Post&#39;)
    -&amp;gt;createQueryBuilder(&#39;p&#39;);

    return $queryBuilder;
 }
&lt;/pre&gt;

&lt;p&gt;Agora vamos criar um m√©todo publico chamado findAllInOrder, e vamos chamar o m√©todo getQueryBuilder(), para orden√°-lo da forma que queremos, para que seja mostrado o √∫ltimo post postado primeiro. Veja abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;public function findAllInOrder()
{
    $qb = $this-&amp;gt;getQueryBuilder()
    -&amp;gt;orderBy(&#39;p.createdAt&#39;, &#39;desc&#39;);

    return $qb-&amp;gt;getQuery()-&amp;gt;getResult();
}
&lt;/pre&gt;

&lt;p&gt;Veja a classe PostRepository pronta:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;?php

namespace Tableless\ModelBundle\Repository;

use Doctrine\ORM\EntityRepository;

class PostRepository extends EntityRepository
{
    private function getQueryBuilder()
    {
        $em = $this-&amp;gt;getEntityManager();
        $queryBuilder = $em-&amp;gt;getRepository(&#39;TablelessModelBundle:Post&#39;)
            -&amp;gt;createQueryBuilder(&#39;p&#39;);
        return $queryBuilder;
    }

     public function findAllInOrder()
    {
        $qb = $this-&amp;gt;getQueryBuilder()
            -&amp;gt;orderBy(&#39;p.createdAt&#39;, &#39;desc&#39;);

        return $qb-&amp;gt;getQuery()-&amp;gt;getResult();
    }
} 

&lt;/pre&gt;

&lt;p&gt;Agora temos que indicar para a entidade Post via annotation, onde est√° a classe PostRepository, para isso vamos abrir a entidade Post, caminho:src/Tableless/ModelBundle/Entity/Post.php, e acrescentar a annotation (repositoryClass=&amp;#8221;Tableless\ModelBundle\Repository\PostRepository&amp;#8221;) na linha 12 de sua entidade, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/**
 * Post
 *
 * @ORM\Table(name=&#34;post&#34;)
 * @ORM\Entity(repositoryClass=&#34;Tableless\ModelBundle\Repository\PostRepository&#34;)
 */
class Post extends Timestampable
{
    ...
&lt;/pre&gt;

&lt;h2 id=&#34;implementando-o-controller&#34;&gt;Implementando o controller&lt;/h2&gt;

&lt;p&gt;Vamos voltar para nosso IndexController, para que possamos implement√°- lo. Abra o IndexController , e no m√©todo indexAction() temos que chamar nossa entidade Post, para que atrav√©s dela chamemos o m√©todo findAllInOrder() da classe PostRepository, e retornar o resultado em forma de array, veja abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;public function indexAction()
    {
        $em = $this-&amp;gt;getDoctrine()-&amp;gt;getManager();

        $posts = $em-&amp;gt;getRepository(&#39;TablelessModelBundle:Post&#39;)-&amp;gt;findAllInOrder();

        return [
            &#39;posts&#39; =&amp;gt; $posts,
        ];
    } 
&lt;/pre&gt;

&lt;p&gt;Tamb√©m vamos implementar o m√©todo showAction(), para que seja buscado apena o post clickado pelo usu√°rio, para isso devemos passar um par√¢metro id, tanto no m√©todo, quanto na annotation para rota, para que seja buscado somente o post solicitado. Temos que chamar nossa entidade Post novamente, para que atrav√©s dela chamemos o m√©todo find(), que j√° vem pr√© configurado pelo Doctrine, por√©m se o usu√°rio requisitar um post que n√£o existe, temos que passar uma mensagem de erro, para inform√°- lo, veja abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/**
     * @Route(&#34;/show/{id}&#34;)
     * @Template()
     */
    public function showAction($id)
    {
        $em = $this-&amp;gt;getDoctrine()-&amp;gt;getManager();

        $post = $em-&amp;gt;getRepository(&#39;TablelessModelBundle:Post&#39;)-&amp;gt;find($id);

        if (!$post) {
            throw $this-&amp;gt;createNotFoundException(&#39;O post n√£o existe! Volte para home!&#39;);
        }

        return [
            &#39;post&#39; =&amp;gt; $post,
        ];
    }
&lt;/pre&gt;

&lt;p&gt;Veja o IndexController pronto:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;?php

namespace Tableless\CoreBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;

class IndexControlerController extends Controller
{
     /**
     * @Route(&#34;/&#34;)
     * @Template()
     */
    public function indexAction()
    {
        $em = $this-&amp;gt;getDoctrine()-&amp;gt;getManager();

        $posts = $em-&amp;gt;getRepository(&#39;TablelessModelBundle:Post&#39;)-&amp;gt;findAllInOrder();

        return [
            &#39;posts&#39; =&amp;gt; $posts,
        ];
    }

     /**
     * @Route(&#34;/show/{id}&#34;)
     * @Template()
     */
    public function showAction($id)
    {
        $em = $this-&amp;gt;getDoctrine()-&amp;gt;getManager();

        $post = $em-&amp;gt;getRepository(&#39;TablelessModelBundle:Post&#39;)-&amp;gt;find($id);

        if (!$post) {
            throw $this-&amp;gt;createNotFoundException(&#39;O post n√£o existe! Volte para home!&#39;);
        }

        return [
            &#39;post&#39; =&amp;gt; $post,
        ];
    }
}

&lt;/pre&gt;

&lt;p&gt;Para vemos como est√° ficando nossa aplica√ß√£o, abra a index.html.twig, do IndexController, caminho: src/Tableless/CoreBundle/Resouces/views/IndexController/index.html.twig e vamos dar um dump em posts, veja abaixo, vamos adicionar a linha 8:&lt;/p&gt;

&lt;pre class=&#34;lang-twig&#34;&gt;{% extends &#34;::base.html.twig&#34; %}

{% block title %}TablelessCoreBundle:IndexControler:index{% endblock %}

{% block body %}
Welcome to the IndexControler:index page

    {{ dump(posts) }}
    
{% endblock %}
&lt;/pre&gt;

&lt;p&gt;Vamos fazer a mesma modifica√ß√£o para o arquivo show.html.twig no mesmo diret√≥rio, por√©m ao em vez de dar um dump em posts, vamos dar um dump em post, sem o ‚Äús‚Äù no final, veja:&lt;/p&gt;

&lt;pre class=&#34;lang-html&#34;&gt;{% extends &#34;::base.html.twig&#34; %}

{% block title %}TablelessCoreBundle:IndexControler:show{% endblock %}

{% block body %}
Welcome to the IndexControler:show page

    {{ dump(post) }}
    
{% endblock %}
&lt;/pre&gt;

&lt;p&gt;Para vemos o resultado, entre nas urls:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://127.0.0.1:8000/&#34;&gt;http://127.0.0.1:8000/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://127.0.0.1:8000/show/{o&#34;&gt;http://127.0.0.1:8000/show/{o&lt;/a&gt; id do seu post}&lt;/p&gt;

&lt;p&gt;Veja as imagens para compara√ß√£o:&lt;/p&gt;

&lt;p&gt;index &amp;#8211; url: &lt;a href=&#34;http://127.0.0.1:8000/&#34;&gt;http://127.0.0.1:8000/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/08.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/08.png&#34; alt=&#34;index&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47767&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Pagina show ‚Äì url: &lt;a href=&#34;http://127.0.0.1:8000/show/4&#34;&gt;http://127.0.0.1:8000/show/4&lt;/a&gt; -&amp;gt; {o id do seu post} no meu caso 4.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/09.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/09.png&#34; alt=&#34;show&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47768&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;conclus√£o&#34;&gt;Conclus√£o&lt;/h2&gt;

&lt;p&gt;No tutorial anterior, eu comentei que iriamos configurar nosso projeto e come√ßarmos a trabalhar com o Twig, por√©m nossa configura√ß√£o e a cria√ß√£o do index, deixou este tutorial extenso, mas no pr√≥ximo tutorial, vamos trabalhar com o bootstrap e com o twig para que possamos visualizar nossos post em nossa home da forma adequada e bonita.&lt;/p&gt;

&lt;p&gt;Links dos tutoriais anteriores:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2/&#34; title=&#34;instala√ß√£o&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 &amp;#8211; Instala√ß√£o&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-02/&#34; title=&#34;parte 02&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 &amp;#8211; parte 02&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-03/&#34; title=&#34;parte 03&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 &amp;#8211; parte 03&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-04/&#34; title=&#34;parte 04&#34; target=&#34;_blank&#34;&gt;Iniciando com Symfony 2 &amp;#8211; parte 04&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;O projeto &lt;a href=&#34;https://github.com/candidosouza/tableless&#34; title=&#34;Git do projeto&#34; target=&#34;_blank&#34;&gt;encontra-se no GitHub&lt;/a&gt;!&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Iniciando com Symfony 2 ‚Äì Parte 04</title>
      <link>https://tableless.github.io/hugo-public/iniciando-com-symfony-2-parte-04/</link>
      <pubDate>Wed, 04 Mar 2015 00:00:00 +0000</pubDate>
      
      <guid>https://tableless.github.io/hugo-public/iniciando-com-symfony-2-parte-04/</guid>
      <description>

&lt;p&gt;Anteriormente, &lt;a href=&#34;http://tableless.com.br/iniciando-com-symfony-2-parte-03/&#34; title=&#34;Iniciando com symfony - parte-03&#34; target=&#34;_blank&#34;&gt;criamos a entidade Post&lt;/a&gt;, vamos dar continuidade ao nosso simples projeto, criando uma entidade Author, faremos o relacionamento para que cada autor fique ligado ao post que criou.&lt;/p&gt;

&lt;h2 id=&#34;criando-a-entidade-author&#34;&gt;Criando a entidade Author&lt;/h2&gt;

&lt;p&gt;Vamos criar a entidade Author, entre no terminal e digite:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console generate:doctrine:entity
&lt;/pre&gt;

&lt;p&gt;Vamos digitar o nome da entidade como : TablelessModelBundle:Author.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ The Entity shortcut name: TablelessModelBundle:Author
&lt;/pre&gt;

&lt;p&gt;Vamos mape√°-la usando annotation. Apenas damos enter.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ Configuration format (yml, xml, php, or annotation) [annotation]:
&lt;/pre&gt;

&lt;p&gt;O assistente nos pergunta: Qual ser√° o nome do nosso campo?&lt;/p&gt;

&lt;p&gt;Digitamos &amp;#8220;name&amp;#8221; e damos enter.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ New field name (press  to stop adding fields): name
&lt;/pre&gt;

&lt;p&gt;Ser√° do tipo string.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ Field type [string]:
&lt;/pre&gt;

&lt;p&gt;Com o tamanho de 100.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ Field length [255]: 100
&lt;/pre&gt;

&lt;p&gt;Quando o assistente nos perguntar novamente: Qual ser√° o novo campo? Damos enter para entrarmos no processo de finaliza√ß√£o. E nos pergunta, se queremos criar uma classe de reposit√≥rio, ele nos indica n√£o, vamos apenas dar um enter.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;Do you want to generate an empty repository class [no]?
&lt;/pre&gt;

&lt;p&gt;E para finalizar, o assistente pergunta se realmente queremos gerar a entidade. Como queremos, digitamos apenas enter.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ Do you confirm generation [yes]?
&lt;/pre&gt;

&lt;p&gt;Nossa entidade Author est√° pronta.&lt;/p&gt;

&lt;p&gt;Ao entrarmos na pasta src/Tableless/ModelBundle/Entity/ vamos encontr√°-la.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/02.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/02.png&#34; alt=&#34;Entidade Author criada&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47412&#34; srcset=&#34;uploads/2015/03/02.png 750w, uploads/2015/03/02-259x139.png 259w, uploads/2015/03/02-400x215.png 400w&#34; sizes=&#34;(max-width: 750px) 100vw, 750px&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Agora devemos adicionar a annotations, @ORM\Table(name=&amp;#8221;author&amp;#8221;) para o nome da nossa tabela, veja na linha 10:&lt;/p&gt;

&lt;p&gt;Veja toda a entidade Author:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;?php 

namespace Tableless\ModelBundle\Entity; 

use Doctrine\ORM\Mapping as ORM; 

/** 
 * Author 
 * 
 * @ORM\Table(name=&#34;author&#34;)
 * @ORM\Entity 
 */ 
class Author 
{ 
    /** 
     * @var integer 
     * 
     * @ORM\Column(name=&#34;id&#34;, type=&#34;integer&#34;) 
     * @ORM\Id 
     * @ORM\GeneratedValue(strategy=&#34;AUTO&#34;) 
     */ 
    private $id; 

    /** 
     * @var string 
     * 
     * @ORM\Column(name=&#34;name&#34;, type=&#34;string&#34;, length=100) 
     */ 
    private $name; 

    /** 
     * Get id 
     * 
     * @return integer 
     */ 
    public function getId() 
    { 
        return $this-&amp;gt;id; 
    } 

    /** 
     * Set name 
     * 
     * @param string $name 
     * @return Author 
     */ 
    public function setName($name) 
    { 
        $this-&amp;gt;name = $name; 
        return $this; 
    } 

    /** 
     * Get name 
     * 
     * @return string 
     */ 
    public function getName() 
    { 
        return $this-&amp;gt;name; 
    } 
} 
&lt;/pre&gt;

&lt;h2 id=&#34;configurando-o-projeto&#34;&gt;Configurando o projeto&lt;/h2&gt;

&lt;p&gt;Nesse momento vamos criar uma classe abstrata com o nome Timestampable, para que n√£o fiquemos repetindo c√≥digo, pois entidade Author tamb√©m receber√° uma data de cria√ß√£o e data de atualiza√ß√£o.&lt;/p&gt;

&lt;p&gt;Vamos l√°!&lt;/p&gt;

&lt;p&gt;Entre na pasta src/Tableless/ModelBundle/Entity/, e vamos criar uma classe abstrata com o nome Timestampable, para que possamos mape√° l√° vamos usar a classe do Doctrine Mapping e vamos dar um apelido de ORM, e fazer as annotations correspondentes.&lt;/p&gt;

&lt;p&gt;Nesse momento, ficar explicando detalhe por detalhe levar√° muito tempo, e o tutorial ficar√° extenso, veja a classe Timestampable pronta abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;?php 

namespace Tableless\ModelBundle\Entity; 

use Doctrine\ORM\Mapping as ORM; 
use Symfony\Component\Validator\Constraints as Assert; 

/** 
 * Timestampable abstract class 
 * @ORM\MappedSuperclass 
 */ 
abstract class Timestampable 
{ 
    /** 
     * @var \DateTime 
     * 
     * @ORM\Column(name=&#34;created_at&#34;, type=&#34;datetime&#34;) 
     * @Assert\NotBlank 
     */ 
    private $createdAt; 

    /** 
     * @var \DateTime 
     * 
     * @ORM\Column(name=&#34;updated_at&#34;, type=&#34;datetime&#34;) 
     * @Assert\NotBlank 
     */ 
    private $updatedAt; 

    /** 
     * Construct 
     */ 
    public function __construct() 
    { 
        $this-&amp;gt;createdAt = new \DateTime(); 
        $this-&amp;gt;updatedAt = new \DateTime(); 
    } 

    /** 
     * Set createdAt 
     * 
     * @param $createdAt 
     */ 
    public function setCreatedAt($createdAt) 
    { 
        $this-&amp;gt;createdAt = $createdAt; 
    } 

    /** 
     * Get CreatedAt 
     * 
     * @return \DateTime 
     */ 
    public function getCreatedAt() 
    { 
        return $this-&amp;gt;createdAt; 
    } 

    /** 
     * Set UpdatedAt 
     * 
     * @param \DateTime $updatedAt 
     */ 
    public function setUpdatedAt($updatedAt) 
    { 
        $this-&amp;gt;updatedAt = $updatedAt; 
    } 
    /** 
     * Get UpdateAt 
     * 
     * @return \DateTime 
     */ 
    public function getUpdatedAt() 
    { 
        return $this-&amp;gt;updatedAt; 
    } 
}
&lt;/pre&gt;

&lt;p&gt;Vamos estender essa classe na entidade Author, veja abaixo na linha 13:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;?php 

namespace Tableless\ModelBundle\Entity; 

use Doctrine\ORM\Mapping as ORM; 

/** 
 * Author 
 * 
 * @ORM\Table(name=&#34;author&#34;)
 * @ORM\Entity 
 */ 
class Author extends Timestampable 
{ 
‚Ä¶
&lt;/pre&gt;

&lt;p&gt;Temos que validar os campos da entidade Author, vamos dar um use em Constraints e apelid√°-la como Assert:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;use Symfony\Component\Validator\Constraints as Assert;
&lt;/pre&gt;

&lt;p&gt;vamos validar o campo name com @Assert\NotBlank, veja abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/** 
* @var string 
* 
* @ORM\Column(name=&#34;name&#34;, type=&#34;string&#34;, length=100) 
* @Assert\NotBlank 
*/ 
private $name; 
&lt;/pre&gt;

&lt;p&gt;Veja a entidade Author depois da configura√ß√£o:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;?php 

namespace Tableless\ModelBundle\Entity; 

use Doctrine\ORM\Mapping as ORM; 
use Symfony\Component\Validator\Constraints as Assert; 

/** 
 * Author 
 * 
 * @ORM\Table(name=&#34;author&#34;)
 * @ORM\Entity 
 */ 
class Author extends Timestampable 
{  
    /** 
     * @var integer 
     * 
     * @ORM\Column(name=&#34;id&#34;, type=&#34;integer&#34;) 
     * @ORM\Id 
     * @ORM\GeneratedValue(strategy=&#34;AUTO&#34;) 
     */ 
    private $id; 

    /** 
     * @var string 
     * 
     * @ORM\Column(name=&#34;name&#34;, type=&#34;string&#34;, length=100) 
     * @Assert\NotBlank 
     */ 
    private $name; 


    /** 
     * Get id 
     * 
     * @return integer 
     */ 
    public function getId() 
    { 
        return $this-&amp;gt;id; 
    } 

    /** 
     * Set name 
     * 
     * @param string $name 
     * @return Author 
     */ 
    public function setName($name) 
    { 
        $this-&amp;gt;name = $name; 
 
        return $this; 
    } 

    /** 
     * Get name 
     * 
     * @return string 
     */ 
    public function getName() 
    { 
        return $this-&amp;gt;name; 
    } 
} 
&lt;/pre&gt;

&lt;h2 id=&#34;configurando-a-entidade-post&#34;&gt;Configurando a entidade Post&lt;/h2&gt;

&lt;p&gt;Como criamos um classe abstrata, vamos alterar a entidade Post para que ela estenda a entidade Timestampable.&lt;/p&gt;

&lt;p&gt;Exclua os atributos $createdAt e $updatedAt e os m√©todos setCreatedAt(), getCreatedAt(), setUpdatedAt(), getUpdatedAt() e o __contruct(), e vamos estender a classe Timestampable, depois de configurada, a entidade Post ficar√° assim:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;?php 

namespace Tableless\ModelBundle\Entity; 

use Doctrine\ORM\Mapping as ORM; 
use Symfony\Component\Validator\Constraints as Assert; 

/** 
 * Post 
 * 
 * @ORM\Table(name=&#34;post&#34;) 
 * @ORM\Entity 
 */ 
class Post extends Timestampable 
{ 
    /** 
     * @var integer 
     * 
     * @ORM\Column(name=&#34;id&#34;, type=&#34;integer&#34;) 
     * @ORM\Id 
     * @ORM\GeneratedValue(strategy=&#34;AUTO&#34;) 
     */ 
    private $id; 

    /** 
     * @var string 
     * 
     * @ORM\Column(name=&#34;title&#34;, type=&#34;string&#34;, length=255) 
     * @Assert\NotBlank 
     */ 
    private $title; 

    /** 
     * @var string 
     * 
     * @ORM\Column(name=&#34;content&#34;, type=&#34;text&#34;) 
     * @Assert\NotBlank 
     */ 
    private $content; 

     /** 
     * Get id 
     * 
     * @return integer 
     */ 
    public function getId() 
    { 
        return $this-&amp;gt;id; 
    } 

    /** 
     * Set title 
     * 
     * @param string $title 
     * @return Post 
     */ 
    public function setTitle($title) 
    { 
        $this-&amp;gt;title = $title; 

     return $this; 
    } 

    /** 
     * Get title 
     * 
     * @return string 
     */ 
    public function getTitle() 
    { 
        return $this-&amp;gt;title; 
    } 

    /** 
     * Set content 
     * 
     * @param string $content 
     * @return Post 
     */ 
    public function setContent($content) 
    { 
        $this-&amp;gt;content = $content; 

        return $this; 
    } 

    /** 
     * Get content 
     * 
     * @return string 
     */ 
    public function getContent() 
    { 
        return $this-&amp;gt;content; 
    } 
} 
&lt;/pre&gt;

&lt;h2 id=&#34;atualizando-o-banco-de-dados&#34;&gt;Atualizando o banco de dados&lt;/h2&gt;

&lt;p&gt;Geramos a entidade Author e alteramos a entidade Post, dessa forma devemos atualizar nosso banco, para que o mesmo fique configurado de acordo com as entidades.&lt;/p&gt;

&lt;p&gt;Vamos ao terminal, e para atualizar o banco de dados vamos digitar o c√≥digo:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console doctrine:schema:update --force
&lt;/pre&gt;

&lt;p&gt;Teremos o resultado:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;Updating database schema... 
 Database schema updated successfully! &#34;1&#34; queries were execute
&lt;/pre&gt;

&lt;p&gt;Entrando no banco de dados vamos perceber que a tabela author criada:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/03.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/03.png&#34; alt=&#34;Tabela Author&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47434&#34; srcset=&#34;uploads/2015/03/03.png 750w, uploads/2015/03/03-259x139.png 259w, uploads/2015/03/03-400x215.png 400w&#34; sizes=&#34;(max-width: 750px) 100vw, 750px&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;criando-o-crud-da-entidade-author&#34;&gt;Criando o CRUD da entidade Author&lt;/h2&gt;

&lt;p&gt;Depois da configura√ß√£o das nossa entidade, vamos gerar o CRUD da entidade Author. Vamos digitar no console:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console generate:doctrine:crud
&lt;/pre&gt;

&lt;p&gt;Digitamos TablelessModelBundle:Author:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ The Entity shortcut name: TablelessModelBundle:Author
&lt;/pre&gt;

&lt;p&gt;O assistente nos pergunta se queremos gerar as a√ß√µes de grava√ß√£o, digitamos: yes.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ Do you want to generate the &#34;write&#34; actions [no]? Yes
&lt;/pre&gt;

&lt;p&gt;Como vamos configurar? Vamos deixar como est√°, annotation, e damos enter&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ Configuration format (yml, xml, php, or annotation) [annotation]:
&lt;/pre&gt;

&lt;p&gt;Como ser√° a rota? Vamos deixar como ele nos indica, damos enter.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ Routes prefix [/author]:
&lt;/pre&gt;

&lt;p&gt;Vamos confirmar a gera√ß√£o desse CRUD dando enter.&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ Do you confirm generation [yes]?
&lt;/pre&gt;

&lt;p&gt;Prontinho nosso CRUD da entidade Author est√° pronto, vamos testar.&lt;/p&gt;

&lt;p&gt;Inicie o servidor:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console server:run
&lt;/pre&gt;

&lt;p&gt;entre na url:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://127.0.0.1:8000/author/&#34;&gt;http://127.0.0.1:8000/author/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Vamos criar um autor com o nome Tableless&lt;/p&gt;

&lt;h2 id=&#34;relacionamento-com-doctrine&#34;&gt;Relacionamento com Doctrine&lt;/h2&gt;

&lt;p&gt;Vamos fazer um relacionamento no banco de dados, pois queremos que, ao criarmos um post, o mesmo esteja relacionado com o autor que o criou. N√£o entraremos em detalhes sobre relacionamento, caso tenha d√∫vidas, &lt;a href=&#34;http://doctrine-orm.readthedocs.org/en/latest/reference/association-mapping.html&#34; title=&#34;Documenta√ß√£o de relacionamento com Doctrine&#34; target=&#34;_blank&#34;&gt;consulte a documenta√ß√£o&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Vamos configurar novamente as entidades para que o relacionamento possa acontecer.&lt;/p&gt;

&lt;p&gt;Entre na entidade Post e acrescente o atributo $author com as seguintes annotations:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/** 
     * @var Author 
     * 
     * @ORM\ManyToOne(targetEntity=&#34;Author&#34;, inversedBy=&#34;posts&#34;) 
     * @ORM\JoinColumn(name=&#34;author_id&#34;, referencedColumnName=&#34;id&#34;, nullable=false) 
     * @Assert\NotBlank 
     */ 
    private $author;
&lt;/pre&gt;

&lt;p&gt;Entre na entidade Author e acrescente o atributo $post, com as seguintes annotations:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/** 
     * @var ArrayCollection 
     * 
     * @ORM\OneToMany(targetEntity=&#34;Post&#34;, mappedBy=&#34;author&#34;, cascade={&#34;remove&#34;}) 
     */ 
    private $post;
&lt;/pre&gt;

&lt;p&gt;Precisamos tamb√©m dar um use na classe ArrayCollection, do Doctrine, pois um autor ter√° v√°rios posts, e os posts ser√£o buscados como array, insira o c√≥digo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;use Doctrine\Common\Collections\ArrayCollection;
&lt;/pre&gt;

&lt;p&gt;Vamos criar um construtor, por√©m a entidade Timestampable j√° tem um construtor, para resolver esse problema, vamos adicionar um parent::__construct(), veja abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/** 
     * Constructor 
     */ 
    public function __construct() 
    { 
         parent::__construct();
    
        $this-&amp;gt;post = new ArrayCollection(); 
    }
&lt;/pre&gt;

&lt;p&gt;Agora vamos gerar os m√©todos necess√°rios da entidade Author, entre no console e digite:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console generate:doctrine:entities TablelessModelBundle:Author
&lt;/pre&gt;

&lt;p&gt;Temos que gerar tamb√©m para a entidade Post:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console generate:doctrine:entities TablelessModelBundle:Post
&lt;/pre&gt;

&lt;p&gt;Entre novamente na entidade Author e acrescente o m√©todo abaixo no final da entidade:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/** 
     * @return string 
     */ 
    public function __toString() 
    { 
        return $this-&amp;gt;getName(); 
    }
&lt;/pre&gt;

&lt;p&gt;Veja como ficou a entidade Author depois de configurarmos:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;?php 

namespace Tableless\ModelBundle\Entity; 

use Doctrine\ORM\Mapping as ORM; 
use Symfony\Component\Validator\Constraints as Assert; 
use Doctrine\Common\Collections\ArrayCollection; 

/** 
 * Author 
 * 
 * @ORM\Table(name=&#34;author&#34;) 
 * @ORM\Entity 
 */ 
class Author extends Timestampable 
{ 
   /** 
     * @var integer 
     * 
     * @ORM\Column(name=&#34;id&#34;, type=&#34;integer&#34;) 
     * @ORM\Id 
     * @ORM\GeneratedValue(strategy=&#34;AUTO&#34;) 
     */ 
    private $id; 

    /** 
     * @var string 
     * 
     * @ORM\Column(name=&#34;name&#34;, type=&#34;string&#34;, length=100) 
     * @Assert\NotBlank 
     */ 
    private $name; 

    /** 
     * @var ArrayCollection 
     * 
     * @ORM\OneToMany(targetEntity=&#34;Post&#34;, mappedBy=&#34;author&#34;, cascade={&#34;remove&#34;}) 
     */ 
    private $post; 

    /** 
     * Constructor 
     */ 
    public function __construct() 
    { 
         parent::__construct();

        $this-&amp;gt;post = new ArrayCollection(); 
    } 

        /** 
     * Get id 
     * 
     * @return integer 
     */ 
    public function getId() 
    { 
        return $this-&amp;gt;id; 
    } 

    /** 
     * Set name 
     * 
     * @param string $name 
     * @return Author 
     */ 
    public function setName($name) 
    { 
        $this-&amp;gt;name = $name; 

        return $this; 
    } 

    /** 
     * Get name 
     * 
     * @return string

    */ 
    public function getName() 
    { 
        return $this-&amp;gt;name; 
    } 

    /** 
     * Add post 
     * 
     * @param \Tableless\ModelBundle\Entity\Post $post 
     * @return Author 
     */ 
    public function addPost(\Tableless\ModelBundle\Entity\Post $post) 
    { 
        $this-&amp;gt;post[] = $post; 

        return $this; 
    } 

    /** 
     * Remove post 
     * 
     * @param \Tableless\ModelBundle\Entity\Post $post 
     */ 
    public function removePost(\Tableless\ModelBundle\Entity\Post $post) 
    { 
        $this-&amp;gt;post-&amp;gt;removeElement($post); 
    } 

    /** 
     * Get post 
     * 
     * @return \Doctrine\Common\Collections\Collection 
     */ 
    public function getPost() 
    { 
        return $this-&amp;gt;post; 
    } 

    /** 
     * @return string 
     */ 
    public function __toString() 
    { 
        return $this-&amp;gt;getName(); 
    } 
} 

&lt;/pre&gt;

&lt;p&gt;Veja a entidade Post, ap√≥s a configura√ß√£o:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;&amp;lt;?php 

namespace Tableless\ModelBundle\Entity; 

use Doctrine\ORM\Mapping as ORM; 
use Symfony\Component\Validator\Constraints as Assert; 

/** 
 * Post 
 * 
 * @ORM\Table(name=&#34;post&#34;) 
 * @ORM\Entity 
 */ 
class Post extends Timestampable 
{ 
    /** 
     * @var integer 
     * 
     * @ORM\Column(name=&#34;id&#34;, type=&#34;integer&#34;) 
     * @ORM\Id 
     * @ORM\GeneratedValue(strategy=&#34;AUTO&#34;) 
     */ 
    private $id; 

    /** 
     * @var string 
     * 
     * @ORM\Column(name=&#34;title&#34;, type=&#34;string&#34;, length=255) 
     * @Assert\NotBlank 
     */ 
    private $title; 

    /** 
     * @var string 
     * 
     * @ORM\Column(name=&#34;content&#34;, type=&#34;text&#34;) 
     * @Assert\NotBlank 
     */ 
    private $content; 

    /** 
     * @var Author 
     * 
     * @ORM\ManyToOne(targetEntity=&#34;Author&#34;, inversedBy=&#34;posts&#34;) 
     * @ORM\JoinColumn(name=&#34;author_id&#34;, referencedColumnName=&#34;id&#34;, nullable=false) 
     * @Assert\NotBlank
    */ 
    private $author; 


    /** 
     * Get id 
     * 
     * @return integer 
     */ 
    public function getId() 
    { 
        return $this-&amp;gt;id; 
    } 

    /** 
     * Set title 
     * 
     * @param string $title 
     * @return Post 
     */ 
    public function setTitle($title) 
    { 
        $this-&amp;gt;title = $title; 

        return $this; 
    } 

    /** 
     * Get title 
     * 
     * @return string 
     */ 
    public function getTitle() 
    { 
        return $this-&amp;gt;title; 
    } 

    /** 
     * Set content 
     * 
     * @param string $content 
     * @return Post 
     */ 
    public function setContent($content) 
    { 
        $this-&amp;gt;content = $content; 

        return $this; 
    } 

    /** 
     * Get content
     * 
     * @return string 
     */ 
    public function getContent() 
    { 
        return $this-&amp;gt;content; 
    } 

    /** 
     * Set author 
     * 
     * @param \Tableless\ModelBundle\Entity\Author $author 
     * @return Post 
     */ 
    public function setAuthor(\Tableless\ModelBundle\Entity\Author $author) 
    { 
        $this-&amp;gt;author = $author; 

        return $this; 
    } 

    /** 
     * Get author 
     * 
     * @return \Tableless\ModelBundle\Entity\Author 
     */ 
    public function getAuthor() 
    { 
        return $this-&amp;gt;author; 
    } 
} 
&lt;/pre&gt;

&lt;p&gt;Agora vamos atualizar o banco de dados para gerar o relacionamento, para isso apague todo o conte√∫do das tabelas do banco de dados, caso n√£o o fa√ßa, ocorrer√° erro,&lt;/p&gt;

&lt;p&gt;Ap√≥s apagar o conte√∫do do banco, rode o comando no console:&lt;/p&gt;

&lt;pre class=&#34;lang-bash&#34;&gt;$ php app/console doctrine:schema:update --force
&lt;/pre&gt;

&lt;h2 id=&#34;corrigindo-os-formul√°rios&#34;&gt;Corrigindo os formul√°rios&lt;/h2&gt;

&lt;p&gt;Entre na classe PostType, caminho: src/Tableless/ModelBundle/Form/PostType, e acrescente a linha abaixo, no m√©todo buildForm:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;-&amp;gt;add(&#39;author&#39;)
&lt;/pre&gt;

&lt;p&gt;Tamb√©m vamos apagar as linhas:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;-&amp;gt;add(&#39;createdAt&#39;) 
 -&amp;gt;add(&#39;updatedAt&#39;) 
&lt;/pre&gt;

&lt;p&gt;Pois n√£o precisamos inserir as datas, em que o post foi criado, ou alterado, isso acontecer√° automaticamente!&lt;/p&gt;

&lt;p&gt;Depois das modifica√ß√µes, o m√©todo formBuilder ficar√° como abaixo:&lt;/p&gt;

&lt;pre class=&#34;lang-php&#34;&gt;/** 
     * @param FormBuilderInterface $builder 
     * @param array $options 
     */ 
    public function buildForm(FormBuilderInterface $builder, array $options) 
    { 
        $builder 
            -&amp;gt;add(&#39;title&#39;) 
            -&amp;gt;add(&#39;content&#39;) 
            -&amp;gt;add(&#39;author&#39;) 
        ; 
    }
&lt;/pre&gt;

&lt;p&gt;Tudo configurado para que possamos criar nossos posts.&lt;/p&gt;

&lt;p&gt;Para verificarmos se est√° tudo correto, precisamos criar primeiramente um autor, depois criamos um post, onde teremos que selecionar um autor, para o mesmo.&lt;/p&gt;

&lt;p&gt;Veja abaixo:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://tableless.com.br/wp-content/uploads/2015/03/04.png&#34;&gt;&lt;img src=&#34;http://tableless.com.br/wp-content/uploads/2015/03/04.png&#34; alt=&#34;autor&#34; width=&#34;750&#34; height=&#34;403&#34; class=&#34;alignnone size-full wp-image-47469&#34; srcset=&#34;uploads/2015/03/04.png 750w, uploads/2015/03/04-259x139.png 259w, uploads/2015/03/04-400x215.png 400w&#34; sizes=&#34;(max-width: 750px) 100vw, 750px&#34; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Lembrando que a url de autor √©:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://127.0.0.1:8000/author/&#34;&gt;http://127.0.0.1:8000/author/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;e a url de post √©:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://127.0.0.1:8000/post/&#34;&gt;http://127.0.0.1:8000/post/&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&#34;conclus√£o&#34;&gt;Conclus√£o&lt;/h2&gt;

&lt;p&gt;Vamos terminar este tutorial, pois seu conte√∫do est√° muito extenso, no pr√≥ximo, vamos fazer as configura√ß√µes necess√°rias em nossa simples aplica√ß√£o, e vamos criar um index, para mostrar nossos posts, que configuraremos com o Bootstrap, e com o template engine twig. O projeto &lt;a href=&#34;https://github.com/candidosouza/tableless&#34; title=&#34;GitHub do projeto&#34; target=&#34;_blank&#34;&gt;encontra-se no GitHub&lt;/a&gt;!&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>