<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Strict Mode on Tableless</title>
    <link>http://tableless.com.br/tags/strict-mode/index.xml</link>
    <description>Recent content in Strict Mode on Tableless</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>pt-br</language>
    <atom:link href="http://tableless.com.br/tags/strict-mode/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>JavaScript Strict Mode</title>
      <link>http://tableless.com.br/javascript-strict-mode/</link>
      <pubDate>Thu, 17 Jul 2014 00:00:00 +0000</pubDate>
      
      <guid>http://tableless.com.br/javascript-strict-mode/</guid>
      <description>

&lt;h2 id=&#34;o-que-Ã©-e-porque-usÃ¡-lo&#34;&gt;O que Ã© e porque usÃ¡-lo&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;ECMAScript5&lt;/strong&gt; introduziu oÂ &lt;strong&gt;&amp;#8220;use strict&amp;#8221;&lt;/strong&gt;, que basicamente faz o browser interpretar o cÃ³digo JavaScript no modo mais rigoroso. Quando usamos o JS em strict mode, o browser mostra os erros que antes eram silenciados, como utilizar uma variÃ¡vel que nÃ£o foi declarada, utilizar palavras reservadas no cÃ³digo, ou utilizar recursos da linguagem que jÃ¡ foram declarados obsoletos e atÃ© mesmo, proibindo o uso de partes da linguagem que sÃ£o tidas como problemÃ¡ticas, nos forÃ§ando a escrever um cÃ³digo de melhor qualidade e ajudando a capturar bugs mais precocemente. Sem habilitarmos o modo restrito, o cÃ³digo abaixo Ã© executado sem lanÃ§ar qualquer excepÃ§Ã£o, ainda que seja uma mÃ¡ prÃ¡tica utilizar a variÃ¡vel â€œnomeâ€ sem declarÃ¡-la:&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;function minhaFuncao() {
    nome = &#34;Caio Proiete&#34;;
    // ...
 } 
 minhaFuncao();
&lt;/pre&gt;

&lt;p&gt;Se habilitarmos o strict mode, serÃ¡ lanÃ§ada uma excepÃ§Ã£o para notificar que temos um problema no cÃ³digo:&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;function minhaFuncao() {
    &#34;use strict&#34;;
 
    // 0x800a13b2 - JavaScript runtime error: Variable undefined in strict mode
    nome = &#34;Caio Proiete&#34;;
    // ...
}

minhaFuncao();
&lt;/pre&gt;

&lt;h2 id=&#34;habilitando&#34;&gt;Habilitando&lt;/h2&gt;

&lt;p&gt;Podemos habilitar o modo restrito em diferentes Ã¢mbitos: A primeira forma Ã© a nÃ­vel de arquivo. Para isso, basta por a string &lt;code&gt;&amp;quot;use strict&amp;quot;;&lt;/code&gt; no comeÃ§o de um arquivo JS para que todo o cÃ³digo deste arquivo seja executado no modo restrito. Nenhum cÃ³digo pode vir antes da declaraÃ§Ã£o &amp;#8220;use strict&amp;#8221;; (apenas whitespace e comentÃ¡rios sÃ£o permitidos). Caso um trecho de cÃ³digo apareÃ§a antes, o modo restritoÂ nÃ£o Ã© disparado.&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;// cÃ³digo &#34;strict&#34;
 &#34;use strict&#34;;
 var foo = &#34;bar&#34;;

 // cÃ³digo &#34;nÃ£o strict&#34;
 var whatsUp = &#34;suuup&#34;;
 &#34;use strict&#34;;

&lt;/pre&gt;

&lt;p&gt;A outra forma de uso Ã© a nÃ­vel de funÃ§Ã£o. Quando usado dentro de uma funÃ§Ã£o, apenas o cÃ³digo dentro dela Ã© executado no modoÂ restrito. Todo o cÃ³digo externo continua a ser executado normalmente.&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;function foo() {
  &#34;use strict&#34;;
  // cÃ³digo da funÃ§Ã£o em modo &#34;strict&#34;
}

function bar() {
  // cÃ³digo da funÃ§Ã£o em modo &#34;nÃ£o strict&#34;
}
&lt;/pre&gt;

&lt;p&gt;Hoje Ã© muito comum concatenarmos arquivos para diminuir a quantidade de dados trafegados e o nÃºmero de requisiÃ§Ãµes. Para nÃ£o disparar o modoÂ restritoÂ em cÃ³digo que nÃ£o foi testado neste modo, Ã© interessante deixarmos o cÃ³digo que roda e foi testado para rodar no modo restritoÂ isolado. As funÃ§Ãµes de invocaÃ§Ã£o imediata sÃ£o perfeitas para isso.&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;// cÃ³digo no modo &#34;nÃ£o strict&#34;
(function() {
  &#34;use strict&#34;;
  // cÃ³digo no modo &#34;strict&#34;
}());
// cÃ³digo no modo &#34;nÃ£o strict&#34;
&lt;/pre&gt;

&lt;h2 id=&#34;o-que-muda&#34;&gt;O que muda?&lt;/h2&gt;

&lt;p&gt;OÂ _strict modeÂ _trouxe vÃ¡rias mudanÃ§as na forma de como o JavaScript Ã© executado. Mas vouÂ focar nas principais partes. Caso queira descer mais ainda na toca do coelho, o artigo do&lt;em&gt;Â &lt;/em&gt;&lt;span style=&#34;text-decoration: underline&#34;&gt;&lt;a style=&#34;color: #666666;text-decoration: underline&#34; href=&#34;http://dmitrysoshnikov.com/ecmascript/es5-chapter-2-strict-mode/&#34;&gt;Dmitry Soshnikov&lt;/a&gt;Â Ã© uma Ã³tima leitura sobre todos os detalhes das mudanÃ§as que oÂ &lt;em&gt;strict mode&lt;/em&gt;Â trouxe.&lt;/p&gt;&lt;/p&gt;

&lt;h3 id=&#34;remoo_do_with&#34;&gt;
  RemoÃ§Ã£o doÂ &lt;em&gt;with&lt;/em&gt;
&lt;/h3&gt;

&lt;p&gt;
  A tÃ£o mal compreendida declaraÃ§Ã£oÂ &lt;em&gt;&lt;code&gt;with&lt;/code&gt;&lt;/em&gt;&lt;em&gt;Â &lt;/em&gt;foi removida da linguagem. NoÂ &lt;strong&gt;&lt;em&gt;strict mode&lt;/em&gt;&lt;/strong&gt;Â seu uso gera um erro de sintaxe.
&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;&#34;use strict&#34;;
// gera um erro de sintaxe no &#34;strict mode&#34;
with (location) {
  console.log(href);
}
&lt;/pre&gt;

&lt;h3 id=&#34;declarao_implcita_de_variveis_globais&#34;&gt;
  DeclaraÃ§Ã£o implÃ­cita deÂ variÃ¡veis globais
&lt;/h3&gt;

&lt;p&gt;
  Um dos erros mais comuns em JavaScript. Sem oÂ &lt;em&gt;strict mode&lt;/em&gt;, uma nova variÃ¡vel global Ã© criada sempre que atribuÃ­mos um valor a uma variÃ¡vel nÃ£o declarada. No modoÂ restrito, isto gera um erro.
&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;// gera um erro no &#34;strict mode&#34;
(function() {
  &#34;use strict&#34;;
  variavelNaoDeclarada = &#39;foo&#39;;
}());
&lt;/pre&gt;

&lt;h3 id=&#34;restrio_de_nomes&#34;&gt;
  RestriÃ§Ã£o de nomes
&lt;/h3&gt;

&lt;p&gt;
  O modoÂ restritoÂ impÃµe uma sÃ©rie de restriÃ§Ãµes aos nomes de variÃ¡veis, funÃ§Ãµes e parÃ¢metros.Â &lt;code&gt;eval&lt;/code&gt;Â eÂ &lt;em&gt;&lt;code&gt;arguments&lt;/code&gt;&lt;/em&gt;&lt;em&gt;Â &lt;/em&gt;nÃ£o mais podem ser usados como identificadores, muito menos tentar atribuir um valor a eles. O que Ã© muito bom, uma vez que o JavaScript possui nativamente uma funÃ§Ã£oÂ &lt;code&gt;eval&lt;/code&gt;Â e um objetoÂ &lt;em&gt;&lt;code&gt;arguments&lt;/code&gt;&lt;/em&gt;.
&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;// gera um erro de sintaxe no &#34;strict mode&#34;
function() {
  &#34;use strict&#34;;
  arguments = &#39;foo&#39;;
}
&lt;/pre&gt;

&lt;p&gt;
  Algumas palavras tambÃ©m sÃ£o proibidas de serem usadas como identificadores pois sÃ£o candidatas a serem usadas como nomes de futurasÂ &lt;em&gt;features&lt;/em&gt;Â da linguagem. Entre elas estÃ£o:
&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    implements
  &lt;/li&gt;
  &lt;li&gt;
    interface
  &lt;/li&gt;
  &lt;li&gt;
    let
  &lt;/li&gt;
  &lt;li&gt;
    package
  &lt;/li&gt;
  &lt;li&gt;
    private
  &lt;/li&gt;
  &lt;li&gt;
    protected
  &lt;/li&gt;
  &lt;li&gt;
    public
  &lt;/li&gt;
  &lt;li&gt;
    static
  &lt;/li&gt;
  &lt;li&gt;
    yield
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;uso_do_this&#34;&gt;
  Uso doÂ this
&lt;/h3&gt;

&lt;p&gt;
  O uso doÂ &lt;code&gt;this&lt;/code&gt;Â foi levemente modificado. Quando usado dentro de uma funÃ§Ã£o, oÂ &lt;code&gt;thisÂ &lt;/code&gt;aponta para o objeto que contem a funÃ§Ã£o. PorÃ©m quando a funÃ§Ã£o nÃ£o pertence a um objeto especÃ­fico, ele aponta para o objeto globalÂ &lt;code&gt;window&lt;/code&gt;.
&lt;/p&gt;

&lt;p&gt;
  No modo restrito, caso oÂ &lt;code&gt;this&lt;/code&gt;Â seja usado em uma funÃ§Ã£o que Ã© definida no escopo global, ele retorna o valorÂ &lt;code&gt;undefined&lt;/code&gt;. Caso uma funÃ§Ã£o pertenÃ§a a um objeto, ele continua a apontar para o objeto, como acontecia anteriormente.
&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;// retorna &#34;undefined&#34;
function() {
  &#34;use strict&#34;;
  return this;
}
&lt;/pre&gt;

&lt;p&gt;
  Isso evita erros comuns com funÃ§Ãµes usadas como construtores. No cÃ³digo abaixo chamamos uma funÃ§Ã£o construtora sem o uso doÂ &lt;code&gt;new&lt;/code&gt;. No modo nÃ£oÂ restrito, oÂ &lt;code&gt;thisÂ &lt;/code&gt;apontaria paraÂ &lt;code&gt;window&lt;/code&gt;Â e uma variÃ¡vel globalÂ &lt;code&gt;nome&lt;/code&gt;Â seria criada. Como noÂ &lt;em&gt;strict mode&lt;/em&gt;Â oÂ &lt;code&gt;this&lt;/code&gt;Â retornaÂ &lt;code&gt;undefined&lt;/code&gt;, e nÃ£o podemos adicionar propriedades a&lt;code&gt;undefined&lt;/code&gt;, um erro Ã© gerado. Quando usado da forma apropriada, com oÂ &lt;code&gt;new&lt;/code&gt;, nenhum erro Ã© disparado.
&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;&#34;use strict&#34;;

function Blog(nome) {
  this.nome = nome;
}

// gera um erro no &#34;strict mode&#34;
var blog = Blog(&#39;Loop Infinito&#39;);
&lt;/pre&gt;

&lt;h3 id=&#34;parmetros_e_propriedades_duplicadas&#34;&gt;
  ParÃ¢metros e propriedadesÂ duplicadas
&lt;/h3&gt;

&lt;p&gt;
  O JavaScript nÃ£o reclama caso vocÃª declare duas propriedades de um objeto com o mesmo nome. A Ãºltima declaraÃ§Ã£o vai simplesmente sobrescrever a anterior. O modo restritoÂ forÃ§a o uso de nomes Ãºnicos de propriedades.
&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;&#34;use strict&#34;;

// gera um erro de sintaxe no modo strict
obj = {
  foo: 1,
  bar: 2,
  foo: 3
}
&lt;/pre&gt;

&lt;p&gt;
  Com o nome de parÃ¢metros temos um cenÃ¡rio parecido. Normalmente o JavaScript aceita como sintaxe vÃ¡lida a declaraÃ§Ã£o de parÃ¢metros com o mesmo nome. No modoÂ restritoÂ isso gera um erro de sintaxe.
&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;// gera um erro de sintaxe
function foo(param1, param1) {
  &#34;use strict&#34;;
  return param1 + 1;
}
&lt;/pre&gt;

&lt;h3&gt;
  VariÃ¡veis do contextoÂ &lt;em&gt;eval()&lt;/em&gt;
&lt;/h3&gt;

&lt;p&gt;
  OÂ &lt;code&gt;eval&lt;/code&gt;, em cÃ³digo nÃ£oÂ &lt;em&gt;strict&lt;/em&gt;, pode adicionar variÃ¡veis ao contexto em que ele estÃ¡ inserido. E antes doÂ &lt;abbr title=&#34;JavaScript Object Notation&#34;&gt;JSON&lt;/abbr&gt;Â ser nativamente implementado nosÂ &lt;em&gt;browsers&lt;/em&gt;, oÂ &lt;code&gt;eval&lt;/code&gt;Â era muito usado para construir objetos a partir deÂ &lt;em&gt;strings&lt;/em&gt;Â e os inserir no contexto externo aoÂ &lt;code&gt;eval&lt;/code&gt;.
&lt;/p&gt;

&lt;p&gt;
  Com oÂ &lt;em&gt;strict mode&lt;/em&gt;, oÂ &lt;code&gt;eval&lt;/code&gt;Â nÃ£o pode mais adicionar variÃ¡veis fora de seu contexto. VariÃ¡veis adicionadas noÂ &lt;code&gt;eval&lt;/code&gt;Â ficam contidas no contexto doÂ &lt;code&gt;eval&lt;/code&gt;. No cÃ³digo abaixo, sem oÂ &lt;em&gt;strict mode&lt;/em&gt;, seria inserido uma variÃ¡velÂ &lt;code&gt;foo&lt;/code&gt;Â e o valor doÂ &lt;code&gt;alert&lt;/code&gt;Â seria â€œbarâ€. NoÂ &lt;em&gt;strict modeÂ &lt;/em&gt;acontece um erro de sintaxe pois a variÃ¡vel nÃ£o foi definida.
&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;&#34;use strict&#34;;
eval(&#39;var foo=&#34;bar&#34;;&#39;);
alert(foo); // gera um erro de sintaxe no &#34;strict mode&#34;
&lt;/pre&gt;

&lt;h3 id=&#34;nmeros_no_sistema_octal&#34;&gt;
  NÃºmeros no sistemaÂ octal
&lt;/h3&gt;

&lt;p&gt;
  NÃºmeros no sistema octal sÃ£o nÃºmeros representados na base 8. Ou seja, 10 em octal equivale a 8 em decimal. Em JavaScript, e em vÃ¡rias outras linguagens, os nÃºmeros no sistema octal sÃ£o representados com um 0 na frente do nÃºmero. 023 em JavaScript equivale a 19 em decimal. Isso gerava muita confusÃ£o, jÃ¡ que muitos achavam que um zero a esquerda nÃ£o iria fazer nenhuma diferenÃ§a na representaÃ§Ã£o do nÃºmero.
&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;&#34;use strict&#34;;

// gera um erro de sintaxe no modo strict
var foo = 023;
&lt;/pre&gt;

&lt;p&gt;
  No modoÂ restritoÂ o uso de nÃºmeros no sistema octal nÃ£o Ã© permitido. Caso um 0 seja posto na frente de um nÃºmero octal vÃ¡lido, serÃ¡ gerado um erro de sintaxe. Caso contrÃ¡rio ele serÃ¡ simplesmente tratado como decimal.
&lt;/p&gt;

&lt;pre class=&#34;lang-javascript&#34;&gt;&#34;use strict&#34;;

// octal vÃ¡lido. gera erro de sintaxe no &#34;strict mode&#34;
var foo = 023;

// ocatal nÃ£o vÃ¡lido. Ã© tratado como decimal
var bar = 08;
&lt;/pre&gt;

&lt;p&gt;
  Como o nÃºmero 08 nÃ£o Ã© um nÃºmero octal vÃ¡lido, jÃ¡ que nÃºmeros no sistema octal vÃ£o de 0 a 7, ele Ã© tratado como um nÃºmero decimal. No caso do nÃºmero 023, por ser um octal vÃ¡lido, um erro de sintaxe Ã© gerado. Caso vocÃª nÃ£o saiba o que um octal Ã©, ande pela sombra evitando o uso de 0â€™s na frente de nÃºmeros.
&lt;/p&gt;

&lt;h2&gt;
  Suporte
&lt;/h2&gt;

&lt;p&gt;
  OÂ &lt;em&gt;strict mode&lt;/em&gt;Â pode ser usado sem medo em todos os navegadores. Caso um navegador que nÃ£o o implemente passe pela declaraÃ§Ã£oÂ &lt;code&gt;&#34;use strict&#34;;&lt;/code&gt;, ele irÃ¡ tratÃ¡-la como umaÂ &lt;em&gt;string&lt;/em&gt;Â e nÃ£o irÃ¡ afetar o comportamento do cÃ³digo seguinte.
&lt;/p&gt;

&lt;p&gt;
  O cenÃ¡rio contrÃ¡rio tambÃ©m Ã© compatÃ­vel. Caso vocÃª desenvolva JavaScript em modo restrito em um navegador que o implementa, o cÃ³digo vÃ¡lido no modo restrito deste navegador Ã© retrocompatÃ­vel com qualquer outro que implemente o ECMAScript 3. Ou seja, irÃ¡ rodar atÃ© no IE. ğŸ˜€ haha
&lt;/p&gt;

&lt;p&gt;
  De qualquer forma, vocÃª pode ter acesso a lista de compatibilidade do &amp;#8220;use strict&amp;#8221; junto aos navegadores, no no seguinte link: &lt;a href=&#34;http://caniuse.com/use-strict&#34;&gt;CanIUse&lt;/a&gt;
&lt;/p&gt;

&lt;h2&gt;
  Concluindo
&lt;/h2&gt;

&lt;p&gt;
  OÂ Modo restritoÂ alÃ©m de melhorar a legibilidade e estabilidade do seu cÃ³digo, ajuda a diminuir erros e ainda melhora a seguranÃ§a associada Ã  execuÃ§Ã£o do cÃ³digo.Seu suporte Ã© muito amplo e mesmo que nÃ£o seja suportado nÃ£o irÃ¡ atrapalhar em nada na execuÃ§Ã£o do cÃ³digo, ou seja, nÃ£o hÃ¡ motivos para nÃ£o utiliza-lo.
&lt;/p&gt;

&lt;p&gt;
  Espero que tenham gostado do artigo.
&lt;/p&gt;

&lt;p&gt;
  DÃºvidas, criticas, sugestÃµes&amp;#8230; nos comentÃ¡rios ğŸ˜‰
&lt;/p&gt;

&lt;h2&gt;
  ReferÃªncias
&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;a href=&#34;http://www.nczonline.net/blog/2012/03/13/its-time-to-start-using-javascript-strict-mode/&#34;&gt;Nicholas C. Zakas. Itâ€™s time to start using JavaScript strict mode&lt;/a&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;a href=&#34;http://loopinfinito.com.br/2013/07/16/javascript-strict-mode/&#34;&gt;Caio Gondim. JavaScript Strict Mode.Â Lopinfinito&lt;/a&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;a href=&#34;http://tutsmais.com.br/blog/javascript-2/o-que-e-o-mode-strict-dojavascript/&#34;&gt;Rodrigo Nery. O que Ã© o Mode Strict no JavaScript.&lt;/a&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>