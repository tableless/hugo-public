
<!DOCTYPE html>
<html lang="pt-br" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <base href="https://tableless.github.io/hugo-public/">
  <title>Tableless</title>
  <link rel="canonical" href="https://tableless.github.io/hugo-public/codigo-limpo/">
  <link href="" rel="alternate" type="application/rss+xml" title="Tableless" />
  <link rel="stylesheet" href="https://tableless.github.io/hugo-public/css/style.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css">

</head>
<body>


  <header id="tb-header">
    <a href="https://tableless.github.io/hugo-public/" class="tb-logo"><img src="images/logo.svg"></a>

    

    <nav id="tb-menu">
      <ul>

        
          
              
            <li>
              <a href="/hugo-public/categories/html">
                  
                  HTML
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/css/">
                  
                  CSS
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/javascript/">
                  
                  JavaScript
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/back-end/">
                  
                  Back-end
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/wordpress/">
                  
                  WordPress
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/acessibilidade/">
                  
                  Acessibilidade
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/design/">
                  
                  Design
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/t%C3%A9cnicas-e-pr%C3%A1ticas/">
                  
                  Na prática
              </a>
          
            </li>
          

      </ul>
    </nav>

  </header>

  <header class="tb-post-header">
    <h1 class="tb-hero-title"><a href="/hugo-public/codigo-limpo/">Código Limpo</a></h1>
  <p class="tb-hero-p">
    
    Um dos assuntos que costumo discutir bastante com a galera é sobre qualidade de código. Nesses papos sempre vem questões como: quais práticas podemos adotar para ter um código de alta qualidade? E como sabemos se o nosso código está bom? Como temos certeza de que estamos no caminho certo?
Vou explicar meu humilde ponto de vista com exemplos e opiniões sobre qualidade de código. Vou abordar casos de uso com JavaScript, mas nada te impede aplicar muitas dessas dicas usando outras linguagens.
    
  </p>
      <span class="tb-author">por <a href="/hugo-public/author/alan-cezar">Alan Cezar</a></span>


  </header>


<section class="tb-post">

  <section class="tb-post-content">
    <article class="tb-post-article">
      

<p>Um dos assuntos que costumo discutir bastante com a galera é sobre qualidade de código. Nesses papos sempre vem questões como: quais práticas podemos adotar para ter um código de alta qualidade? E como sabemos se o nosso código está bom? Como temos certeza de que estamos no caminho certo?</p>

<p>Vou explicar meu humilde ponto de vista com exemplos e opiniões sobre qualidade de código. Vou abordar casos de uso com JavaScript, mas nada te impede aplicar muitas dessas dicas usando outras linguagens.</p>

<h2 id="gdd-8211-gambiarra-driven-development">GDD &#8211; Gambiarra Driven Development</h2>

<p>Vamos começar pela metodologia mais antiga e talvez a mais adotada no mercado. Já trabalhei com profissionais que defendiam com unhas e dentes o não uso de padrões e boas práticas. Vamos ver as <del>desculpas</del> justificativas mais usadas:</p>

<ol>
<li>O projeto é muito simples. Não precisa de muita frescura.</li>
<li>Faço isso há muitos anos e dificilmente tenho problemas.</li>
<li>Desse jeito entrego em 10 minutos o que faríamos em horas.</li>
<li>Não preciso padronizar, o código tá fácil de entender.</li>
<li>Não temos tempo para documentar.</li>
<li>Não temos tempo para escrever testes.</li>
<li>Não temos tempo para refatorar.</li>
<li>Esse código aí não é meu.</li>
</ol>

<p>Conseguiu se lembrar de alguns momentos na sua carreira, onde você já falou ou ouviu qualquer uma das frases acima? Não? Sortudo!</p>

<blockquote>
<p>Não acredito que é errado você usar uma gambiarra para resolver um erro, desde que posteriormente você empregue uma solução mais robusta. O problema maior ocorre quando o uso de soluções paliativas se tornam frequentes.</p>
</blockquote>

<p>Mas de longe esse é o único ou pior problema que encontramos na codificação. Gambiarras e <em>anti-patterns</em> podem ser bons e eficientes a curto prazo, mas a longo prazo te mostram o inferno na terra.</p>

<p>Vou apontar algumas boas práticas voltadas á escrita de código e o motivo para usá-las.</p>

<h2 id="antes-de-tudo-8230">Antes de tudo&#8230;</h2>

<blockquote>
<p>Você como desenvolvedor, tem a obrigação de entender cada linha de código que você escreve.</p>
</blockquote>

<p>Estude boas práticas e metodologias sempre. Mas não seja ingênuo a ponto de acreditar que a adoção de uma delas irá salvar parte do seu projeto/equipe. Muitas soluções podem trazer novos problemas. Quantas vezes a solução de um bug gerou outros 10 na aplicação? Por isso é necessário sempre ter na equipe alguém experiente com bastante vivência, que saiba direcionar o projeto nesses cenários.</p>

<p>Já vi projetos que começaram repletos de boas práticas, e terminaram desastrados por conta da falta de maturidade prática da equipe. O ponto inicial que jamais deve ser ignorado é: <strong>você como desenvolvedor, tem a obrigação de entender cada linha de código que você escreve</strong>.</p>

<h2 id="no-caminho-certo">No caminho certo</h2>

<p>Seu código atual tem uma qualidade superior comparado com o que você escreveu há 6 meses atrás? Se sua resposta for sim, isso indica que você está no caminho certo. Programação é algo em constante evolução, o você programador, também deve evoluir. Com o passar dos anos seu código deve se tornar mais bem organizado, limpo e elegante.</p>

<p>Uma leitura obrigatória é o livro <a href="http://www.saraiva.com.br/clean-code-a-handbook-of-agile-software-craftsman-3095979.html" target="_blank">Clean Code</a>. Muitos artigos e palestras sobre boas práticas (incluindo esse artigo), repetem pontos abordados nesse livro. Já vi até empresas cobrando a leitura desse livro como requisito para contratação.</p>

<h2 id="código-limpo">Código Limpo</h2>

<p>Enquanto o _GDD_ pode te dar felicidade a curto prazo, escrever código de forma limpa e consistente vai te garantir um futuro mais confortável. Você terá um código de fácil entendimento, o que tornará sua manutenção mais eficiente. E se você for um garoto prendado e cobrir sua aplicação com o máximo possível de testes, erros de regressão não irão mais chatear teu cliente/chefe.</p>

<p>Vou focar em poucos pontos. Se quiser mais conteúdo, leia o <a href="http://www.saraiva.com.br/clean-code-a-handbook-of-agile-software-craftsman-3095979.html" target="_blank">Clean Code</a>.</p>

<h3 id="code-review">Code Review</h3>

<p>Sempre peça para um colega revisar teu código. Se outra pessoa entendeu perfeitamente o que você escreveu, é um bom sinal.</p>

<blockquote>
<p>&#8220;Qualquer tolo consegue escrever código que um computador entenda. Bons programadores escrevem código que humanos possam entender.&#8221; &#8211; Martin Fowler</p>
</blockquote>

<h3 id="linters">Linters</h3>

<p>Ferramentas que escaneiam nosso código procurando o uso de más práticas e possíveis erros de execução, são nossos aliados. No dia-a-dia costumo usar o <a href="http://jshint.com/" target="_blank">JSHint</a> e agora meu novo parceiro: <a href="https://github.com/danielstjules/jsinspect" target="_blank">JSInspect</a>.</p>

<p>Gosto do JSHint pelo fato de poder customizar algumas regras. Já o JSInspect te ajuda á identificar o padrão <em>copy &amp; paste</em>, te ajudando a escrever módulos melhores.</p>

<h3 id="nomenclaturas">Nomenclaturas</h3>

<p>Quando me perguntam qual parte da programação eu acho mais difícil, respondo na lata: nomear coisas.</p>

<p>Passamos boa parte do tempo fazendo isso no nosso código, nomeando funções, variáveis, classes, namespaces, etc. Muitas vezes demoramos até chegar em um resultado bacana.</p>

<h3 id="seja-verboso">Seja verboso</h3>

<blockquote>
<p>&#8220;Existem duas coisas muito difíceis na Ciência da Computação: invalidar cache e dar nome às coisas.&#8221; &#8211; Phil Karlton</p>
</blockquote>

<p>Consegue me dizer se você entende de cara o que faz a instrução abaixo?</p>

<pre>u.cptTasks = false;</pre>

<p>E agora com o código abaixo?</p>

<pre>var u = new User();
u.name = 'Joana Souza';
u.adminPerm = true;
u.cptTasks = false;
u.save();</pre>

<p>Conseguiu entender tudo? Vamos ver se fica mais fácil:</p>

<pre>var user = new User();
user.name = 'Joana Souza';
user.hasAdministratorPermissions = true;
user.didCompleteAllTasks = false;
user.save();</pre>

<p>Nomear a variável como <em>u</em> não ajudou muito. Principalmente se você for reutilizar essa variável muitas linhas abaixo. Abreviações também atrapalham bastante. Duvido que de imediato você soube o significado de <em>u.cptTasks</em>. Pode ter tido várias idéias, o que te guiou ao velho <em>achismo</em>. E quantos erros já não cometemos pelo simples fato de _acharmos_ isso ou aquilo?</p>

<h3 id="considere-o-uso-da-nossa-querida-língua-portuguesa">Considere o uso da nossa querida Língua Portuguesa</h3>

<p>Usar a língua portuguesa para nomear coisas pode ser muito bom, principalmente para os novatos. Pelo simples motivo de que fazendo isso, fica mais visível o que é API nativa da linguagem/browser, e API proprietária. Dá uma olhada:</p>

<pre>var usuario = new Usuario();
usuario.nome = 'Joana Souza';
usuario.temPermissoesAdministrativas = true;
usuario.completouTodasTarefas = false;
usuario.salvar();</pre>

<p>Ficou mais confortável né? Seu cérebro praticamente se deu ao único trabalho de compreender o código. Não precisou traduzir de um idioma para outro. Mas isso é também uma faca de dois gumes.</p>

<p>Conhecer a língua inglesa é extremamente importante no mundo da programação, pois muitas documentações e materiais estão nesse idioma. Logo, nomear coisas em português te tira a oportunidade de praticar o idioma, pelo menos na forma escrita. Vale á pena bater um papo com a sua equipe á respeito disso.</p>

<h3 id="adote-uma-convenção">Adote uma convenção</h3>

<p>A adoção de uma convenção facilita muito na padronização de estilo de escrita e organização de código. É uma ótima opção iniciar com alguma existente:</p>

<ul>
<li><a href="http://snowdream.github.io/javascript-style-guide/javascript-style-guide/br/naming-conventions.html" target="_blank">Convenção de Nomenclatura &#8211; Airbnb</a></li>
<li><a href="http://andrecomws.com/lab/code-standards/" target="_blank">Padrões de Código Front-End &#8211; Isobar</a> (a versão original está <a href="http://isobar-idev.github.io/code-standards/" target="_blank">aqui</a>)</li>
<li><a href="http://javascript.crockford.com/code.html" target="_blank">Convenções do Douglas Crockford</a></li>
<li><a href="https://google.github.io/styleguide/javascriptguide.xml" target="_blank">Padrões de Código da Google</a></li>
</ul>

<p>Bônus:</p>

<ul>
<li>Leitura obrigatória: <a href="http://jstherightway.org/pt-br/" target="_blank">JavaSript the Right Way</a></li>
</ul>

<h3 id="variáveis-e-funções-não-utilizadas">Variáveis e funções não utilizadas</h3>

<p>Variáveis e funções não utilizadas são um belo exemplo de sujeira. Alguma vez você já deu manutenção em algum código, cujo algum tempo foi investido para compreender o que foi escrito, pra no final das contas perceber que o código estava morto, sem utilização? Chato, né?</p>

<p>Pra se livrar dessa sujeira é bem simples: ninguém está usando? Apague! Essa regra também vale para código comentado.</p>

<h3 id="reinvenção-da-roda">Reinvenção da roda</h3>

<p>Esse erro é geralmente cometido por novos e <em>antigos juniores</em> (entendo como antigo júnior aquele profissional que programa há muitos anos, mas nunca se interessou em aprofundar em uma linguagem).</p>

<p>O fato de não conhecer muito bem a API da linguagem, pode te levar á reinventar á roda.</p>

<p>Um exemplo disso é quando precisamos fazer um filtro em um array. Quem não está familiarizado, irá primeiramente fazer o bom e velho <em>for</em>, possivelmente desconhecendo outras opções como <em>Array.filter</em> e <em>Array.map</em>.</p>

<h3 id="funções-pequenas">Funções Pequenas</h3>

<p>Funções devem ser claras, objetivas e pequenas. Respeite a regra da responsabilidade única: sua função deve fazer somente uma coisa, e deve fazê-la muito bem.</p>

<p>Dá uma olhada no exemplo abaixo:</p>

<pre>usuario.salvar()

...

function salvar() {
    var camposObrigatorios = [ 'nome', 'email', 'cpf' ];

    camposObrigatorios.forEach( ( propriedade ) =&gt; {
        if ( !usuario[ propriedade ] ) {
            throw new Error( `É obrigatório informar o ${ propriedade } do usuário.` );
        }
    } );

    $http.post( 'http://app.com/api/usuario', usuario )
        .success( ... )
        .error( ... )
        .finally( ... );
}</pre>

<p>Pelo nome da função ficou claro o objetivo dela. Mas analisando vemos a implementação de duas coisas: validação e persistência dos dados. Poderíamos dividir as responsabilidades da seguinte forma:</p>

<pre>validarUsuario() && usuario.salvar();

...

function validarUsuario() {
    var camposObrigatorios = [ 'nome', 'email', 'cpf' ];

    camposObrigatorios.forEach( ( propriedade ) =&gt; {
        if ( !usuario[ propriedade ] ) {
            throw new Error( `É obrigatório informar o ${ propriedade } do usuário.` );
        }
    } );

    return true;
}

function salvar() {
    $http.post( 'http://app.com/api/usuario', usuario )
        .success( ... )
        .error( ... )
        .finally( ... );
}</pre>

<p>Manter suas funções enxutas te auxilia á praticar o reuso do código.</p>

<p>Esse é um assunto que pode ser extenso. Uma discussão bem bacana rolou no StackOverflow. Dá uma olhada <a href="http://pt.stackoverflow.com/questions/30772/uma-fun%C3%A7%C3%A3o-grande-ou-muitas-pequenas" target="_blank">aqui</a>.</p>

<h3 id="comentários">Comentários</h3>

<p>Já ouvi dizer que código semântico dispensa comentários. Concordo parcialmente com isso. Acredito que é válido usar comentários nas seguintes situações:</p>

<ul>
<li>Utilização muito pouco comum de uma parte da API pode ajudar a galera mais nova</li>
<li>Nem sempre conseguimos deixar nosso código semântico, a ponto dele <em>contar o que está acontecendo</em></li>
<li>Existem poucos momentos em que devemos fazer uso de uma má prática. E é bom deixar documentado o motivo antes que alguém refatore e quebre alguma funcionalidade</li>
<li>Sua aplicação expõe uma API pública. Sugiro o uso do <a href="http://usejsdoc.org/" target="_blank">JSDocs</a> para manter um padrão.</li>
</ul>

<p>Agora  <strong>/* código comentado */ </strong>é algo deve ter pouquíssima tolerância.</p>

<h3 id="indentação">Indentação</h3>

<p>Esse é conhecido como <em>problema de perfumaria</em>. Saca só:</p>

<pre>if(usuario.idade!==null||usuario.idade!==undefined||typeof usuario.idade == 'number'||usuario.idade&lt;18){
  alert('O usuário não possui idade suficiente para ser cadastrado nesse sistema.');
  return false;
}else{
    usuario.salvar();
}</pre>

<p>Lindo né? Que tal dar mais espaço pra essa bagunça?</p>

<pre>if ( usuario.idade && typeof usuario.idade === 'number' && usuario.idade &lt; 18 ) {
    alert( 'O usuário não possui idade suficiente para ser cadastrado nesse sistema.' );
    return false;
}

usuario.salvar();</pre>

<p>E agora? Ficou mais fácil de ler?</p>

<p>Enfiar todo o código em uma pequena lata de sardinha pode dificultar um pouco a sua compreensão, por mais que o seu editor de texto ou IDE tenha um highlight com alto contraste. Uma ferramenta bacana pra te ajudar á manter esse padrão é o <a href="http://jscs.info/" target="_blank">JSCS</a>. Gosto de usar o preset jQuery dessa ferramenta, pois o código fica com mais espaçamento, deixando o mais confortável para ler.</p>

<h3 id="vale-lembrar-que-8230">Vale lembrar que&#8230;</h3>

<p>Muitas dicas dadas aqui retirei do livro Clean Code, e outras aprendi com o passar do tempo em experiência com diversos projetos. O seu comentário com um ponto de vista diferente pode me ajudar á aprender mais sobre o assunto.</p>

<p>Espero ter ajudado.</p>

<p>=)</p>

    </article>

<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = '';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
  </section>


  <aside class="tb-aside">
    Banner
  </aside>

</section>


<footer id="tb-footer">
    <div class="tb-container">
    <ul class="tb-social-links">
        <li><a href="http://facebook.com/tablelessbr">Facebook</a></li>
        <li><a href="http://twitter.com/tableless">Twitter</a></li>
        <li><a href="http://tableless.com.br/feed">RSS</a></li>
        <li><a href="http://medium.com/tableless">Medium</a></li>
    </ul>
    <nav class="tb-footer-nav">
        <a href="">Contato</a>
        <a href="">Anuncie</a>
        <a href="">Seja um Autor</a>
        <a href="">Fazemos código front-end</a>
    </nav>

    <p class="tb-for-community">
        Escrito pela e para a comunidade web brasileira. <a href="">Ajude</a>.
    </p>
    </div>
</footer>
<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>


<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
<script>
$(document).ready(function() {
  $('pre').each(function(i, block) {
    hljs.highlightBlock(block);
  });
})</script>


</body>
</html>

