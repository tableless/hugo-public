
<!DOCTYPE html>
<html lang="pt-br" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <base href="https://tableless.github.io/hugo-public/">
  <title>Tableless</title>
  <link rel="canonical" href="https://tableless.github.io/hugo-public/javascript-com-cafe/">
  <link href="" rel="alternate" type="application/rss+xml" title="Tableless" />
  <link rel="stylesheet" href="https://tableless.github.io/hugo-public/css/style.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css">

</head>
<body>


  <header id="tb-header">
    <a href="https://tableless.github.io/hugo-public/" class="tb-logo"><img src="images/logo.svg"></a>

    

    <nav id="tb-menu">
      <ul>

        
          
              
            <li>
              <a href="/hugo-public/categories/html">
                  
                  HTML
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/css/">
                  
                  CSS
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/javascript/">
                  
                  JavaScript
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/back-end/">
                  
                  Back-end
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/wordpress/">
                  
                  WordPress
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/acessibilidade/">
                  
                  Acessibilidade
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/design/">
                  
                  Design
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/t%C3%A9cnicas-e-pr%C3%A1ticas/">
                  
                  Na prática
              </a>
          
            </li>
          

      </ul>
    </nav>

  </header>

  <header class="tb-post-header">
    <h1 class="tb-hero-title"><a href="/hugo-public/javascript-com-cafe/">JavaScript com café</a></h1>
  <p class="tb-hero-p">
    
    Conheça a linguagem CoffeeScript que, diferente dos frameworks e bibliotecas, compila código JavaScript puro ao invés de ser apenas mais uma camada sobre a linguagem.
    
  </p>
      <span class="tb-author">por <a href="/hugo-public/author/davi-ferreira">Davi Ferreira</a></span>


  </header>


<section class="tb-post">

  <section class="tb-post-content">
    <article class="tb-post-article">
      

<p>CoffeeScript é uma tentativa de tornar JavaScript mais agradável para nós, programadores.</p>

<p>Diferente dos frameworks e bibliotecas, que foram desenvolvidos como uma camada extra, o código escrito em CoffeeScript é compilado e resulta em JavaScript puro.</p>

<p>A sintaxe é inspirada em linguagens como Ruby e Python (principalmente Ruby), portanto você pode esperar códigos intuitivos e limpos, sem pontos-e-vírgulas, chaves e parênteses (quase).</p>

<h2 id="instalação-comandos">Instalação &amp; Comandos</h2>

<p>Não vou entrar muito em detalhes sobre a instalação da linguagem. A maneira mais fácil de instalar as ferramentas para desenvolvimento em CoffeeScript é através do sistema de pacotes do NodeJS, o npm.</p>

<p>[cce lang=&#8221;bash&#8221;]npm install -g coffee-script[/cce]</p>

<p>O criador do npm disponibilizou um <a href="https://gist.github.com/579814" title="Instruções para instalação do NodeJS e NPM" target="_blank">gist</a> com instruções variadas para a instalação do NodeJS e seu gerenciador de pacotes.</p>

<p>Depois de seguir todos os passos necessários, para conferir se a instalação foi concluída com sucesso, digite o seguinte comando em um terminal:</p>

<p>[cce lang=&#8221;bash&#8221;]coffee -v[/cce]</p>

<p>O comando <em>coffee</em>, executado via terminal, pode ser utilizado como um console interativo, como um compilador ou como um <em>watcher</em>. Como um <em>watcher</em>, o comando vigia qualquer alteração em códigos-fonte CoffeeScript e, automaticamente, gera os arquivos JavaScript.</p>

<p>[cce lang=&#8221;bash&#8221;]# executa o console</p>

<p>coffee</p>

<p># compila o arquivo codigo.coffee para codigo.js</p>

<p>coffee -c codigo.coffee</p>

<p># compila o arquivo codigo.coffee para script.js</p>

<p>coffee -co script.js codigo.coffee</p>

<p># observa os arquivos no diretório coffeescripts e compila para o diretório javascripts</p>

<p>coffee -cwo javascripts coffeescripts[/cce]</p>

<p>Além disso, ele pode também executar diretamente um script:</p>

<p>[cce lang=&#8221;bash&#8221;]coffee codigo.coffee[/cce]</p>

<p>Uma maneira mais fácil de testar e experimentar CoffeeScript é visitando o link &#8220;Try CoffeeScript&#8221; no <a href="http://coffeescript.org" title="CoffeeScript: Site oficial" target="_blank">site oficial da linguagem</a>. Lá você pode observar, em tempo real, o resultado da transformação de CoffeeScript em JavaScript.</p>

<h2 id="variáveis-funções">Variáveis &amp; Funções</h2>

<p>A simplificação começa com a declaração de variáveis, eliminando a necessidade de instanciá-las:</p>

<p>[cce lang=&#8221;coffeescript&#8221;]mensagem = &ldquo;Olá, Tableless!&rdquo;</p>

<p>alert mensagem[/cce]</p>

<p>O código acima resulta no seguinte JavaScript:</p>

<p>[cce lang=&#8221;javascript&#8221;]var mensagem;</p>

<p>mensagem = &ldquo;Olá, Tableless!&rdquo;;</p>

<p>alert(mensagem);[/cce]</p>

<p>Já uma função em CoffeeScript é representada pela junção dos caracteres &#8220;-&#8221; e &#8220;&gt;&#8221;:</p>

<p>[cce lang=&#8221;coffeescript&#8221;]cafe = -&gt; &ldquo;Café!&rdquo;[/cce]</p>

<p>JavaScript:</p>

<p>[cce lang=&#8221;javascript&#8221;]var cafe;</p>

<p>cafe = function() {</p>

<p>return &ldquo;Café!&rdquo;;</p>

<p>};[/cce]</p>

<p>O compilador CoffeeScript vai sempre transformar suas funções em expressões, ou seja, funções armazenadas em variáveis.</p>

<p>Vale lembrar que assim como em Python, a indentação em CoffeeScript precisa ser seguida à risca. Seu código deve respeitar um padrão de indentação &mdash; tab ou espaços, nunca os dois ao mesmo tempo.</p>

<p>O valor retornado por uma função é sempre a última linha de sua implementação. Não é necessário utilizar <em>return</em>.</p>

<p>Os argumentos devem ser declarados antes do símbolo da função. A concatenação segue o estilo Ruby de ser:</p>

<p>[cce lang=&#8221;coffeescript&#8221;]cafe = (sabor) -&gt; &ldquo;Quero café #{sabor}!&rdquo;[/cce]</p>

<p>JavaScript:</p>

<p>[cce lang=&#8221;javascript&#8221;]var cafe;</p>

<p>cafe = function(sabor) {</p>

<p>return &ldquo;Quero café &rdquo; + sabor + &ldquo;!&rdquo;;</p>

<p>};[/cce]</p>

<p>Eles podem ainda possuir valores padrões, caso não seja passado nenhum parâmetro:</p>

<p>[cce lang=&#8221;coffeescript&#8221;]cafe = (sabor = &ldquo;forte&rdquo;) -&gt; &ldquo;Quero café #{sabor}!&rdquo;[/cce]</p>

<p>E, como já deu pra perceber, quando uma função é chamada, os parênteses são opcionais:</p>

<p>[cce lang=&#8221;coffeescript&#8221;]cafe(&ldquo;suave&rdquo;)</p>

<p>cafe &ldquo;suave&rdquo;</p>

<p>[1, 2, 3, 4].slice(0, 1)</p>

<p>[1, 2, 3, 4].slice 0, 1[/cce]</p>

<h2 id="objetos">Objetos</h2>

<p>Existem duas maneiras de representar objetos em JavaScript. A primeira é utilizando <em>new</em>:</p>

<p>[cce lang=&#8221;javascript&#8221;]pessoa = new Pessoa();[/cce]</p>

<p>A maneira mais comum, no entanto, é utilizando a notação JSON:</p>

<p>[cce lang=&#8221;javascript&#8221;]pessoa = {};[/cce]</p>

<p>Este tipo de criação é simplificado no CoffeeScript, com a remoção das chaves e vírgulas, utilizando apenas indentação para formatar o objeto:</p>

<p>[cce lang=&#8221;coffeescript&#8221;]autor =</p>

<p>nome: &ldquo;Davi Ferreira&rdquo;</p>

<p>especialidades: [&ldquo;javascript&rdquo;, &ldquo;jquery&rdquo;]</p>

<p>sites:</p>

<p>blog: &ldquo;<a href="http://www.daviferreira.com/blog&quot;">http://www.daviferreira.com/blog&quot;</a></p>

<p>portfolio: &ldquo;<a href="http://www.daviferreira.com&quot;">http://www.daviferreira.com&quot;</a></p>

<p>social:</p>

<p>twitter: &ldquo;davitferreira&rdquo;[/cce]</p>

<p>Agora o mesmo objeto, em JavaScript:</p>

<p>[cce lang=&#8221;javascript&#8221;]var autor;</p>

<p>autor = {</p>

<p>nome: &ldquo;Davi Ferreira&rdquo;,</p>

<p>especialidades: [&ldquo;javascript&rdquo;, &ldquo;jquery&rdquo;],</p>

<p>sites: {</p>

<p>blog: &ldquo;<a href="http://www.daviferreira.com/blog&quot;">http://www.daviferreira.com/blog&quot;</a>,</p>

<p>portfolio: &ldquo;<a href="http://www.daviferreira.com&quot;">http://www.daviferreira.com&quot;</a></p>

<p>},</p>

<p>social: {</p>

<p>twitter: &ldquo;davitferreira&rdquo;</p>

<p>}</p>

<p>};[/cce]</p>

<h2 id="operações-condicionais-e-comparativas">Operações condicionais e comparativas</h2>

<p>As operações condicionais em CoffeeScript são bastante flexíveis e mais poderosas do que as operações nativas em JavaScript. O CoffeeScript introduz novos tipos de implementações de operações condicionais:</p>

<p>[cce lang=&#8221;coffeescript&#8221;]alert &ldquo;Frio&rdquo; if temperatura &lt; 20[/cce]</p>

<p>[cce lang=&#8221;coffeescript&#8221;]if temperatura &lt; 20 then alert &ldquo;Frio&rdquo; else alert &ldquo;Calor&rdquo;[/cce]</p>

<p>O segundo exemplo, compilado, fica assim:</p>

<p>[cce lang=&#8221;javascript&#8221;]if (temperatura &lt; 20) {</p>

<p>alert(&ldquo;Frio&rdquo;);</p>

<p>} else {</p>

<p>alert(&ldquo;Calor&rdquo;);</p>

<p>}[/cce]</p>

<p>Os operadores também receberam uma repaginada, ganhando versões &#8220;escritas&#8221;:</p>

<p>[cce lang=&#8221;coffeescript&#8221;]if temperatura &lt; 20 and cidade is &ldquo;Rio de Janeiro&rdquo; then alert &ldquo;Frio&rdquo;[/cce]</p>

<p>[cce lang=&#8221;coffeescript&#8221;]if alarme is on and not snooze and hora is &ldquo;09:00&rdquo; then alert &ldquo;Beep!&rdquo;[/cce]</p>

<p>Javascript:</p>

<p>[cce lang=&#8221;javascript&#8221;]if (alarme === true &amp;&amp; !snooze &amp;&amp; hora === &ldquo;09:00&rdquo;) alert(&ldquo;Beep!&rdquo;);[/cce]</p>

<p>Outra implementação legal é a comparação em cadeia:</p>

<p>[cce lang=&#8221;coffeescript&#8221;] if 12 &lt; idade &lt; 18 then alert &ldquo;Adolescente&rdquo;[/cce]</p>

<p>Javascript:</p>

<p>[cce lang=&#8221;javascript&#8221;] if (12 &lt; idade &amp;&amp; idade &lt; 18) alert(&ldquo;Adolescente&rdquo;);[/cce]</p>

<h2 id="loops">Loops</h2>

<p>Antes de falar sobre operações de <em>loop</em>, vamos conhecer <em>ranges</em> ou intervalos. Em CoffeeScript é possível declarar <em>ranges</em> dinâmicos:</p>

<p>[cce lang=&#8221;coffeescript&#8221;]horas = [0..24][/cce]</p>

<p>O código acima gera a lista completa, de 0 a 24. O resultado ainda pode ser trabalhado retornando apenas os quatro primeiros valores (0, 1, 2, 3):</p>

<p>[cce lang=&#8221;coffeescript&#8221;]horas[0..3] [/cce]</p>

<p>A manipulação de dados via loops é bem completa, com diferentes possibilidades:</p>

<p>[cce lang=&#8221;coffeescript&#8221;]times = [&ldquo;Flamengo&rdquo;, &ldquo;Vasco&rdquo;, &ldquo;Botafogo&rdquo;, &ldquo;Fluminense&rdquo;]</p>

<p>for time in times</p>

<p>alert &ldquo;Time: #{time}&rdquo;[/cce]</p>

<p>O código acima resulta no seguinte JavaScript (!):</p>

<p>[cce lang=&#8221;javascript&#8221;]var time, times, _i, _len;</p>

<p>times = [&ldquo;Flamengo&rdquo;, &ldquo;Vasco&rdquo;, &ldquo;Botafogo&rdquo;, &ldquo;Fluminense&rdquo;];</p>

<p>for (_i = 0, _len = times.length; _i &lt; _len; _i++) {</p>

<p>time = times[_i];</p>

<p>alert(&ldquo;Time: &ldquo; + time);</p>

<p>}[/cce]</p>

<p>Outra maneira de executar um <em>loop</em> é declarando tudo em uma única linha:</p>

<p>[cce lang=&#8221;coffeescript&#8221;]alert &ldquo;Time: #{time}&rdquo; for time in times[/cce]</p>

<p>Podemos ainda manipular os dados diretamente no <em>loop</em>:</p>

<p>[cce lang=&#8221;coffeescript&#8221;]alert &ldquo;#{time} &#8211; RJ&rdquo; for time in times[/cce]</p>

<p>E para finalizar essa parte sobre <em>loops</em>, uma ferramenta muito útil é a <em>keyword</em> <em>when</em>, utilizada para filtrar os dados do <em>loop</em>:</p>

<p>[cce lang=&#8221;coffeescript&#8221;]alert &ldquo;Segunda divisão!&rdquo; for time in times when time isnt &ldquo;Flamengo&rdquo;[/cce]</p>

<h2 id="integração-com-jquery">Integração com jQuery</h2>

<p>Escrever código em CoffeeScript não significa abandonar bibliotecas e frameworks JavaScript. A integração com CoffeeScript é direta:</p>

<p>[cce lang=&#8221;coffeescript&#8221;]$ -&gt; [/cce]</p>

<p>Equivale a:</p>

<p>[cce lang=&#8221;javascript&#8221;]$(function() {});[/cce]</p>

<p>A premissa básica continua sendo a simplificação do código, principalmente devido a remoção de chaves, parênteses, vírgulas e pontos-e-vírgulas.</p>

<p>[cce lang=&#8221;coffeescript&#8221;]$(window).konami -&gt;</p>

<p>$(&ldquo;html&rdquo;).addClass &ldquo;tremetudo&rdquo;[/cce]</p>

<p>O código acima é a implementação do Konami Code aqui no Tableless.</p>

<p>Veja o JavaScript original:</p>

<p>[cce lang=&#8221;javascript&#8221;]$(window).konami(function(){</p>

<p>$(&ldquo;html&rdquo;).addClass(&ldquo;tremetudo&rdquo;)</p>

<p>});[/cce]</p>

<hr />

<p>Essa foi uma visão geral da linguagem. A desvantagem de implementar CoffeeScript em produtos e aplicativos grandes é o fato de ainda ser difícil debugar o código diretamente, já que as ferramentas disponíveis nos navegadores só indicam os erros no arquivo JavaScript gerado. O compilador aponta os erros de sintaxe, mas erros de lógica dão um pouco mais de trabalho.</p>

<p>Muitos aspectos ficaram de fora deste artigo, como os splats, escopo, propriedades, switches, soaks e, principalmente, classes. No próximo artigo falo mais sobre eles.</p>

    </article>

<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = '';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
  </section>


  <aside class="tb-aside">
    Banner
  </aside>

</section>


<footer id="tb-footer">
    <div class="tb-container">
    <ul class="tb-social-links">
        <li><a href="http://facebook.com/tablelessbr">Facebook</a></li>
        <li><a href="http://twitter.com/tableless">Twitter</a></li>
        <li><a href="http://tableless.com.br/feed">RSS</a></li>
        <li><a href="http://medium.com/tableless">Medium</a></li>
    </ul>
    <nav class="tb-footer-nav">
        <a href="">Contato</a>
        <a href="">Anuncie</a>
        <a href="">Seja um Autor</a>
        <a href="">Fazemos código front-end</a>
    </nav>

    <p class="tb-for-community">
        Escrito pela e para a comunidade web brasileira. <a href="">Ajude</a>.
    </p>
    </div>
</footer>
<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>


<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
<script>
$(document).ready(function() {
  $('pre').each(function(i, block) {
    hljs.highlightBlock(block);
  });
})</script>


</body>
</html>

