
<!DOCTYPE html>
<html lang="pt-br" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <base href="http://tableless.com.br/">
  <title>Tableless</title>
  <link rel="canonical" href="http://tableless.com.br/performance-frontend-parte2/">
  <link href="" rel="alternate" type="application/rss+xml" title="Tableless" />
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css">
  
</head>
<body>


  <header id="tb-header">
    <a href="http://tableless.com.br/" class="tb-logo"><img src="images/logo.svg"></a>

    

    <nav id="tb-menu">
      <ul>

        
          
              
            <li>
              <a href="/categories/html">
                  
                  HTML
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/css/">
                  
                  CSS
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/javascript/">
                  
                  JavaScript
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/back-end/">
                  
                  Back-end
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/wordpress/">
                  
                  WordPress
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/acessibilidade/">
                  
                  Acessibilidade
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/design/">
                  
                  Design
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/t%C3%A9cnicas-e-pr%C3%A1ticas/">
                  
                  Na pr√°tica
              </a>
          
            </li>
          

      </ul>
    </nav>

  </header>

  <header class="tb-post-header">
    <h1 class="tb-hero-title"><a href="/performance-frontend-parte2/">Performance front-end ‚Äì Parte 2</a></h1>
  <p class="tb-hero-p">
    
    O front-end √© um dos grandes respons√°veis pela performance de um website ou servi√ßo online. 
    
  </p>
      <span class="tb-author">por <a href="/author/diego-eis">Diego Eis</a></span>


  </header>


<section class="tb-post">

  <section class="tb-post-content">
    <article class="tb-post-article">
      

<p>Se voc√™ ainda n√£o leu a primeira parte desse assunto, veja aqui: <a href="http://tableless.com.br/performance-frontend-parte1/">Performance front-end &#8211; Parte 1</a>.</p>

<p>Os browsers ajudam em muitos sentidos otimizando o carregamento de assets e a renderiza√ß√£o da p√°gina, mesmo assim √© necess√°rio fazer algumas tarefas para que sua aplica√ß√£o/website carregue mais r√°pido.</p>

<p>Quando colocamos a performance como uma tarefa durante o desenvolvimento, determinamos o aumento ou a diminui√ß√£o da convers√£o e da quantidade de pageviews. Dependendo do tamanho do seu cliente, isso significa ter grandes resultados apenas diminuindo mil√©simos de segundos do carregamento.</p>

<p><a href="http://www.strangeloopnetworks.com/assets/images/infographic2.jpg">Nessa imagem</a>, veja alguns dos resultados obtidos em grandes websites quando eles melhoraram a performance dos seus servi√ßos. Os n√∫meros podem estar meio ultrapassados, mas servem para ter uma ideia. Por exemplo: a cada 100 milisegundos que a Amazon diminui do carregamento do seu site, eles aumentam 1% do seu redimento. Fa√ßa a conta: a <a href="http://computerworld.uol.com.br/negocios/2012/04/27/receita-da-amazon-cresce-34-no-trimestre-e-bate-expectativas/">Amazon teve uma receita de 13.18 Bilh√µes no √∫ltimo trimetre</a>. A cada 400 milisegundos otimizados o Yahoo! aumenta em 9% o seu tr√°fego. Fazendo as p√°ginas carregarem 2.2 segundos mais r√°pidas, a Mozilla aumentou em 60 milh√µes de downloads do Firefox por ano.</p>

<p>Por isso, quando algu√©m disser que melhorar milisegundos de performance do seu site n√£o √© grande coisa, mostre estes n√∫meros para a pessoa. Claro, que dependendo do tamanho do seu site, voc√™ n√£o vai dobrar suas visitas apenas diminuindo 100 milisegundos do carregamento seu site. Mas com certeza ajuda.</p>

<h2 id="medindo">Medindo</h2>

<p>Para come√ßarmos, indico o <a href="https://developers.google.com/speed/pagespeed/?hl=pt-BR">PageSpeed</a> para a medi√ß√£o da performance dos seus websites. H√° outras maneiras de medir, milhares de sites e plugins, mas esse √© do pessoal do Google, que al√©m de dar uma pontua√ß√£o, ele oferece fontes de informa√ß√£o para voc√™ entender melhor o que √© cada t√≥pico medido.</p>

<p>Voc√™ pode ver online <a href="https://developers.google.com/speed/pagespeed/insights">como est√° a performance do seu site</a>. Veja aqui o nosso em <a href="https://developers.google.com/speed/pagespeed/insights#url=tableless.com.br&amp;mobile=false">desktops</a> ou em <a href="https://developers.google.com/speed/pagespeed/insights#url=tableless.com.br&amp;mobile=true">mobiles</a>.</p>

<p>No <a href="https://developers.google.com/speed/docs/best-practices/rules_intro?hl=pt-BR">site deles existem uma s√©rie de regrinhas e boas pr√°ticas</a>. Se quiser deixar esse artigo de lado e ir direto para l√°, eu n√£o vou ficar chateado. üòâ</p>

<p>Veja tamb√©m uma s√©rie de <a href="https://developers.google.com/speed/tools?hl=pt-BR">ferramentas e downloads</a> para voc√™ n√£o se sentir sozinho ao fazer o trabalho sujo.</p>

<p>O <a href="http://yslow.org/">YSlow</a> do Yahoo! tamb√©m √© √≥timo. Ele tem as mesmas caracter√≠sticas do PageSpeed, logo, √© quest√£o de gosto qual dos dois voc√™ usar√°.</p>

<h2 id="diminuindo-o-tempo-de-viagem">Diminuindo o tempo de viagem</h2>

<p>RTT (Road-trip Time) √© o tempo que leva para o browser (ou qualquer outro cliente) conversar com o servidor buscando a informa√ß√£o solicitada pelo usu√°rio.</p>

<p>Normalmente um browser inicia a comunica√ß√£o com o servidor com pelo menos 3 RTTs: Uma requisi√ß√£o para a resolu√ß√£o do DNS. Outra para o setup de conex√£o TCP e outra para a requisi√ß√£o HTTP. Normalmente os websites tem muitas requisi√ß√µes HTTP. E isso √© muito ruim. ‚Ä®</p>

<p>Ter muitas requisi√ß√µes significa que seu browser precisa ir e voltar v√°rias vezes durante a abertura da p√°gina. Essa ida e volta s√£o os RTT, ou a Road-trip Time. S√£o as RTTs que contribuem para uma lat√™ncia ruim nas redes. Se seu cliente demora para trazer a informa√ß√£o, o download da p√°gina √© prejudicado.</p>

<p><a href="http://bit.ly/WhiWbW">N√≥s falamos sobre isso neste artigo.</a></p>

<h2 id="onde-colocar-as-chamadas-de-css-e-javascript">Onde colocar as chamadas de CSS e Javascript</h2>

<p>O browser tem uma ordem correta para carregar os arquivos do site. Por isso h√° uma ordem espec√≠fica para linkar o arquivos de CSS e Javascript, otimizando o trabalho de carregamento do browser.</p>

<p>Para voc√™ entender melhor, note que:</p>

<p>O CSS bloqueia a renderiza√ß√£o da p√°gina. Isso por que o browser n√£o quer carregar primeiro um HTML feio s√≥ para depois fazer um render da p√°gina novamente aplicando seu estilo. Por isso ele bloqueia o m√°ximo que puder a renderiza√ß√£o da p√°gina at√© que tenha carregado seu c√≥digo CSS. Esta √© a raz√£o pela qual voc√™ deve inserir o link do CSS no HEAD, afim de que o browser o encontre rapidamente.</p>

<p>O Javascript por sua vez bloqueia o download de outros arquivos. Lembre-se de que o browser procura baixar v√°rios arquivos ao mesmo tempo enquanto ele carrega a p√°gina. Quando carregamos o Javascript, ele p√°ra tudo e carrega um script de cada vez. Ele faz isso por que geralmente o Javascript modifica o HTML e tamb√©m o CSS. Logo, ele n√£o pode fazer isso se o c√≥digo HTML, o CSS ou outros arquivos como as imagens n√£o foram baixados.</p>

<p>Isso tamb√©m √© aplicado na ordem em que voc√™ linka os arquivos de Javascript. Um exemplo simples: voc√™ n√£o consegue fazer funcionar um plugin de jQuery se n√£o tiver linkado o jQuery antes do script de plugin.</p>

<h2 id="melhorando-o-download-paralelo">Melhorando o download paralelo</h2>

<p>Como j√° comentamos acima o browser sempre tenta fazer o m√°ximo de downloads de arquivos em paralelo afim de aumentar a velocidade do carregamento. O problema √© que h√° um limite para o download de arquivos simult√¢neos em um mesmo dom√≠nio. De acordo com o protocolo HTTP, os browsers podem pode ter duas conex√µes simult√¢neas por dom√≠nio. Eu n√£o consegui encontrar um lugar que d√™ o n√∫mero exato, mas dizem por a√≠ que o Firefox e Chrome conseguem baixar at√© 6 arquivos por vez. Se um documento contem referencias para v√°rias recursos como CSS, Javascripts, Imagens e etc, de forma que estoure o m√°ximo permitido pelo host, o browser come√ßa a baixar um parte e deixa os outros arquivos na fila esperando. Quando ele termina de baixar todos os recursos atuais, ele vai pra fila e pega o pr√≥ximo grupo.</p>

<p>A estrat√©gia √© separar parte destes recursos em outro dom√≠nio. Fazendo isso o browser pode baixar o m√°ximo de recursos por dom√≠nio paralelamente. Por isso √© que normalmente separamos arquivos &#8211; como imagens &#8211; em outro servidor.</p>

<p>Qualquer grande site faz isso. Veja por exemplo o endere√ßo do meu avatar no twitter: <strong><a href="https://si0.twimg.com/profile_images/2927099623/a39b6f1a9af28d8dada6bc8958392cf3_normal.jpeg">https://si0.twimg.com/profile_images/2927099623/a39b6f1a9af28d8dada6bc8958392cf3_normal.jpeg</a></strong></p>

<p>O endere√ßo come√ßa com <strong>si0.twimg.com</strong> que √© um servidor do Twitter para servir assets est√°ticos. Se voc√™ abrir o c√≥digo fonte de qualquer grande site vai ver que isso √© bem comum para diminuir a carga de carregamento.</p>

<p>Uma solu√ß√£o interessante tamb√©m √© usar arquivos como o jQuery ou outros scripts via CDNs. O jQuery, por exemplo, <a href="http://jquery.com/download/">tem uma s√©rie de CDNs pela Microsoft, MediaTemple e Google</a> que voc√™ pode usar para linkar o script ao seu projeto sem precisar fazer a requisi√ß√£o no seu pr√≥prio servidor.</p>

<p>Isso √© bom por que voc√™ n√£o sobrecarrega seu servidor. As vezes o donwload do arquivo pode demorar mais do que se estivesse no seu servidor. Mesmo assim, mantendo um arquivo em outro servidor, voc√™ abre caminho para que o browser fa√ßa o carregamento de outro arquivos paralelamente.</p>

<h2 id="link-prefetching-e-prerender">Link prefetching e Prerender</h2>

<p>Link prefetching √© um mecanismo que utiliza o tempo ocioso do browser para fazer o download ou buscar doumentos que talvez ser√£o usados no futuro pelo usu√°rio. Por exemplo: se o usu√°rio est√° visitando determinada p√°gina no site e voc√™ tem quase certeza de qual ser√° a pr√≥xima p√°gina que ele visitar√°, voc√™ pode avisar o browser para que ele fa√ßa o download dos arquivos dessa p√°gina para o seu cache enquanto ele estiver ocioso, de forma que quando o usu√°rio for visitar essa p√°gina a renderiza√ß√£o √© agilizada.</p>

<pre class="lang-html">&lt;link rel="prefetch" href="/imagens/destaque.jpg"&gt;
</pre>

<p>Ou:</p>

<pre class="lang-html">&lt;link rel="prefetch" href="http://seuwebsite.com.br/parte2/"&gt;
</pre>

<p>Existe tamb√©m o link prerender. Nesse caso o browser al√©m de baixar os assets necess√°rios, ele pr√© renderiza a p√°gina na mem√≥ria de forma que ao visitar essa p√°gina, ela j√° estar√° totalmente renderizada. Diferentemente do link prefetch que apenas baixa os arquivos e s√≥ renderiza a p√°gina quando o usu√°rio fizer a visita.</p>

<p>Nem preciso dizer que isso deve ser usado com muito cuidado, principalmente quando estamos produzindo algo para mobiles. Voc√™ n√£o quer acabar com a bateria e o pacote de dados do usu√°rio baixando p√°ginas que talvez ele nem v√° visitar. Por isso √© recomend√°vel fazer o prefetch/prerender de poucas p√°ginas e arquivos por vez. Se voc√™ n√£o tem certeza de qual ser√° a p√°gina a pr√≥xima p√°gina visitada, √© melhor nem utilizar essa t√°tica.</p>

<pre class="lang-html">&lt;link rel="prerender" href="http://seuwebsite.com.br/parte2/"&gt;
</pre>

<h2 id="concluindo">Concluindo</h2>

<p>A busca por performance deve ser algo constante. H√° alguns pontos que voc√™ n√£o conseguir√° cobrir, nesse caso, n√£o se preocupe. Fa√ßa um estudo do seu caso e entenda at√© onde voc√™ pode ir para melhorar a performance de seus servi√ßos. Use e abuse de ferramentas para melhorar seu trabalho e entenda melhor como funciona os browsers. Todas essas informa√ß√µes melhorar√£o seu processo de produ√ß√£o e definir√£o uma experi√™ncia mais amig√°vel para o usu√°rio.</p>

<h3 id="para-ler-mais">Para ler mais</h3>

<ul>
<li><a href="http://developer.yahoo.com/performance/rules.html">Best Practices for Speeding Up Your Web Site</a></li>
<li><a href="http://csswizardry.com/2013/01/front-end-performance-for-web-designers-and-front-end-developers/">Front-end performance for web designers and front-end developers</a></li>
<li><a href="http://www.yuiblog.com/blog/2007/04/11/performance-research-part-4/">Maximizing Parallel Downloads in the Carpool Lane</a></li>
<li><a href="http://sixrevisions.com/web-development/five-ways-to-speed-up-page-response-times/">Five Ways to Speed Up Page Response Times</a></li>
</ul>

    </article>

<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = '';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
  </section>


  <aside class="tb-aside">
    Banner
  </aside>

</section>


<footer id="tb-footer">
    <div class="tb-container">
    <ul class="tb-social-links">
        <li><a href="http://facebook.com/tablelessbr">Facebook</a></li>
        <li><a href="http://twitter.com/tableless">Twitter</a></li>
        <li><a href="http://tableless.com.br/feed">RSS</a></li>
        <li><a href="http://medium.com/tableless">Medium</a></li>
    </ul>
    <nav class="tb-footer-nav">
        <a href="">Contato</a>
        <a href="">Anuncie</a>
        <a href="">Seja um Autor</a>
        <a href="">Fazemos c√≥digo front-end</a>
    </nav>

    <p class="tb-for-community">
        Escrito pela e para a comunidade web brasileira. <a href="">Ajude</a>.
    </p>
    </div>
</footer>
<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>


<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
<script>
$(document).ready(function() {
  $('pre').each(function(i, block) {
    hljs.highlightBlock(block);
  });
})</script>


</body>
</html>

