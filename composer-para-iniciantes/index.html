
<!DOCTYPE html>
<html lang="pt-br" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <base href="https://tableless.github.io/hugo-public/">
  <title>Tableless</title>
  <link rel="canonical" href="https://tableless.github.io/hugo-public/composer-para-iniciantes/">
  <link href="" rel="alternate" type="application/rss+xml" title="Tableless" />
  <link rel="stylesheet" href="https://tableless.github.io/hugo-public/css/style.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css">

</head>
<body>


  <header id="tb-header">
    <a href="https://tableless.github.io/hugo-public/" class="tb-logo"><img src="images/logo.svg"></a>

    

    <nav id="tb-menu">
      <ul>

        
          
              
            <li>
              <a href="/hugo-public/categories/html">
                  
                  HTML
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/css/">
                  
                  CSS
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/javascript/">
                  
                  JavaScript
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/back-end/">
                  
                  Back-end
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/wordpress/">
                  
                  WordPress
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/acessibilidade/">
                  
                  Acessibilidade
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/design/">
                  
                  Design
              </a>
          
            </li>
          
              
            <li>
              <a href="/hugo-public/categories/t%C3%A9cnicas-e-pr%C3%A1ticas/">
                  
                  Na prática
              </a>
          
            </li>
          

      </ul>
    </nav>

  </header>

  <header class="tb-post-header">
    <h1 class="tb-hero-title"><a href="/hugo-public/composer-para-iniciantes/">Composer para iniciantes</a></h1>
  <p class="tb-hero-p">
    
    Composer é uma ferramenta para gerenciamento de dependências para o PHP que vem ganhando espaço e se tornando cada vez mais indispensável. Com algumas poucas linhas de configurações você define todas as bibliotecas de terceiros ou mesmo suas que deseja/precisa utilizar em seu projeto, o composer encarrega-se de baixá-las e criar um autoloader deixando-as prontas para uso.
Para muitos o composer ainda é um mistério então o intuito deste post é mostrar ao usuário que ainda não conhece como baixar, configurar e utilizar o composer de forma básica.
    
  </p>
      <span class="tb-author">por <a href="/hugo-public/author/andre-cardoso">Andre Cardoso</a></span>


  </header>


<section class="tb-post">

  <section class="tb-post-content">
    <article class="tb-post-article">
      

<p><a title="Ir para a homepage do Composer" href="https://getcomposer.org/" target="_blank">Composer</a> é uma ferramenta para gerenciamento de dependências para o PHP que vem ganhando espaço e se tornando cada vez mais indispensável. Com algumas poucas linhas de configurações você define todas as bibliotecas de terceiros ou mesmo suas que deseja/precisa utilizar em seu projeto, o composer encarrega-se de baixá-las e criar um autoloader deixando-as prontas para uso.</p>

<p>Para muitos o composer ainda é um mistério então o intuito deste post é mostrar ao usuário que ainda não conhece como baixar, configurar e utilizar o composer de forma básica.</p>

<p>&nbsp;</p>

<h2 id="do-que-preciso">Do que preciso?</h2>

<p>Basicamente precisará do PHP em sua versão a partir da 5.3.2.</p>

<blockquote>
<p>Os exemplos criados neste post serão baseados em ambiente Linux, em sua maioria funcionará da mesma forma no Mac OS X mas para o Windows recomendo que leia a documentação oficial. O conceito é o mesmo nos três Sistemas Operacionais no entanto no Windows há algumas mínimas diferenças.</p>

<p>&nbsp;</p>
</blockquote>

<h2 id="como-começo">Como começo?</h2>

<p>Primeiramente você precisa realizar o download do phar do composer. O <a title="Descubra o que é um arquivo Phar" href="https://php.net/manual/pt_BR/book.phar.php" target="_blank">phar</a> é um empacotamento de uma aplicação e é utilizado para fornecer bibliotecas e ferramentas nas quais o desenvolvedor não tem de se preocupar com sua estrutura. Em outras palavras, é pegar e usar.</p>

<p>Para que você obtenha o composer há duas maneiras distintas. Através da biblioteca <a title="Descubra o que é cURL" href="http://en.wikipedia.org/wiki/CURL" target="_blank">cURL</a> e através do próprio PHP. Basta selecionar uma das opções abaixo e executar em seu terminal.</p>

<p>Instalando via cURL:</p>

<p>curl -sS <a href="https://getcomposer.org/installer">https://getcomposer.org/installer</a> | php</p>

<p>Instalando via PHP:</p>

<p>php -r &#8220;readfile(&#8216;<a href="https://getcomposer.org/installer&amp;#8217;);&amp;#8221">https://getcomposer.org/installer&amp;#8217;);&amp;#8221</a>; | php</p>

<p>Existem outras maneiras de instalar, na verdade são configurações mais avançadas de instalação que não serão abordadas aqui por se tratar de ser um conteudo voltado à iniciantes.</p>

<p>&nbsp;</p>

<h2 id="qual-o-próximo-passo">Qual o próximo passo?</h2>

<p>Antes de você sair querendo fazer as coisas acontecerem precisamos passar alguns conceitos básicos.</p>

<p>O composer facilita o gerenciamento de dependências em seus projetos, com isso houve a necessidade de uma padronização para a interoperabilidade entre os mais diversos frameworks PHP do mercado. Mas detalhe que o composer não limita-se à uso somente em frameworks, você pode tranquilamente utilizá-lo em seus projetos com PHP puro desde que siga as recomendações da <a title="Descubra o que é FIG" href="http://www.php-fig.org/" target="_blank">FIG</a> (Framework Interoperability Group).</p>

<p>&nbsp;</p>

<h2 id="o-arquivo-de-configurações">O arquivo de configurações</h2>

<p>Agora que você já tem uma noção do que é o composer está na hora de botar a mão na massa.</p>

<p>Primeiramente crie um arquivo chamado <em>composer.json</em>. Este arquivo possuirá as configurações de dependências de sua aplicação em formato <a title="Veja mais sobre a estrutura de um arquivo Json" href="http://json.org/json-pt.html" target="_blank">Json</a>.</p>

<p>Abaixo segue um esqueleto básico do _composer.json_ – o arquivo em que as dependências serão descritas, em seguida o mesmo será esclarescido.</p>

<pre class="prettyprint lang-json">{
    "name": "Nome do projeto",
    "description": "Breve descrição do que a aplicação se propoe a fazer",
    "authors": [
        {
            "name": "Seu nome",
            "email": "seu-email@seu-dominio.com"
        }
    ],
    "require": {
        "php": "&gt;=5.2.8"
    }
}</pre>

<p>O “name” é o nome de sua aplicação. Esta marcação é opcional mas recomendada.</p>

<p>O “description” é uma breve descrição do que sua aplicação se propõe a fazer. Também opcional.</p>

<p>Em “authors” aparecem os créditos de desenvolvedores que contribuiram com o projeto.</p>

<p>O “require” basicamente deixa claro quais são as dependências de sua aplicação. Neste caso se a versão do PHP for abaixo da 5.2.8 simplesmente uma mensagem de erro será lançada ao instalar as dependências lhe informando que não é possível prosseguir por nem todos os requisitos estarem satisfeitos.</p>

<p>Como você pode ver acima este é o esqueleto de uma aplicação muito básica, sem configurações avançadas e sem indicação de nenhuma biblioteca de terceiro.</p>

<p>&nbsp;</p>

<h2 id="ok-mas-e-agora">Ok, mas e agora?</h2>

<p>Agora que você já tem o esqueleto de seu composer configurado em sua aplicação falta incluir alguns pacotes. O composer utiliza como seu repositório o <a title="Pacotes do composer" href="https://packagist.org/" target="_blank">Packagist</a> onde qualquer desenvolvedor pode criar seus próprios pacotes e disponibilizá-los para a comunidade semelhante o <a title="Ir ao Github" href="https://github.com/" target="_blank">github</a>. O Packagist lhe fornece o total de instalações dos pacotes por dia, mês e o total. O mais legal é que estas estatísticas são fiéis, ou seja, se alguém remover um pacote do seu _composer.json_ o total de instalações é reduzido. Com esta informação restam contagens apenas aplicações que realmente estão utilizando determinado pacote.</p>

<p>&nbsp;</p>

<h2 id="um-pequeno-exemplo">Um pequeno exemplo.</h2>

<p>Para fins didáticos mostrarei aqui a utilização de uma biblioteca para slug criada por <a title="Perfil de Kevin Le Brun no Github" href="https://github.com/kevinlebrun" target="_blank">Kevin Le Brun</a>, o <a title="Slug PHP no Github" href="https://github.com/kevinlebrun/slug.php" target="_blank">slug.php</a>. Na seção em que são definidos os requerimentos (require) no arquivo _composer.json _basta adicionar logo abaixo da linha que define que o necessita do PHP o nome do pacote desejado e a sua versão. Neste caso o pacote é &#8220;kevinlebrun/slug.php&#8221; e a versão é &#8220;1.*&#8221;. Com isso a nova estrutura do composer.json é:</p>

<pre class="prettyprint lang-json">...
"require": {
        "php": "&gt;=5.2.8",
        "kevinlebrun/slug.php": "1.*"
}
...</pre>

<p>&nbsp;</p>

<p>Muito bem, agora está tudo pronto para que você veja o composer em ação. Na pasta raíz de sua aplicação (que é a mesma que o _composer.json_ e o _composer.phar_ se encontram) rode o comando <strong>php composer.phar install</strong>. Este comando fará o composer ler as configurações setadas no arquivo json e instalar todas as bibliotecas/pacotes necessários para a sua aplicação e também estas mesmas bibliotecas que possuírem dependências terão as mesmas resolvidas. Pense no composer mais ou menos como o apt-get do Linux debian-like. Nele, ao instalar um pacote qualquer todas suas dependências são resolvidas automaticamente.</p>

<p><img class="aligncenter size-large wp-image-41193" alt="Estruturdo composer e instalação" src="http://tableless.com.br/wp-content/uploads/2014/02/estrutura-e-instalacao-660x292.png" width="660" height="292" srcset="uploads/2014/02/estrutura-e-instalacao-660x292.png 660w, uploads/2014/02/estrutura-e-instalacao-329x146.png 329w, uploads/2014/02/estrutura-e-instalacao-588x261.png 588w, uploads/2014/02/estrutura-e-instalacao-400x177.png 400w, uploads/2014/02/estrutura-e-instalacao.png 1275w" sizes="(max-width: 660px) 100vw, 660px" /></p>

<p>Perceba que na pasta em que encontra-se sua aplicação agora existem a pasta <em>vendor</em>, um arquivo _composer.phar_ (que já encontrava-se ali), um arquivo _composer.json_ (que já encontrava-se ali) e um arquivo _composer.lock_ – que é o arquivo gerado automaticamente após a instalação com sucesso.</p>

<p><img class="aligncenter size-full wp-image-41194" alt="Estrutura de arquivos após a instalação via composer" src="http://tableless.com.br/wp-content/uploads/2014/02/estrutura-arquivos.png" width="682" height="333" srcset="uploads/2014/02/estrutura-arquivos.png 682w, uploads/2014/02/estrutura-arquivos-329x160.png 329w, uploads/2014/02/estrutura-arquivos-588x287.png 588w, uploads/2014/02/estrutura-arquivos-634x310.png 634w, uploads/2014/02/estrutura-arquivos-400x195.png 400w" sizes="(max-width: 682px) 100vw, 682px" /></p>

<h2 id="o-próximo-passo-mais-um">O próximo passo (mais um)</h2>

<p>Agora já temos tudo. O composer gerenciando as dependências, as dependências definidas em nosso arquivo composer.json, e uma pasta contendo todas as dependências necessárias juntamente com o autoloader do composer que encarrega-se de registar todos os namespaces dos arquivos baixados na pasta <em>vendor</em>. Com isso basta utilizarmos.</p>

<p>Crie um arquivo chamado index.php e inclua o autoloader do composer conforme o exemplo abaixo.</p>

<p>&nbsp;</p>

<pre class="prettyprint lang-php">&lt;?php
header('Content-Type: text/html; charset=utf-8');

require 'vendor/autoload.php';</pre>

<blockquote>
<p>Importante que esteja definido que o conteúdo será exibido utilizando a codificação UTF-8 pois problemas podem ocorrer no tratamento de caracteres especiais como acentuações.</p>
</blockquote>

<p>Com isso em mãos, basta apenas utlizarmos nosso slug.php.</p>

<pre class="prettyprint lang-php">$slugifier = new \Slug\Slugifier();

// Definindo tratamento de caracteres com acentuação
$slugifier-&gt;setTransliterate(true); 

$frase = 'Frase com acentuação para teste de criação de slug';

$slug = $slugifier-&gt;slugify($frase);

echo '&lt;b&gt;Frase natural: &lt;/b&gt;' . $frase . "&lt;br /&gt;&lt;br /&gt;";
echo '&lt;b&gt;Frase com aplicação de slug: &lt;/b&gt;' . $slug . "&lt;br /&gt;&lt;br /&gt;";</pre>

<p>&nbsp;</p>

<p>Perfeito, agora basta exibir no seu browser ou mesmo via terminal.</p>

<p><img class="aligncenter size-full wp-image-41196" alt="Slug rodando no terminal" src="http://tableless.com.br/wp-content/uploads/2014/02/slug-terminal.png" width="816" height="424" srcset="uploads/2014/02/slug-terminal.png 816w, uploads/2014/02/slug-terminal-323x168.png 323w, uploads/2014/02/slug-terminal-588x305.png 588w, uploads/2014/02/slug-terminal-596x310.png 596w, uploads/2014/02/slug-terminal-400x207.png 400w" sizes="(max-width: 816px) 100vw, 816px" /></p>

<p>&nbsp;</p>

<p>Acessando nosso localhost através de um browser o resultado será este</p>

<p><img class="aligncenter size-full wp-image-41195" alt="Slug rodando no navegador" src="http://tableless.com.br/wp-content/uploads/2014/02/slug-browser.png" width="621" height="353" srcset="uploads/2014/02/slug-browser.png 621w, uploads/2014/02/slug-browser-295x168.png 295w, uploads/2014/02/slug-browser-545x310.png 545w, uploads/2014/02/slug-browser-400x227.png 400w" sizes="(max-width: 621px) 100vw, 621px" /></p>

<h2 id="complementando">Complementando</h2>

<p>O comando <strong>php composer.phar install</strong> é utilizado somente uma vez em seu repositório. Para qualquer alteração do _composer.json_ que caracteriza-se como uma nova dependência ou remoção de uma existente deve ser utilizado o comando <strong>php composer.phar update</strong>.</p>

<p>O composer ainda possui um self-update em que baixa a sua última versão. Normalmente ao rodar qualquer comando você verá uma mensagem dizendo que a sua versão do composer precisa ser atualizada. Para isto basta o comando <strong>php composer.phar self-update</strong>.</p>

<p>&nbsp;</p>

<h2 id="finalizando">Finalizando</h2>

<p>O composer está se tornando a cada dia mais utilizado entre desenvolvedores e vale muito a pena se aprofundar no assunto.</p>

<p>O código-fonte deste exemplo está no github para eventuais consultas <a title="Código-fonte do projeto criado para este post" href="https://github.com/andrebian/posts/blob/master/tableless/tableless-composer-para-iniciantes/sources/sources.zip" target="_blank">neste link</a>.</p>

    </article>

<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = '';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
  </section>


  <aside class="tb-aside">
    Banner
  </aside>

</section>


<footer id="tb-footer">
    <div class="tb-container">
    <ul class="tb-social-links">
        <li><a href="http://facebook.com/tablelessbr">Facebook</a></li>
        <li><a href="http://twitter.com/tableless">Twitter</a></li>
        <li><a href="http://tableless.com.br/feed">RSS</a></li>
        <li><a href="http://medium.com/tableless">Medium</a></li>
    </ul>
    <nav class="tb-footer-nav">
        <a href="">Contato</a>
        <a href="">Anuncie</a>
        <a href="">Seja um Autor</a>
        <a href="">Fazemos código front-end</a>
    </nav>

    <p class="tb-for-community">
        Escrito pela e para a comunidade web brasileira. <a href="">Ajude</a>.
    </p>
    </div>
</footer>
<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>


<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
<script>
$(document).ready(function() {
  $('pre').each(function(i, block) {
    hljs.highlightBlock(block);
  });
})</script>


</body>
</html>

