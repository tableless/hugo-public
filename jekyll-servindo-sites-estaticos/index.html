
<!DOCTYPE html>
<html lang="pt-br" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <base href="http://tableless.com.br/">
  <title>Tableless</title>
  <link rel="canonical" href="http://tableless.com.br/jekyll-servindo-sites-estaticos/">
  <link href="" rel="alternate" type="application/rss+xml" title="Tableless" />
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css">
  
</head>
<body>


  <header id="tb-header">
    <a href="http://tableless.com.br/" class="tb-logo"><img src="images/logo.svg"></a>

    

    <nav id="tb-menu">
      <ul>

        
          
              
            <li>
              <a href="/categories/html">
                  
                  HTML
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/css/">
                  
                  CSS
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/javascript/">
                  
                  JavaScript
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/back-end/">
                  
                  Back-end
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/wordpress/">
                  
                  WordPress
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/acessibilidade/">
                  
                  Acessibilidade
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/design/">
                  
                  Design
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/t%C3%A9cnicas-e-pr%C3%A1ticas/">
                  
                  Na pr√°tica
              </a>
          
            </li>
          

      </ul>
    </nav>

  </header>

  <header class="tb-post-header">
    <h1 class="tb-hero-title"><a href="/jekyll-servindo-sites-estaticos/">Servindo sites est√°ticos com Jekyll</a></h1>
  <p class="tb-hero-p">
    
    Entenda como o Jekyll funciona e como ele pode te ajudar a fazer websites est√°ticos, sem banco de dados e f√°ceis de gerenciar.
    
  </p>
      <span class="tb-author">por <a href="/author/diego-eis">Diego Eis</a></span>


  </header>


<section class="tb-post">

  <section class="tb-post-content">
    <article class="tb-post-article">
      

<p>O <a href="http://tableless.com.br/servicos/front-end.php">Tableless produz c√≥digo front-end</a> HTML/CSS/JAVASCRIPT para v√°rios tipos de clientes, grandes ou pequenos. Os clientes querem ao final do projeto arquivos est√°ticos, em uma estrutura de arquivos decente e c√≥digo bem organizado e isso n√£o √© algo t√£o trivial assim.</p>

<h2 id="o-problema">O problema</h2>

<p>O primeiro problema que temos quando iniciamos a produ√ß√£o de um site, √© como resolver as partes de layout que s√£o repetidas em todas as p√°ginas do projeto, por exemplo: header, footer, sidebar e essas coisas. J√° vi v√°rios dos meus alunos mantendo sites com dezenas de p√°ginas, sem nem ao menos usar um simples include de PHP. Eu os perdoo por que a maioria estava come√ßando. Mesmo assim √© algo muito amador manter um site dessa forma. No Tableless, durante algum tempo, por conveni√™ncia, us√°vamos simples includes do PHP para prevenir repeti√ß√µes. Escolhemos PHP por conveni√™ncia, <a href="http://tableless.com.br/servicos/wordpress.php">j√° que produzimos muitos sites em WordPress</a>.</p>

<p>Um dos problemas estava resolvido. O segundo problema era: como entregar isso para o cliente?</p>

<p>Eu n√£o poderia simplesmente enviar um pacote com v√°rios arquivos <strong>.php</strong> para um cliente que trabalhava com ASP ou Python.</p>

<p>Logo come√ßamos a usar o <strong>wget</strong> para percorrer o projeto e transformar as p√°ginas em HTML est√°tico. N√£o demorou muito para desistirmos disso. Embora seja tudo autom√°tico, n√£o era o ideal. Precis√°vamos ter algo mais inteligente para isso. Foi a√≠ que surgiu em nossas vidas algumas ferramentas para gerar sites est√°ticos. Conhecemos o Jekyll, Middleman e alguns outros. Hoje vamos falar um pouco do <a href="http://jekyllrb.com">Jekyll</a>.</p>

<h2 id="jekyll">Jekyll</h2>

<p>O Jekyll √© um gerador de c√≥digos est√°ticos. A ideia √© que voc√™ crie p√°ginas e at√© mesmo um blog de forma est√°tica, usando HTML que voc√™ j√° conhece, junto com alguns truques que ir√£o ajud√°-lo a converter seu site em arquivos est√°ticos, pronto para ser publicado. Ele √© baseado em v√°rios formatos como Markdown para formata√ß√£o de textos e posts e um padr√£o de template chamado Liquid com um pouco de YAML para exibir e guardar os dados das vari√°veis. N√£o se preocupe com a sopa de letras, por enquanto. Mais √† frente no texto voc√™ vai entender um pouco mais.</p>

<h2 id="estrutura-de-diret√≥rios">Estrutura de diret√≥rios</h2>

<p>A coisa toda √© muito simples: todo o arquivo que tiver <strong>_</strong> (underline) na frente do nome, o Jekyll vai ignorar no pacote final, quando converter seu projeto. Veja uma estrutura de um dos nossos projetos:</p>

<p><img src="http://tableless.com.br/wp-content/uploads/2013/11/Screen-Shot-2013-11-10-at-5.09.22-PM.png" alt="Screen Shot 2013-11-10 at 5.09.22 PM" width="265" height="277" class="alignnone size-full wp-image-39447" srcset="uploads/2013/11/Screen-Shot-2013-11-10-at-5.09.22-PM.png 265w, uploads/2013/11/Screen-Shot-2013-11-10-at-5.09.22-PM-160x168.png 160w" sizes="(max-width: 265px) 100vw, 265px" /></p>

<p>A pasta <strong>_includes</strong> guarda arquivos que ser√£o reutilizados nas p√°ginas do projeto, tipo o header, footer, sidebar e etc ou qualquer outra coisa de acordo com sua necessidade.</p>

<p>Na pasta <strong>_layouts</strong> voc√™ vai colocar os padr√µes de layout de p√°ginas. Imagine que existam p√°ginas com formatos de estruturas diferentes. √â a√≠ que voc√™ vai organizar essas coisas.</p>

<p>Para voc√™ ter um exemplo, nesse projeto fizemos apenas uma estrutura b√°sica que usamos para home e para as p√°ginas internas. Embora as p√°ginas tenham estruturas diferentes, decidimos usar apenas um arquivo default para incluir por padr√£o em todas as p√°ginas o header e o footer. As estruturas das p√°ginas foram definidas de acordo com o c√≥digo espec√≠fico em cada uma das p√°ginas. Veja o c√≥digo do arquivo <strong>default.html</strong>:</p>

<pre class="lang-yaml">{% include header.html %}

{{ content }}

{% include footer.html %}
</pre>

<p>Rid√≠culo, n√©?</p>

<p>Ah! O <code>{{ content }}</code> √© uma vari√°vel que exibe o conte√∫do das p√°ginas. √â como o <code>the_content()</code> do WordPress. √â ali que o Jekyll vai inserir o conte√∫do das p√°ginas que voc√™ criar. No nosso caso, o c√≥digo encontrado em <strong>defail-view.html, index e results</strong>.</p>

<p>A pasta <strong>_site</strong> √© o build do seu projeto. √â ali que o Jekyll coloca a vers√£o final est√°tica do site, pronto para ser publicado.</p>

<p>Tem gente que deixa a pasta _site version√°vel no GIT, tem gente que bota no <strong>.ignore</strong>. A√≠ vai de voc√™ decidir o que achar melhor.</p>

<p>As URLs ficam assim:</p>

<pre class="lang-bash">.
|-- _config.yml
|-- _includes/
|-- _layouts/
|-- _posts/
|-- _site/
|-- detail-view.html    # =&gt; http://projeto.com/detail-view.html
|-- index.html    # =&gt; http://projeto.com
‚îî‚îÄ‚îÄ results.html  # =&gt; http://projeto.com/results.html
</pre>

<p>Se voc√™ inserir um arquivo <strong>index.html</strong> nas pastas, a url das p√°ginas v√£o ficar assim:</p>

<pre class="lang-bash">.
|-- _config.yml
|-- _includes/
|-- _layouts/
|-- _posts/
|-- _site/
|-- detail-view/
|---- index.html    # =&gt; http://projeto.com/detail-view/
|-- index.html    # =&gt; http://projeto.com
|-- results/
‚îî‚îÄ‚îÄ‚îÄ‚îÄ index.html    # =&gt; http://projeto.com/results/
</pre>

<h2 id="estrutura-de-c√≥digo">Estrutura de c√≥digo</h2>

<p>A estrutura de c√≥digo dos arquivos √© muito simples de se entender, mas para alguns pode ser um pouco estranha por n√£o ter familiaridade com estruturas de dados como YAML. Mas isso √© simples e voc√™ aprende r√°pido, tenho certeza. Continue lendo para voc√™ ver como √© f√°cil.</p>

<h3 id="sem-banco-de-dados">Sem banco de dados</h3>

<p>Para come√ßar, voc√™ n√£o mant√©m um banco de dados e √© isso que faz toda a gra√ßa. O conte√∫do do seu site ficar guardado nos arquivos de cada p√°gina. Voc√™ n√£o precisa levantar um servidor de MySQL. Todas as informa√ß√µes do site estar√£o nos arquivos que voc√™ criar para cada p√°gina. Ou seja, nada de queries, nada de templates tags do WordPress.</p>

<h4 id="yaml-e-liquid">YAML e Liquid</h4>

<p>O formato YAML √© conhecido pela facilidade de leitura. Ele foi criado para ser f√°cil da gente entender e tamb√©m escrever. Ou seja, ele √© um formato simples para escrevermos manualmente, mas tamb√©m para manipularmos via programa√ß√£o. √â aqui que o Jekyll come√ßa a ficar legal. Essa estrutura √© usada tamb√©m no Middleman e no DocPad. Logo, aprendendo aqui, voc√™ j√° vai saber mais ou menos como funciona nos outros geradores.</p>

<p>Qualquer arquivo que cont√©m um bloco YAML &#8211; que o pessoal do Jekyll chama de <strong>front-matter</strong> &#8211; ser√° processado como um arquivo especial. O front-matter <strong>precisa ser a primeira coisa do arquivo</strong> e deve estar num formato v√°lido de YAML. Toda p√°gina do seu site feito em Jekyll precisa come√ßar com essa estrutura:</p>

<pre class="lang-yaml">---
layout: default
title: Home
---
</pre>

<p>Simples, ahn? O bloco √© demarcado pelos tr√™s tra√ßos no come√ßo e no fim. TEM que ser tr√™s tra√ßos. Nem mais, nem menos. O c√≥digo YAML s√£o as duas vari√°veis <strong>layout</strong> e <strong>title</strong>.</p>

<p>Neste bloco voc√™ pode usar vari√°veis predefinidas ou criar suas pr√≥prias vari√°veis. Essas vari√°veis estar√£o dispon√≠veis para voc√™ acessar usando as tags do formato Liquid. Voc√™ j√° vai ver mais abaixo, primeiro vamos entender as duas vari√°veis acima.</p>

<p>A vari√°vel <strong>layout</strong> indica que voc√™ est√° usando a estrutura de template do <strong>default.html</strong>. Lembra a estrutura de arquivos e diret√≥rios que mostramos logo no in√≠cio? Os nomes que voc√™ coloca ali na vari√°vel <strong>layout</strong> s√£o os nomes dos arquivos que est√£o dentro da pasta <strong>_layouts</strong>, sem a extens√£o <strong>.html</strong>. Logo, se voc√™ tiver um arquivo ali dentro chamado <strong>no-sidebar.html</strong>, indicando um formato de p√°gina que n√£o vai ter sidebar, o valor da vari√°vel <strong>layout</strong> ser√° <strong>no-sidebar</strong>. Fica assim:</p>

<pre class="lang-yaml">---
layout: no-sidebar
title: P√°gina Interna
---
</pre>

<p>A segunda vari√°vel √© a <strong>title</strong>. Aqui √© uma vari√°vel criada por mim, que ser√° usada para ser o t√≠tulo da p√°gina. Veja abaixo como a gente puxa o valor da vari√°vel <strong>title</strong> que definimos acima, usando o formato Liquid.</p>

<pre class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html lang="pt-br"&gt;
&lt;head&gt;
    &lt;title&gt; {{ page.title }} &lt;/title&gt;
    &lt;meta charset="utf-8"&gt;
&lt;/head&gt;
&lt;body&gt;
...
</pre>

<p>O <strong>{{ page.title }}</strong> est√° dizendo que nesse local, ao renderizar o site, o Jekyll ir√° colocar o t√≠tulo da p√°gina atual.</p>

<p>O formato <a href="http://docs.shopify.com/themes/liquid-basics">Liquid</a> √© um formato de template muito simples. A sua sintaxe √© muito parecida com outros tipos de padr√µes de templates, como por exemplo o <a href="http://tableless.com.br/templates-client-side-com-mustache-js/">Mustache.js</a>. Logo, n√£o tem muito segredo. Voc√™ abre duas chaves <strong>{{</strong>, coloca o nome da vari√°vel e depois fecha com duas chaves novamente <strong>}}</strong>.</p>

<h4 id="entendendo-mais-sobre-as-vari√°veis">Entendendo mais sobre as vari√°veis</h4>

<p>Voc√™ usa o prefixo <strong>page</strong> para puxar os dados da p√°gina. Qualquer coisa que esteja ali no front-matter vai ser puxado usado o <strong>page</strong> antes. Se voc√™ quiser pegar o nome do site, por exemplo, ou qualquer outra coisa referente ao site inteiro, voc√™ usa o prefixo <strong>site</strong>. Um exemplo:</p>

<pre class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html lang="pt-br"&gt;
&lt;head&gt;
    &lt;title&gt; {{ page.title }} - {{ site.name }} &lt;/title&gt;
    &lt;meta charset="utf-8"&gt;
&lt;/head&gt;
&lt;body&gt;
...
</pre>

<p>Nesse caso, as informa√ß√µes referentes ao site n√£o estar√£o no <strong>front-matter</strong>, mas em um arquivo de configura√ß√£o, que o Jekyll vai ler sempre quando for iniciado. Esse arquivo se chama <strong>_config.yml</strong>. Voc√™ vai escrev√™-lo no mesmo formato que o front-matter. Um exemplo:</p>

<pre class="lang-yml"><strong>name:</strong> Nome do Projeto
<strong>source:</strong>      .
<strong>destination:</strong> ./_site
<strong>plugins:</strong>     ./_plugins
<strong>layouts:</strong>     ./_layouts
<strong>css_folder:</strong>  'assets/stylesheets'
<strong>js_folder:</strong>  'assets/javascripts'
<strong>img_folder:</strong>  'assets/images'
<strong>include:</strong>     ['.htaccess']
<strong>exclude:</strong>     []
<strong>keep_files:</strong>  ['.git','.svn']
<strong>timezone:</strong>    nil

...

</pre>

<p>H√° outras vari√°veis globais que podem n√£o estar a√≠ no <strong>_config.yml</strong>. Por exemplo a <strong>{{ site.pages }}</strong> que retorna a lista de p√°ginas do site.</p>

<p>H√° uma s√©rie de vari√°veis dispon√≠veis <a href="http://jekyllrb.com/docs/frontmatter/">aqui</a> e voc√™ pode ver as <a href="http://jekyllrb.com/docs/variables/">vari√°veis globais aqui</a>.</p>

<h3 id="entendendo-o-config-yml">Entendendo o _config.yml</h3>

<p>O <strong>_config.yml</strong> guarda as configura√ß√µes do seu projeto. Ele deve estar sempre no root do seu projeto. Sempre que voc√™ inicia um novo projeto Jekyll, ele cria um _config.yml. Voc√™ pode ver um exemplo abaixo:</p>

<pre class="lang-yml">source:      .
destination: ./_site
plugins:     ./_plugins
layouts:     ./_layouts
include:     ['.htaccess']
exclude:     []
keep_files:  ['.git','.svn']
gems:        []
timezone:    nil
encoding:    nil

future:      true
show_drafts: nil
limit_posts: 0
pygments:    true

relative_permalinks: true

permalink:     date
paginate_path: 'page:num'

markdown:      maruku
markdown_ext:  markdown,mkd,mkdn,md
textile_ext:   textile

excerpt_separator: "\n\n"

safe:        false
host:        0.0.0.0
port:        4000
baseurl:     /
url:         http://localhost:4000
lsi:         false

maruku:
  use_tex:    false
  use_divs:   false
  png_engine: blahtex
  png_dir:    images/latex
  png_url:    /images/latex

rdiscount:
  extensions: []

redcarpet:
  extensions: []

kramdown:
  auto_ids: true
  footnote_nr: 1
  entity_output: as_char
  toc_levels: 1..6
  smart_quotes: lsquo,rsquo,ldquo,rdquo
  use_coderay: false

  coderay:
    coderay_wrap: div
    coderay_line_numbers: inline
    coderay_line_numbers_start: 1
    coderay_tab_width: 4
    coderay_bold_every: 10
    coderay_css: style

redcloth:
  hard_breaks: true
</pre>

<p>Para ficar mais f√°cil, eu ainda adiciono uma ou outra op√ß√£o personalizada no _config.yml, como por exemplo o caminho do CSS e do Javascript:</p>

<pre class="lang-yml">css_folder:  'assets/stylesheets'
js_folder:  'assets/javascripts'
img_folder: 'assets/images'
</pre>

<p>Assim eu chamo os assets assim:</p>

<pre class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html lang="pt-br"&gt;
&lt;head&gt;
    &lt;title&gt; {{ page.title }} - {{ site.name }} &lt;/title&gt;
    &lt;meta charset="utf-8"&gt;

    &lt;link rel="stylesheet" type="text/css" href="{{ site.css_folder }}/bootstrap.min.css"&gt;
    &lt;link rel="stylesheet" type="text/css" href="{{ site.css_folder }}/style.css"&gt;

&lt;/head&gt;
&lt;body&gt;

...

</pre>

<p>Bem legal, n√©?</p>

<p>N√£o precisa entender todas as vari√°veis que eles colocam ali no <strong>_config.yml</strong>. Basta entender que d√° para criar novas vari√°veis personalizadas e que voc√™ pode modificar os valores das vari√°veis existentes. H√° muita coisa ali que voc√™ n√£o precisa usar. Mesmo assim, se voc√™ tiver muitos outros dados para usar, voc√™ pode importar em formato YAML entro da pasta <strong>_data</strong>, que eu n√£o vou detalhar sobre isso aqui, por enquanto.</p>

<h3 id="quick-start">Quick start</h3>

<p>Para iniciar um projeto e come√ßar a fu√ßar nas coisas √© f√°cil.</p>

<pre class="lang-bash">~ $ gem install jekyll
~ $ jekyll new nome-projeto
~ $ cd nome-projeto
~/nome-projeto $ jekyll serve --w
</pre>

<p>O par√¢metro <strong>&#8211;w</strong> ou <strong>&#8211;watch</strong> serve para que a cada vez que voc√™ fizer uma modifica√ß√£o nos arquivos do projeto, o Jekyll faz um build autom√°tico do projeto. A√≠ √© s√≥ fazer um refresh no site e ver as modifica√ß√µes.</p>

<p>O Jekyll vai subir seu site na porta :4000, √© s√≥ seguir para: <a href="http://localhost:4000/">http://localhost:4000/</a></p>

<p>Lembre-se que voc√™ precisa ter Ruby instalado na sua m√°quina, j√° que o Jekyll √© uma GEM.</p>

<p>Feito isso, d√° uma fu√ßada na pasta do projeto. Voc√™ vai perceber que existe uma pasta <strong>_posts</strong> que eu n√£o citei nesse artigo.</p>

<p>O Jekyll pode ser usado para criar um blog. Os posts s√£o arquivos escritos em Markdown e que s√£o automaticamente transformados em arquivos HTML e guardados em pastas organizadas por ordem cronol√≥gica. Coisa fina! Talvez em um pr√≥ximo post eu explique melhor esse m√≥dulo.</p>

<h2 id="conclus√£o">Conclus√£o</h2>

<p>Eu, pessoalmente, prefiro Jekyll ao Middleman. Os dois s√£o bem parecidos. Mas eu acho Jekyll bem mais simples. Eu uso Middeman em outros projetos e vou tentar preparar um post explicando o b√°sico para voc√™s sobre ele.</p>

<p>Se voc√™ tem Windows e estiver muito afim de fazer isso tudo funcionar, leia esse post do Nando ensinando como faz para instalar <a href="http://simplesideias.com.br/configurando-ruby-rails-mysql-e-git-no-windows">Ruby, Rails, MySQL e Git no Windows</a> ou compra um Mac.</p>

<p>A comunidade Ruby ajudou muito o mundo front-end com v√°rias ferramentas que ajudam a automatizar processos de desenvolvimento. √â por isso que geralmente os front-ends que trabalham em projetos com Ruby conseguem se virar melhor em determinados pontos. Mas essa √© uma outra hist√≥ria. üòâ</p>

    </article>

<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = '';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
  </section>


  <aside class="tb-aside">
    Banner
  </aside>

</section>


<footer id="tb-footer">
    <div class="tb-container">
    <ul class="tb-social-links">
        <li><a href="http://facebook.com/tablelessbr">Facebook</a></li>
        <li><a href="http://twitter.com/tableless">Twitter</a></li>
        <li><a href="http://tableless.com.br/feed">RSS</a></li>
        <li><a href="http://medium.com/tableless">Medium</a></li>
    </ul>
    <nav class="tb-footer-nav">
        <a href="">Contato</a>
        <a href="">Anuncie</a>
        <a href="">Seja um Autor</a>
        <a href="">Fazemos c√≥digo front-end</a>
    </nav>

    <p class="tb-for-community">
        Escrito pela e para a comunidade web brasileira. <a href="">Ajude</a>.
    </p>
    </div>
</footer>
<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>


<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
<script>
$(document).ready(function() {
  $('pre').each(function(i, block) {
    hljs.highlightBlock(block);
  });
})</script>


</body>
</html>

