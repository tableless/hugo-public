
<!DOCTYPE html>
<html lang="pt-br" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <base href="http://tableless.com.br/">
  <title>Tableless</title>
  <link rel="canonical" href="http://tableless.com.br/latencia-largura-de-banda-e-a-velocidade-da-luz/">
  <link href="" rel="alternate" type="application/rss+xml" title="Tableless" />
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/default.min.css">
  
</head>
<body>


  <header id="tb-header">
    <a href="http://tableless.com.br/" class="tb-logo"><img src="images/logo.svg"></a>

    

    <nav id="tb-menu">
      <ul>

        
          
              
            <li>
              <a href="/categories/html">
                  
                  HTML
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/css/">
                  
                  CSS
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/javascript/">
                  
                  JavaScript
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/back-end/">
                  
                  Back-end
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/wordpress/">
                  
                  WordPress
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/acessibilidade/">
                  
                  Acessibilidade
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/design/">
                  
                  Design
              </a>
          
            </li>
          
              
            <li>
              <a href="/categories/t%C3%A9cnicas-e-pr%C3%A1ticas/">
                  
                  Na prática
              </a>
          
            </li>
          

      </ul>
    </nav>

  </header>

  <header class="tb-post-header">
    <h1 class="tb-hero-title"><a href="/latencia-largura-de-banda-e-a-velocidade-da-luz/">Latência, largura de banda e a velocidade da luz</a></h1>
  <p class="tb-hero-p">
    
    Se a velocidade da luz fosse suficiente, estaríamos salvos.
    
  </p>
      <span class="tb-author">por <a href="/author/cleber-dantas">Cleber Dantas</a></span>


  </header>


<section class="tb-post">

  <section class="tb-post-content">
    <article class="tb-post-article">
      <p>Será que se aumentarmos a banda da nossa internet de 5Mbps para 10Mbps teremos o dobro de velocidade na navegação de páginas na Web?</p>

<p>Comecei esse post com uma pergunta de propósito e espero que você possa responder essa questão ao final da leitura.</p>

<p>Hoje enfrentamos um grande problema em todos os sistemas de rede que basicamente é a velocidade de uma informação sair de um ponto e chegar a outro, esse tempo de viagem da tal informação entre dois pontos é o que chamamos de <strong>latência</strong>. Já faltamos disso <a href="http://tableless.com.br/navigation-timing-api/" title="Medindo performance e latência com a Navigation Timing API">aqui</a> e <a href="http://tableless.com.br/performance-frontend-parte2/" title="Performance front-end – Parte 2">aqui</a>. Esse artigo complementa o assunto.</p>

<p>O tempo de latência normalmente é medido em <em>ms</em> (milissegundos) para a maioria dos sistemas/situações, como não estamos habituados a pensar em milissegundos veja abaixo uma tabela de percepção dos usuários em relação a algumas “esperas”:</p>

<table width="100%" border="1">
  <tr>
    <td>
      Delay
    </td>
    
    <td>
      User Reaction
    </td>
  </tr>
  
  <tr>
    <td>
      0 – 100ms
    </td>
    
    <td>
      Instant
    </td>
  </tr>
  
  <tr>
    <td>
      100 – 300ms
    </td>
    
    <td>
      Small perceptible delay
    </td>
  </tr>
  
  <tr>
    <td>
      300 – 1000ms
    </td>
    
    <td>
      Machine is working
    </td>
  </tr>
  
  <tr>
    <td>
      1s+
    </td>
    
    <td>
      Mental context switch
    </td>
  </tr>
  
  <tr>
    <td>
      10s+
    </td>
    
    <td>
      I’ll come back later…
    </td>
  </tr>
</table>

<p>&nbsp;</p>

<p>Claramente se quisermos ter a atenção total de nossos usuários teremos que manter a velocidade de resposta de nossas aplicações em até <strong>300ms</strong> (complicadíssimo!).</p>

<p>Ok, já sabemos o que é latência, mas outro conceito importante de aprendermos é o <strong>RTT</strong> (round trip time) que basicamente é o tempo de ida e volta de um sinal/informação entre dois pontos (latência de um meio de transmissão vezes 2).</p>

<p>O grande problema com a latência na realidade é que hoje já estamos transmitindo os dados/sinais/informações de maneira <strong>muito</strong> rápida e estamos amarrados a um limite de velocidade também conhecido como <strong>velocidade da luz.</strong></p>

<p>A <a title="velocidade da luz" href="http://pt.wikipedia.org/wiki/Velocidade_da_luz" target="_blank">velocidade da luz</a> por definição é igual a 299 792 458 metros por segundo ou mais ou menos 1079 milhões de quilomêtros por hora (bastante não?), só que (sempre tem um but) essa velocidade toda só é atingida no <a title="vácuo" href="http://pt.wikipedia.org/wiki/V%C3%A1cuo" target="_blank">vácuo</a>.</p>

<p>Bom como o vácuo perfeito não é possível na natureza e o não perfeito hoje não é utilizado em grande escala (somente alguns centros de pesquisa possuem câmaras de vácuo) teremos que utilizar outro meio para a transmissão da luz certo? Sim perfeito!</p>

<p>Que a <a title="fibra óptica" href="http://pt.wikipedia.org/wiki/Fibra_%C3%B3ptica" target="_blank">fibra óptica</a> é realidade não temos duvida =D e é nela que basicamente transmitimos a luz/sinais/informações entre os continentes hoje em dia (normalmente debaixo dos oceanos).</p>

<p>A fibra é um meio muito competente para a transmissão da luz, mas é um meio de transmissão e não a ausência dele (vácuo). Todo <strong>meio</strong> de transmissão possui um <a title="índice de refração" href="http://pt.wikipedia.org/wiki/%C3%8Dndice_de_refra%C3%A7%C3%A3o" target="_blank">índice de refração</a> associado ao mesmo e no caso da fibra esse valor é de ~1.5.</p>

<p>Veja abaixo algumas distâncias e tempos de latência entre algumas cidades famosas do nosso querido planeta terra:</p>

<table>
  <col /> <col /> <col /> <col /> <col /> <tr>
    <td>
      Rota
    </td>
    
    <td>
      Distância
    </td>
    
    <td>
      Tempo – Luz no vácuo
    </td>
    
    <td>
      Tempo – Luz na fibra
    </td>
    
    <td>
      Round Trip Time (RTT) na fibra
    </td>
  </tr>
  
  <tr>
    <td>
      <p id="new_york_to_san">
        New York to San Francisco
      </p>
    </td>
    
    <td>
      <p id="km_id1">
        4,148 km
      </p>
    </td>
    
    <td>
      <p id="ms_id1">
        14 ms
      </p>
    </td>
    
    <td>
      <p id="ms_id2">
        <strong>21 ms</strong>
      </p>
    </td>
    
    <td>
      <p id="ms_id3">
        42 ms
      </p>
    </td>
  </tr>
  
  <tr>
    <td>
      <p id="new_york_to_lon">
        New York to London
      </p>
    </td>
    
    <td>
      <p id="km_id2">
        5,585 km
      </p>
    </td>
    
    <td>
      <p id="ms_id4">
        19 ms
      </p>
    </td>
    
    <td>
      <p id="ms_id5">
        <strong>28 ms</strong>
      </p>
    </td>
    
    <td>
      <p id="ms_id6">
        56 ms
      </p>
    </td>
  </tr>
  
  <tr>
    <td>
      <p id="new_york_to_syd">
        New York to Sydney
      </p>
    </td>
    
    <td>
      <p id="km_id3">
        15,993 km
      </p>
    </td>
    
    <td>
      <p id="ms_id7">
        53 ms
      </p>
    </td>
    
    <td>
      <p id="ms_id8">
        <strong>80 ms</strong>
      </p>
    </td>
    
    <td>
      <p id="ms_id9">
        160 ms
      </p>
    </td>
  </tr>
</table>

<p>&nbsp;</p>

<p>O desafio hoje é tentar reduzir cada vez mais o índice de refração dos meios de transmissão e chegar cada vez mais perto do “limite” da velocidade da luz (complicadíssimo de novo!).</p>

<p>Perceba que uma resolução de DNS (que acontece em todas as páginas web do mundo) requer um RTT, estabelecer uma conexão TCP (que é por onde uma requisição HTTP é trafegada, leia: <a title="Anatomia de uma requisição HTTP" href="http://www.cleberdantas.com/2011/12/anatomia-de-uma-requisicao-http/" target="_blank">Anatomia de uma requisição HTTP</a>) requer outro RTT, mas sabemos que acontece mais de uma resolução DNS por página e também que são estabelecidas mais de uma conexão TCP para trafegar as diversas requisições HTTP de uma página.</p>

<p>Mesmo sabendo disso ainda queremos ter aplicações rodando abaixo de 300ms (Are you fucking kidding me?).</p>

<p>Ok, sabemos que da para reaproveitar conexões TCP (keep-alive), usar <a title="CND" href="http://www.cleberdantas.com/2011/11/content-delivery-network-cdn-voce-ainda-vai-usar-uma/" target="_blank">CDN</a> e trazer para mais perto dos usuários nossos assets, assim diminuindo o percurso o que diminui a latência.</p>

<p>Agora você pode estar pensando que foi justamente por isso que você contratou aquela internet super veloz de 10/20Mbps do seu fornecedor de internet, para poder navegar muito mais rápido na Web certo? Errado!</p>

<p>Veja bem a largura de banda (bandwidth) se compararmos com um cano de água quer dizer simplesmente que quanto mais largo o cano mais água eu posso colocar dentro dele, mas se o cano estiver vazio demorará um tempo para o conteúdo do cano ir de um lado ao outro, entende?</p>

<p>Ai você deve estar se perguntando, pois é eu comprei mais banda para ter um cano mais largo e portanto transferir mais dados de um lado a outro, se eu tivesse uma banda menor (um cano mais fino) certamente demoraria mais para todos os dados viajar de um canto a outro. Perfeito! Você tem razão.</p>

<p>Mas perceba que a minha pergunta no começo do post foi se aumentar a banda quer dizer aumentar a velocidade de <strong>navegação na web.</strong> Eu não me referi por exemplo em assistir um vídeo, música, streaming e outras coisas porque para esse tipo de atividade uma banda maior faz TOTAL diferença, quanto mais melhor.</p>

<p>E por quê? Por quê para ver vídeo a banda faz diferença e para navegar na Web nem tanto?</p>

<p>Bom a resposta é na verdade simples, ouvir uma música ou ver um vídeo significa dizer que estamos utilizando o protocolo TCP (transporte) para fazer algo que ele foi desenhado para.</p>

<p>O protocolo TCP foi desenhado para transmitir dados em <em>long lived connections</em> (conexões duradouras) e também para _bulk data transfer_ (grandes quantidades de dados).</p>

<p>Navegar na Web é justamente o oposto, utilizamos conexões curtas e que trafegam poucas quantidades de dados.</p>

<p>O Google fez dois experimentos visando ver a diferença de se aumentar a largura de banda e também de diminuir a latência e ver o que acontece com a navegação na Web (não vídeos, músicas e etc), veja o que acontece quando aumentamos a largura de banda ou então diminuimos a latência:</p>

<p><img src="http://www.cleberdantas.com/wp-content/uploads/2013/04/bandwidth-vs-latency.png" alt="Page Load Time vs. Bandwidth and Latency" /></p>

<p>&nbsp;</p>

<p>Quando fixamos a latência e aumentamos Mbps, depois de 5Mbps a diferença até 10Mbps é de apenas 15% (ajuda, mas nem tanto), primeiro gráfico.</p>

<p>Por outro lado quando fixamos a banda (nesse caso em 5Mbps) e vamos diminuindo de 20ms em 20ms (segundo gráfico) o ganho se mostra linear! Quanto menos latência maior é a velocidade de carregamento de nossas páginas! (sweet!)</p>

<p>O estudo do Google pode ser visto aqui: <a href="https://docs.google.com/a/chromium.org/viewer?a=v&amp;pid=sites&amp;srcid=Y2hyb21pdW0ub3JnfGRldnxneDoxMzcyOWI1N2I4YzI3NzE2">https://docs.google.com/a/chromium.org/viewer?a=v&amp;pid=sites&amp;srcid=Y2hyb21pdW0ub3JnfGRldnxneDoxMzcyOWI1N2I4YzI3NzE2</a></p>

<p>Ou seja, se seu objetivo é apenas aumentar a velocidade de navegação nas páginas Web aumentar a banda (para mais de 5Mbps) não vai te ajudar muito, mas se você conseguir derrubar as leis da física e fazer algo que ultrapasse a velocidade da luz ou diminua o índice de refração dos meios de transmissão será algo muito melhor =D.</p>

<p><strong>Oh wait!</strong></p>

<p>Você esta em uma rede WIFI? 3G? Bom ai o negócio é ainda pior, mas isso é assunto para outro post <img src="http://www.cleberdantas.com/wp-includes/images/smilies/icon_wink.gif" alt=";)" /></p>

<p><strong>Good news </strong></p>

<p>HTTP 2.0 esta sendo desenvolvido e ele esta sendo baseado no protocolo <a title="SPDY" href="http://pt.wikipedia.org/wiki/SPDY" target="_blank">SPDY</a> que entre outras coisas faz um uso MUITOO melhor das conexões TCP (teremos melhoria de performance só de migrar \o/), mas ainda estamos numa fase inicial do projeto, vamos aguardar.</p>

<p><strong>Conclusão</strong></p>

<p>Navegar na Web é “latency bound”, aumentar a banda depois de um certo nível não faz sentido.</p>

<p>Diminuir a latência é muito difícil (leis da física caem sobre nossas cabeças)</p>

<p>HTTP 2.0 nos ajudará bastante</p>

<p>PS: Se gostou do post compartilhe com seus amigos, principalmente se forem Devs Web</p>

<p>Obrigado e vamos falar mais nos comentários?</p>

<p>Abs</p>

    </article>

<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = '';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
  </section>


  <aside class="tb-aside">
    Banner
  </aside>

</section>


<footer id="tb-footer">
    <div class="tb-container">
    <ul class="tb-social-links">
        <li><a href="http://facebook.com/tablelessbr">Facebook</a></li>
        <li><a href="http://twitter.com/tableless">Twitter</a></li>
        <li><a href="http://tableless.com.br/feed">RSS</a></li>
        <li><a href="http://medium.com/tableless">Medium</a></li>
    </ul>
    <nav class="tb-footer-nav">
        <a href="">Contato</a>
        <a href="">Anuncie</a>
        <a href="">Seja um Autor</a>
        <a href="">Fazemos código front-end</a>
    </nav>

    <p class="tb-for-community">
        Escrito pela e para a comunidade web brasileira. <a href="">Ajude</a>.
    </p>
    </div>
</footer>
<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>


<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
<script>
$(document).ready(function() {
  $('pre').each(function(i, block) {
    hljs.highlightBlock(block);
  });
})</script>


</body>
</html>

